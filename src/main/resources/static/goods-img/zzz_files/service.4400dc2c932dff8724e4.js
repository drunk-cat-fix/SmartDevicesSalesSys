(self.miniJsonp=self.miniJsonp||[]).push([[9631],{27449:function(e,t,r){var n,o,c,i,a,u,s,l,f,d,p;e.exports=(n=r(58518),o=r(29494),c=r(36808),i=r(67429),a=r(94301),u=r(44900),s=r(59065),l=r(67677),f=r(58397),d=r(82677),p=r(34857),function(){"use strict";var e={701:function(e,t,r){r.d(t,{t:function(){return c}});var n=r(661),o=r.n(n),c=o().t.bind(o())},187:function(e){var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function c(){c.init.call(this)}e.exports=c,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,c),n(r)}function c(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}S(e,t,c,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&S(e,"error",t,r)}(e,o,{once:!0})}))},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var i=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function s(e,t,r,n){var o,c,i,s;if(a(r),void 0===(c=e._events)?(c=e._events=Object.create(null),e._eventsCount=0):(void 0!==c.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),c=e._events),i=c[t]),void 0===i)i=c[t]=r,++e._eventsCount;else if("function"==typeof i?i=c[t]=n?[r,i]:[i,r]:n?i.unshift(r):i.push(r),(o=u(e))>0&&i.length>o&&!i.warned){i.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=i.length,s=l,console&&console.warn&&console.warn(s)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=l.bind(n);return o.listener=r,n.wrapFn=o,o}function d(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):_(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function _(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function S(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(c){n.once&&e.removeEventListener(t,o),r(c)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return u(this)},c.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,c=this._events;if(void 0!==c)o=o&&void 0===c.error;else if(!o)return!1;if(o){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var u=c[e];if(void 0===u)return!1;if("function"==typeof u)n(u,this,t);else{var s=u.length,l=_(u,s);for(r=0;r<s;++r)n(l[r],this,t)}return!0},c.prototype.addListener=function(e,t){return s(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return s(this,e,t,!0)},c.prototype.once=function(e,t){return a(t),this.on(e,f(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,f(this,e,t)),this},c.prototype.removeListener=function(e,t){var r,n,o,c,i;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,c=r.length-1;c>=0;c--)if(r[c]===t||r[c].listener===t){i=r[c].listener,o=c;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,i||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,c=Object.keys(r);for(n=0;n<c.length;++n)"removeListener"!==(o=c[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},c.prototype.listeners=function(e){return d(this,e,!0)},c.prototype.rawListeners=function(e){return d(this,e,!1)},c.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},c.prototype.listenerCount=p,c.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},782:function(e){e.exports=s},830:function(e){e.exports=l},292:function(e){e.exports=f},661:function(e){e.exports=n},444:function(e){e.exports=a},598:function(e){e.exports=c},383:function(e){e.exports=d},944:function(e){e.exports=p},855:function(e){e.exports=o},672:function(e){e.exports=u},459:function(e){e.exports=i}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,r),c.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var _={};return function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,r){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,r)}function n(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&t(e,r)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,r,n){return f=l()?Reflect.construct:function(e,r,n){var o=[null];o.push.apply(o,r);var c=new(Function.bind.apply(e,o));return n&&t(c,n.prototype),c},f.apply(null,arguments)}function d(e){var r="function"==typeof Map?new Map:void 0;return d=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,o)}function o(){return f(e,arguments,a(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),t(o,e)},d(e)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}r.r(_),r.d(_,{$tracker:function(){return st},Blacklist:function(){return L},CancelOrderWarning:function(){return k},CustomError:function(){return m},EventBus:function(){return lt},ExceptionName:function(){return we},Forbidden:function(){return h},HTTPError:function(){return H},InternalServerError:function(){return x},Limiting:function(){return N},MarkName:function(){return Ae},NeedCaptchaVerify:function(){return j},NotFound:function(){return D},ReportComponent:function(){return Ce},ReportPoint:function(){return Ve},TemporyError:function(){return U},Unauthoried:function(){return w},UnprocessableEntity:function(){return P},UntrustedNetwork:function(){return I},UnverifiedPhoneNumber:function(){return M},Webview:function(){return A},affiliateSchema:function(){return ht},agentConversationSchema:function(){return Ct},clearApiCache:function(){return oe},collectAsyncTask:function(){return Ye},collectComponentTask:function(){return Ke},collectConversationLoadTask:function(){return ze},collectLoadTask:function(){return We},configTrackerUser:function(){return at},contactsSchema:function(){return wt},conversationSchema:function(){return gt},exceptionTag:function(){return De},fetch:function(){return ot},getReportManager:function(){return Ne},getTranslation:function(){return jt},initMDAPSdk:function(){return Je},isError:function(){return F},isInServiceDownDuration:function(){return ue},mdapConfig:function(){return je},messageSchema:function(){return Et},messageShortcutsSchema:function(){return yt},normalize:function(){return Nt},offerSchema:function(){return Ot},orderSchema:function(){return bt},productSchema:function(){return mt},rateCardsSchema:function(){return At},reportApiTime:function(){return Xe},shopSchema:function(){return Tt},shopService:function(){return Z},stickerSchema:function(){return Rt},userSchema:function(){return vt},vouchersSchema:function(){return Dt}});var S=function(t){n(o,t);var r=p(o);function o(t,n,c){var i;return e(this,o),(i=r.call(this,t)).name=i.constructor.name,i.errors=n,i.data=c,i}return o}(d(Error));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}var h=function(t){n(o,t);var r=v(o);function o(t,n,c){var i;return e(this,o),(i=r.call(this,t,n,c)).name=i.constructor.name,i}return s(o,[{key:"handler",value:function(){}}]),o}(S),E=r(701).t;function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}var b=["unauthorized_for_shop","target_subaccount_unauthorized_for_shop","target_group_unauthorized_for_shop","conversation_not_belong_to_you","conversation_not_dispatch","cannot_move_conversation_to_yourself","target_subaccount_not_online","subaccount_conversation_not_found","conversation_closed"],m=function(t){n(o,t);var r=g(o);function o(t,n,i){var a;return e(this,o),(a=r.call(this,t,n,i)).name=a.constructor.name,a.handler=a.handler.bind(c(a)),a}return s(o,[{key:"handler",value:function(){var e="";if(b.includes(this.errors))e="forward.error.".concat(this.errors);else switch(this.errors){case"user_have_delete_disable":e="forward.error.user_deleted";break;case"user_has_pending_order":e="conversation_detail.workstation.block_fail_modal.title";break;case"too_many_requests_for_unique_fields":e="feedback_modal.too_many_requests_for_unique_fields";break;default:e="common.server_error.warning_tips"}return{show:!0,type:"fail",message:E(e)}}}]),o}(S),O=r(855),R=r(701).t;function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}var y={rating_card_expired:"conversation_detail.message_list.csat_expired",have_submited_csat:"conversation_detail.message_list.csat_have_submited",no_organic_within_24hr:"conversation_detail.message_list.csat_no_organic_within_24hr",send_rating_card_too_frequently:"conversation_detail.message_list.csat_send_rating_card_too_frequently",buyer_receiver_too_many_rating_card:"conversation_detail.message_list.csat_buyer_receiver_too_many_rating_card",buyer_active_feedback_off:"conversation_detail.message_list.csat_buyer_active_feedback_off",not_chat_with_agent:"conversation_detail.message_list.csat_not_chat_with_agent",have_received_rating_card_today:"conversation_detail.message_list.csat_have_received_rating_card_today",can_not_rate_now:"conversation_detail.message_list.csat_can_not_rate_now",can_not_rate_bot_now:"cast.error.can_not_rate_bot_now",bot_frequency_limit:"cast.error.bot_frequency_limit",not_chat_with_bot:"cast.error.not_chat_with_bot"},A=function(t){n(o,t);var r=T(o);function o(t,n,c){var i;return e(this,o),(i=r.call(this,t,n,c)).name=i.constructor.name,i}return s(o,[{key:"handler",value:function(e){var t,r=null!==(t=y[this.errors])&&void 0!==t?t:"common.server_error.warning_tips";"cast.error.can_not_rate_bot_now"===r&&(0,O.checkSpecialShops)(e)&&(r="".concat(r,"_idscs"));var n=R(r);if("buyer_receiver_too_many_rating_card"===this.errors){var o,c,i=null!==(o=null===(c=this.data)||void 0===c?void 0:c.limit)&&void 0!==o?o:"";n=R(y.buyer_receiver_too_many_rating_card,{count:i})}return{message:n,show:!0,type:"fail"}}}]),o}(S);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}var w=function(t){n(o,t);var r=C(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(S),D=function(t){n(o,t);var r=C(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(S),P=function(t){n(o,t);var r=C(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(S),N=function(t){n(o,t);var r=C(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(S),I=function(t){n(o,t);var r=C(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(S),U=function(t){n(o,t);var r=C(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(S),L=function(t){n(o,t);var r=C(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(S),k=function(t){n(o,t);var r=C(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(S),M=function(t){n(o,t);var r=C(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(S),x=function(t){n(o,t);var r=C(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(S),j=function(t){n(o,t);var r=C(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(S),H=function(e){switch(e){case 401:return w;case 403:return h;case 404:return D;case 422:return P;case 429:return N;case 451:return I;case 452:return U;case 491:return m;case 492:return L;case 493:return A;case 494:return k;case 495:return M;case 499:return j;case 500:return x;default:return Error}},F=function(e){return"".concat(e).startsWith("4")||"".concat(e).startsWith("5")};function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t){if(e){if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,c=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return c}}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t,r,n,o,c,i){try{var a=e[c](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function K(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var c=e.apply(t,r);function i(e){z(c,n,o,i,a,"next",e)}function a(e){z(c,n,o,i,a,"throw",e)}i(void 0)}))}}var Y=r(598),q=r.n(Y),Q=r(459);function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=function(){function t(){e(this,t),this.shopsMap={}}var r;return s(t,[{key:"updateShopMap",value:function(e){this.shopsMap=X(X({},this.shopsMap),e)}},{key:"getRegion",value:(r=K(regeneratorRuntime.mark((function e(t,r){var n,o,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}if(o=null===(n=this.shopsMap[r])||void 0===n?void 0:n.country){e.next=8;break}return e.next=5,ot({resource:"shop",id:r,params:{need_cache:1,cache_expires:600}});case 5:return c=e.sent,this.updateShopMap(G({},c.id,c)),e.abrupt("return",c.country);case 8:return e.abrupt("return",o);case 11:if(i=(0,O.getRuntimeRegion)().toUpperCase(),!["KR","CN"].includes(i)&&!t){e.next=14;break}return e.abrupt("return","GLOBAL");case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}]),t}(),Z=new $;function ee(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}"live"!==(0,O.getRuntimeServer)()&&(window.shopService=Z);var te=r(444),re=r.n(te),ne="CHAT_API",oe=function(){window.caches&&window.caches.delete(ne)};function ce(e,t){return ie.apply(this,arguments)}function ie(){return(ie=K(regeneratorRuntime.mark((function e(t,r){var n,o,c,i,a,u,s,l,f,d,p,_,S,v,h,E,g,b,m,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),o=n.searchParams,c=o.get("need_cache"),i=o.get("force_update"),a=o.get("_ts"),u=r.method&&"get"===r.method.toLowerCase(),s="&csrf_token=".concat(encodeURIComponent(o.get("csrf_token")||"")),l="&force_update=".concat(String(i)),f=t.replace(s,"").replace(l,"").replace(a||"",""),!(u&&c&&window.caches)){e.next=44;break}return e.next=13,window.caches.open(ne);case 13:return d=e.sent,e.next=16,d.match(f);case 16:if(p=e.sent,_=Date.now(),!p){e.next=25;break}if(!(_<Number(p.headers.get("cache-expires")))||i){e.next=23;break}return e.abrupt("return",p);case 23:return e.next=25,d.delete(f);case 25:return e.next=27,re()(t,r);case 27:if(S=e.sent,v=S.clone(),200!==S.status){e.next=41;break}return h=ee(S.headers.entries()),E={},g=Number(o.get("cache_expires"))||3600,b=_+1e3*g,e.next=36,S.blob();case 36:m=e.sent,h.forEach((function(e){E[e[0]]=e[1]})),E["cache-expires"]=b,O=new Response(m,{headers:new Headers(E)});try{d.put(f,O)}catch(e){window.caches.delete(ne)}case 41:return e.abrupt("return",v);case 44:return e.abrupt("return",re()(t,r));case 45:e.next=50;break;case 47:return e.prev=47,e.t0=e.catch(0),e.abrupt("return",re()(t,r));case 50:case"end":return e.stop()}}),e,null,[[0,47]])})))).apply(this,arguments)}var ae=r(672),ue=function(){var e=window.__SERVICEDOWN_STATT_TIME__,t=window.__SERVICEDOWN_END_TIME__,r=void 0!==e&&void 0!==t,n=Math.ceil(Date.now()/1e3);return r&&n>=e&&n<=t},se=function(e){F(e)||!ue()&&window.__CHAT_GLOBAL__.setServiceDownStatus&&ae.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!1,closed:!1,list:!1,message:!1}))},le=function(e,t){var r=new(H(e))(t.message,t.errors||t.error_code||t.errcode,t.data);if(r)throw r},fe=function(e,t,r){if(F(e)){var n=r.uri,o=r.resource;"br_site_is_close"===(t||{}).error_code&&function(e){var t;ue()?(t=e.split("?")[0]).endsWith("conversations")||t.endsWith("conversation/list")?window.__CHAT_GLOBAL__.setServiceDownStatus&&ae.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!0,list:!0})):window.__CHAT_GLOBAL__.setServiceDownStatus&&ae.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!0,message:!0})):window.__CHAT_GLOBAL__.setServiceDownStatus&&ae.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!1,closed:!1,list:!1,message:!1}))}(n),[400,404].includes(e),[491,493].includes(e)?le(e,t):401===e?((0,O.removeItem)("mini-session"),(0,O.removeItem)("mini-sc_redirect"),"login"===o&&le(e,t)):le(e,t)}},de=function(e){var t=e.uri,r=e.id,n=e.parentId;if(void 0!==r&&parseInt(r)<=0&&!t.includes("message_shortcuts/group")||void 0!==n&&parseInt(n)<=0)throw new Error},pe=function(e,t,r){throw e||(t.offlineError=!0),t};function _e(e){return Se.apply(this,arguments)}function Se(){return Se=K(regeneratorRuntime.mark((function e(t){var r,n,o,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=K(regeneratorRuntime.mark((function e(){var t,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.read();case 2:if(t=e.sent,i=t.done,a=t.value,!i){e.next=7;break}return e.abrupt("return",JSON.parse(o.join("")));case 7:return u=n.decode(a,{stream:!0}),o.push(u),e.abrupt("return",c());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(){return i.apply(this,arguments)},r=t.getReader(),n=new TextDecoder,o=[],e.abrupt("return",c());case 6:case"end":return e.stop()}}),e)}))),Se.apply(this,arguments)}var ve,he,Ee=r(782),ge=r(830),be=r.n(ge),me=r(292),Oe=r.n(me),Re={"18a6f08d7326025b60ded61f60c9ea20":"LOAD_HTML","0d2968a6996a60fee2db1270a70ef563":"LOAD_STATIC",ea02fc90bd3663f3179be7a1b7847a83:"APP_PREPARE","4e0b71ed91b3eacb1dfc4ec7f63b2966":"LOGIN_API","9d4a48b69fed6d1001e63ee668a05488":"LOGIN_SUCCEEDED","84fcedc144bfce212ae8db9f6ebb84ec":"SHOW_WEBCHAT"},Te={"94a2f272c378ddf18f5c88f4e951c709":"SHOW_HOME_PAGE",a5707a9d6695fc50e257b51aee9ec03b:"LOAD_RESOURCE",dd25761ed961c46f4a0725abf6325b3a:"RENDER_HOME_PAGE","65d0f06861e011436277b54e32e0e702":"SEND_MESSAGE_API",b2bad090fbb5b6eb526af0423326ba91:"SEND_MESSAGE_CONSUMING","00f7d4cb0b968ed35a91ae83c0346fe1":"FETCH_CONV_API",b7b04ad90caccf19961c3dcdf7063294:"FETCH_MESSAGE_API","7ce993bd22dee11001514ad2b8e760bf":"RENDER_MESSAGE_LIST_FROM_CONV"};ve={LOAD_HTML:"31b7f223943eee895738ce50e49a359a",LOAD_STATIC:"0ec7c5189cc4ada79908cfe5d6bd97ca",APP_PREPARE:"a61675f22b23600e51007c24a9b8aaf2",LOGIN_API:"75cbf76696b4f8d988de72cdfeb1877c",LOGIN_SUCCEEDED:"05c0e68ee42384c7e07e47fec4400e28",SHOW_WEBCHAT:"1b16553696a08e9f016235005a5a0678",SHOW_HOME_PAGE:"94a2f272c378ddf18f5c88f4e951c709",VIDEO_UPLOAD:"334a26e8a6dc82c95a47430f8af2e198",SERVICE_DONE:"19f2ea17be2d1d80257667787e54c882",MESSAGE_SOCKET:"f76ebd29ea3ed4571c9ea48ca893ac14",READ_SOCKET:"37e5b36437f0166056d3312fcea2b592",LOGIN_FAILED:"df8a83f83c949bb6a2b84c6f0048e203",SOCKET_FAILED:"13ddf42d9169b2ce05feb84224d79057",SHARED_TABS:"94e8d83005c95982268ff1c8b036313e",LOGIN_IN_HTML:"4075993c600862e7c604e35cd692a297",LOGIN_IN_SERVICE:"2845ad2751849e3d43b26a805a25dbb4",PRE_FETCH_USER_INFO:"36a82dac2154de34fa4c6d7e3da73a19",NON_PRE_FETCH_USER_INFO:"a9de236c14047b42eec108bf7f22f2ac",TRANSLATION_IN_HTML:"b3105979b5cc6448de8272e177db5741",TRANSLATION_IN_SERVICE:"acfba493a8c2d11ad323bc09c2d06603",CONVERSATION_MOUNTED:"53ddb086a61674f59a9d84e1a02f04a5",CONVERSATION_LOADED:"800c5562450216bccfad6cd11847c160",RECEIVE_CHATBOT_RESPONSE:"a6f37d623af1c31b5ae3eb333fc571c8",REPORT_T3:"b16720c32b08d2c2b4b9cebb66205520",REPORT_T4:"20749fffb5583f720b3eacf5013c4398",REPORT_ERROR:"ce4cc92284f6ed31f8266c8e676744c5",MESSAGE_LATENCY:"4cb5dab311e98cba8ecb48c5e3df9e12",LOAD_RESOURCE:"a5707a9d6695fc50e257b51aee9ec03b",RENDER_HOME_PAGE:"dd25761ed961c46f4a0725abf6325b3a",SEND_MESSAGE_API:"65d0f06861e011436277b54e32e0e702",SEND_MESSAGE_CONSUMING:"b2bad090fbb5b6eb526af0423326ba91",FETCH_CONV_API:"00f7d4cb0b968ed35a91ae83c0346fe1",FETCH_MESSAGE_API:"b7b04ad90caccf19961c3dcdf7063294",RENDER_MESSAGE_LIST_FROM_CONV:"7ce993bd22dee11001514ad2b8e760bf",FETCH_TRANSLATION_ASYNC:"961879cce46dc871cea546c825daf31d",FETCH_TRANSLATION_SYNC:"9f3d370e38d01f43e13f3e7465c1734c",RENDER_OLD_ENTRY:"34be4e989931224dfd8363a07ff0f896",RENDER_NEW_ENTRY:"99502b156aba4099d7e2fa2316f211cd",USER_SETTING:"6ec802950c6974b45c8a9080a70e7017",SEND_MESSAGES:"407610332f95a6a3bde8f720195f5a40"},he={LOAD_HTML:"18a6f08d7326025b60ded61f60c9ea20",LOAD_STATIC:"0d2968a6996a60fee2db1270a70ef563",APP_PREPARE:"ea02fc90bd3663f3179be7a1b7847a83",LOGIN_API:"4e0b71ed91b3eacb1dfc4ec7f63b2966",LOGIN_SUCCEEDED:"9d4a48b69fed6d1001e63ee668a05488",SHOW_WEBCHAT:"84fcedc144bfce212ae8db9f6ebb84ec",SHOW_HOME_PAGE:"94a2f272c378ddf18f5c88f4e951c709",VIDEO_UPLOAD:"cc0dbd7370b7ade934cfe7c01bbd4ae9",SERVICE_DONE:"26ba92fb54150fe3bd6f827bb08ce8c9",MESSAGE_SOCKET:"a01882e94fde5237ca815e13b0e2a88b",READ_SOCKET:"e46fdcb42cae43a7e6f49213f150fa8e",LOGIN_FAILED:"87df9f73fb8b93629ae8a08822cfcf77",SOCKET_FAILED:"3a74221d64cf853a5c3ca65c3c3339eb",SHARED_TABS:"22557ca0a2caca6bae43f1932f088d47",LOAD_RESOURCE:"a5707a9d6695fc50e257b51aee9ec03b",RENDER_HOME_PAGE:"dd25761ed961c46f4a0725abf6325b3a",SEND_MESSAGE_API:"65d0f06861e011436277b54e32e0e702",SEND_MESSAGE_CONSUMING:"b2bad090fbb5b6eb526af0423326ba91",FETCH_CONV_API:"00f7d4cb0b968ed35a91ae83c0346fe1",FETCH_MESSAGE_API:"b7b04ad90caccf19961c3dcdf7063294",RENDER_MESSAGE_LIST_FROM_CONV:"7ce993bd22dee11001514ad2b8e760bf",FETCH_TRANSLATION_ASYNC:"961879cce46dc871cea546c825daf31d",FETCH_TRANSLATION_SYNC:"9f3d370e38d01f43e13f3e7465c1734c"};var ye,Ae={HTML_LOADED:"HTML_LOADED",STATIC_LOADED:"STATIC_LOADED",APP_PREPARED:"APP_PREPARED",LOGIN_API_RESPONSED:"LOGIN_API_RESPONSED",APP_RENDERING:"APP_RENDERING",RENDER_CONVERSATION_LIST:"RENDER_CONVERSATION_LIST",RENDER_MESSAGE_LIST:"RENDER_MESSAGE_LIST",RENDER_WELCOME_PAGE:"RENDER_WELCOME_PAGE",START_SEND_MESSAGE:"START_SEND_MESSAGE",START_HANDLE_RESPONSE:"START_HANDLE_RESPONSE"},Ce={WELCOME_PAGE:"WELCOME_PAGE",MESSAGE_LIST:"MESSAGE_LIST",CONVERSATION_LIST:"CONVERSATION_LIST",APP:"APP"},we={TYPE_ERROR:"TypeError",RANGE_ERROR:"RangeError",SYNTAX_ERROR:"SyntaxError",REFERENCE_ERROR:"ReferenceError",SAGA_ERROR:"Saga Error",ERROR_BOUNDARY:"Error Boundary",PRELOAD_ERROR:"Preload Error",SOCKET_LOGIN_FAILED:"Socket Login Failed",LOGIN_ERROR:"Login Error",PARAMETER_ERROR:"Parameter Error",API_UNCAUGHT_ERROR:"Api Uncaught Error",API_CLIENT_ERROR:"Api Client Error",FETCH_CONV_ERROR:"Fetch Conversation Error",FETCH_SERVE_TODAY_CONV_ERROR:"Fetch Serve Today Conversation Error"},De={TYPE_ERROR:"type_error",RANGE_ERROR:"range_error",SYNTAX_ERROR:"syntax_error",REFERENCE_ERROR:"reference_error",ERROR_BOUNDARY:"error_boundary",PRELOAD_ERROR:"preload_error",SOCKET_LOGIN_FAILED:"socket_login_failed",LOGIN_ERROR:"login_error",PARAMETER_ERROR:"parameter_error",API_CLIENT_ERROR:"api_client_error",API_UNCAUGHT_ERROR:"api_uncaught_error",FETCH_CONV_ERROR:"fetch_conversation_error",FETCH_SERVE_TODAY_CONV_ERROR:"fetch_serve_today_conversation_error"},Pe=(we.TYPE_ERROR,we.RANGE_ERROR,we.SYNTAX_ERROR,we.REFERENCE_ERROR,De.TYPE_ERROR,De.RANGE_ERROR,De.SYNTAX_ERROR,De.REFERENCE_ERROR,function(){function t(){e(this,t)}return s(t,[{key:"reportLoadResource",value:function(){Ye(Ve.LOAD_RESOURCE,0)}},{key:"reportRenderHomePage",value:function(e){Ye(Ve.RENDER_HOME_PAGE,0,{isSidebar:e})}},{key:"reportShowHomePage",value:function(e){if(window.__MINICHAT_ENTRY_CLICKED__){var t=window.__MINICHAT_ENTRY_CLICKED__,r=t.startTime,n=t.fromPage,o=Date.now()-r;window.__MINICHAT_ENTRY_CLICKED__=void 0,e?setTimeout((function(){Ke(Ce.APP,{duration:o,id:Ve.SHOW_HOME_PAGE,extra:{isSidebar:e,fromPage:n}})}),1e3):Ke(Ce.APP,{duration:o,id:Ve.SHOW_HOME_PAGE,extra:{isSidebar:e,fromPage:n}})}}},{key:"reportWhetherPrefetchUserInfo",value:function(){window.__CHATEASY_LOCALE__?Ye(Ve.PRE_FETCH_USER_INFO,0):Ye(Ve.NON_PRE_FETCH_USER_INFO,0)}},{key:"reportShowMinichat",value:function(){var e=Date.now()-window.__START_MINICHAT__;Ke(Ce.APP,{duration:e,id:Ve.SHOW_WEBCHAT})}},{key:"reportFetchTranslationAsync",value:function(){Ye(Ve.FETCH_TRANSLATION_ASYNC,0)}},{key:"reportFetchTranslationSync",value:function(){Ye(Ve.FETCH_TRANSLATION_SYNC,0)}},{key:"reportUserSettingApi",value:function(e){Ve.USER_SETTING&&Ye(Ve.USER_SETTING,e)}},{key:"newReportSendMessagesApi",value:function(e){Ve.SEND_MESSAGES&&Ye(Ve.SEND_MESSAGES,e)}},{key:"reportSendMessageApi",value:function(e){Ye(Ve.SEND_MESSAGE_API,0,{value:e})}},{key:"reportSendMessageConsuming",value:function(e){var t,r,n=null===(t=(performance.getEntriesByName("".concat(Ae.START_SEND_MESSAGE,"_").concat(null===(r=JSON.parse(e).content)||void 0===r?void 0:r.uid),"mark")||[])[0])||void 0===t?void 0:t.startTime,o=Date.now()-Math.round(performance.timeOrigin+n);Ke(Ce.APP,{duration:o,id:Ve.SEND_MESSAGE_CONSUMING})}},{key:"reportFetchConvApi",value:function(e){var t=e.value,r=e.resource;Ye(Ve.FETCH_CONV_API,0,{value:t,resource:r})}},{key:"reportFetchMessageApi",value:function(e){Ye(Ve.FETCH_MESSAGE_API,0,{value:e})}},{key:"reportRenderMessageListFromConv",value:function(e){window.__CLICK_CONV__&&(Ke(Ce.APP,{duration:Date.now()-window.__CLICK_CONV__,id:Ve.RENDER_MESSAGE_LIST_FROM_CONV,extra:{isFirstRender:e}}),window.__CLICK_CONV__=null)}},{key:"reportVideoUpload",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ye(Ve.VIDEO_UPLOAD,performance.now()-e,t)}},{key:"reportVideoServiceDone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=performance.getEntriesByName("REPORT_UPLOAD_".concat(e),"mark")[0];if(r){performance.mark("SERVICE_DONE_".concat(e));var n=performance.getEntriesByName("SERVICE_DONE_".concat(e))[0].startTime-r.startTime;performance.clearMarks("REPORT_UPLOAD_".concat(e)),performance.clearMarks("SERVICE_DONE_".concat(e)),Ye(Ve.SERVICE_DONE,n,t)}}},{key:"reportMessageSocket",value:function(e){var t=+new Date-+e;Ye(Ve.MESSAGE_SOCKET,t)}},{key:"reportReadSocket",value:function(e){Ye(Ve.READ_SOCKET,Date.now()-e)}},{key:"reportLoginFailed",value:function(e){Ye(Ve.LOGIN_FAILED,0,e)}},{key:"reportSocketFailed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ye(Ve.SOCKET_FAILED,0,e)}},{key:"reportSharedTabs",value:function(e){Ye(Ve.SHARED_TABS,e)}},{key:"reportLoginInHtml",value:function(){Ye(Ve.LOGIN_IN_HTML,0)}},{key:"reportLoginInService",value:function(){Ye(Ve.LOGIN_IN_SERVICE,0)}},{key:"reportFetchTranslationInHtml",value:function(){Ye(Ve.TRANSLATION_IN_HTML,0)}},{key:"reportFetchTranslationInService",value:function(){Ye(Ve.TRANSLATION_IN_SERVICE,0)}},{key:"reportT3OrT4",value:function(e){Ye(e,0)}},{key:"reportChatbotApiError",value:function(){Ye(Ve.REPORT_ERROR,0)}},{key:"reportAsyncTask",value:function(e,t){Ye(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}},{key:"reportReceiveChatbotResponse",value:function(){Ye(Ve.RECEIVE_CHATBOT_RESPONSE,0)}}]),t}()),Ne=function(){return window.chatReportManager||(window.chatReportManager=new Pe),window.chatReportManager};function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Le,ke,Me,xe,je=function(e){ye=e},He=!1,Fe=location.host.includes("shopee.cn"),Ge=[],Be=window.requestIdleCallback,Ve="live"===(0,O.getRuntimeServer)()?ve:he,We=function(){try{var e=performance.getEntriesByName(Ae.HTML_LOADED,"mark")[0].startTime,t=performance.getEntriesByName(Ae.STATIC_LOADED,"mark")[0].startTime,r=performance.getEntriesByName(Ae.APP_PREPARED,"mark")[0].startTime,n=performance.getEntriesByName(Ae.LOGIN_API_RESPONSED,"mark")[0].startTime,o=performance.getEntriesByName(Ae.APP_RENDERING,"mark")[0].startTime;Ge.push({id:Ve.LOAD_HTML,duration:window.__INDEX_HTML_LOADED__},{id:Ve.LOAD_STATIC,duration:Math.floor(t-e)},{id:Ve.APP_PREPARE,duration:Math.floor(r-t)},{id:Ve.LOGIN_API,duration:Math.floor(n-r)},{id:Ve.LOGIN_SUCCEEDED,duration:Math.floor(o-n)})}catch(e){}},ze=function(){try{var e=performance.getEntriesByName("ENTRY_CLICKED","mark")[0].startTime,t=performance.getEntriesByName("CONVERSATION_LIST_MOUNTED","mark")[0].startTime,r=performance.getEntriesByName("CONVERSATION_LIST_MOUNTED","mark")[0].startTime;Ve.CONVERSATION_MOUNTED&&e&&t&&Ge.push({id:Ve.CONVERSATION_MOUNTED,duration:Math.floor(t-e)}),Ve.CONVERSATION_LOADED&&t&&r&&Ge.push({id:Ve.CONVERSATION_LOADED,duration:Math.floor(r-t)})}catch(e){}},Ke=function(e,t){try{var r,n=null,o=null===(r=performance.getEntriesByName(Ae.APP_RENDERING,"mark")[0])||void 0===r?void 0:r.startTime;switch(e){case Ce.WELCOME_PAGE:n=performance.getEntriesByName(Ae.RENDER_WELCOME_PAGE,"mark")[0].startTime,Ge.push({id:Ve.RENDER_WELCOME_PAGE,duration:Math.floor(n-o)});break;case Ce.MESSAGE_LIST:n=performance.getEntriesByName(Ae.RENDER_MESSAGE_LIST,"mark")[0].startTime,Ge.push({id:Ve.RENDER_MESSAGE_LIST,duration:Math.floor(n-o)});break;case Ce.CONVERSATION_LIST:n=performance.getEntriesByName(Ae.RENDER_CONVERSATION_LIST,"mark")[0].startTime,Ge.push({id:Ve.RENDER_CONVERSATION_LIST,duration:Math.floor(n-o)})}Ge.push(t),Be(qe,{timeout:2e3})}catch(e){}},Ye=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{Ge.push({id:e,duration:t,extra:r}),Be(qe,{timeout:2e3})}catch(e){}};function qe(e){for(;(e.timeRemaining()>5||e.didTimeout)&&Ge.length;){var t=Ge.shift(),r=t.id,n=t.duration,o=t.extra;r&&Xe(r,n,o),"live"!==(0,O.getRuntimeServer)()&&Re[r]&&console.log("|-- 上报阶段: ",Re[r],", 耗时为: ".concat(n),", 数据: ",o),Te[r]&&console.log("|-- 新加上报点上报阶段: ",Te[r],", 耗时为: ".concat(n,", 数据："),o)}Ge.length&&Be(qe,{timeout:2e3})}var Qe,Je=function(){if(!He){var e=(0,O.getRuntimeServer)(),t="live"===e,r=(0,O.getRuntimeRegion)(),n=(0,O.getRuntimeVersion)();Le=new Ee.MdapSdk({app_name:"minichat",secret_key:t?"b23651c629e54c7bc1c9a743f25dbb5825cb1ed4e7bb7f8a78cd788dfc769127":"2b74d02be173856bde260473166da16b83fcc18d18057ce8b4a73eab5f1c7280",environment:e,region:r,app_version:n,sample:.6}),ke=new(be())({path:[/[\\/]webchat[\\/]api[\\/].*[\\/](login|(conversations[\\/](\d+)[\\/]messages)|conversations|orders_by_buyer_id|vouchers|products|items|(offer[\\/]given)|read|(video[\\/](in_whitelist|preupload|report_upload|upload_status)))[\\?]/,"/webchat/api/v1.2/messages","webchat/api/v1.2/mini/messages",/[\\/]api[\\/]tsp[\\/].*/]}),Me=new(Oe())({path:[/.*[\\/]chateasy[\\/].*\.(js|css)/]}),xe=new Ee.CustomPlugin({}),Le.use(ke),Le.use(Me),Le.use(xe),He=!0}};function Xe(e,t,r){He||Je();var n={point_id:e,data:{userType:ye,localOrCn:void 0!==Qe?Qe:Qe=Fe&&"CN"!==(0,O.getRuntimeRegion)().toUpperCase()?"cn":"local",chatHost:"pcmall",hasSandbox:String(!!window.__MMF_MODULE_BY_SANDBOX__)}};t&&(n=Ue(Ue({},n),{},{duration:t})),r&&(n.data=Ue(Ue({},n.data),r)),xe.sendData(n)}function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var et=(0,O.getRuntimeVersion)(),tt=function(){var e=K(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null;try{t=O.LS.getItem("mini-session",!0)}catch(e){t=null}if(t){e.next=8;break}return e.next=7,(0,O.getItem)("mini-session");case 7:t=e.sent;case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt={404:"Resource not found",452:"Tempory Error",500:"Internal server error",502:"Bad Gateway"},nt=90309999;function ot(e){return ct.apply(this,arguments)}function ct(){return ct=K(regeneratorRuntime.mark((function e(t){var r,n,o,c,i,a,u,s,l,f,d,p,_,S,v,h,E,g,b,m,R,T,y,A,C,w,D,P,N;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.server,o=t.subServer,c=t.version,i=void 0===c?"v1.2":c,a=t.parent,u=t.parentId,s=t.resource,l=t.id,f=t.suffix,d=t.method,p=void 0===d?"GET":d,_=t.credentials,S=void 0===_?"include":_,v=t.extension,h=t.params,E=void 0===h?{}:h,g=t.payload,b=t.headers,m=void 0===b?{}:b,R=t.namespace,T=void 0===R?"mini":R,y=t.fetcher,A=function(){if("sc"===f)return l;if("auth"===s)return u;if(E.shop_id)return E.shop_id;if(g)try{return JSON.parse(g).shop_id}catch(e){}},C=function(e,t){var r,n=t.session,o=t.shouldAddHeader,c=t.region,i=t.spcToken,a=null==n||null===(r=n.user)||void 0===r?void 0:r.uid;a&&(e._uid=a),et&&(e._v=et);var u=q().get("CTOKEN");u&&(e.csrf_token=u),i&&(e.SPC_CDS_CHAT=i),o&&(e["x-shop-region"]=c),e._api_source="pcmall"},w=function(e,t){return[e,Object.entries(t).filter((function(e){var t=W(e,2),r=(t[0],t[1]);return r||0===r})).map((function(e){var t=W(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&")].filter(Boolean).join("?")},D=function(){var e=q().get("SPC_CDS_CHAT");if(!e){e=(0,Q.v4)();var t=window.location.host.split(".");["seller","banhang"].includes(t[0])&&t.shift(),q().set("SPC_CDS_CHAT",e,{domain:".".concat(t.join("."))})}return e},P=function(){var e=K(regeneratorRuntime.mark((function e(t){var c,d,_,h,b,R,P,N,I,U,L,k,M,x,j,H,F,B,V,W,z,K,Y,q,Q,J;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,tt();case 3:t=e.sent;case 4:if(d=(c=t||{}).token,_=c.user,h=(_=void 0===_?{}:_).type,b=0,"subaccount"!==h){e.next=15;break}return I=A(),e.next=12,Z.getRegion(!0,I);case 12:N=e.sent,e.next=16;break;case 15:N=(0,O.getRuntimeRegion)().toUpperCase();case 16:return L=(U=d&&"include"===S||!n)?{Authorization:"Bearer ".concat(d),"x-shop-region":N}:{},!n&&(n=(0,O.getApiServer)()),k=D(),r?(P=r,M={},k&&(M.SPC_CDS_CHAT=k),P=w(P,M)):(x=["https:/",n,o,i,T,a,u,s,l,f].filter(Boolean).join("/"),j=v?"".concat(x,".").concat(v):x,C(E,{session:t,shouldAddHeader:U,region:N,spcToken:k}),P=w(j,E)),e.prev=21,de({uri:P,id:l,parentId:u}),H=Date.now(),F={method:p,credentials:S,headers:Ze(Ze({},L),m),body:g},B=y||ce,e.next=28,B(P,F);case 28:if(V=e.sent,b="number"==typeof V.status?V.status:V.__raw.status,y&&200===b&&g&&(null==(W=Ne())||W.reportSendMessageConsuming(g)),y?V.error===nt?le(b=499,{message:"need captcha",errcode:b,data:null}):b=V.__raw.status:b=V.status,[200,204].includes(b)&&"report_upload"===s&&g&&(z=JSON.parse(g),K=z.vid,performance.mark("REPORT_UPLOAD_".concat(K))),se(b),200!==b){e.next=50;break}return Y=null,e.prev=36,e.next=39,V.json();case 39:Y=e.sent,e.next=45;break;case 42:e.prev=42,e.t0=e.catch(36),Y=V;case 45:return q=Y instanceof Array?G({},s,Y):Y,y&&g&&(R=JSON.parse(g).request_id,(0,O.setItem)(R,H)),e.abrupt("return",q);case 50:if(204!==b){e.next=54;break}return e.abrupt("return",null);case 54:e.t1=b,e.next=404===e.t1||452===e.t1||500===e.t1||502===e.t1?57:59;break;case 57:return Q={message:rt[b]},e.abrupt("break",74);case 59:if(!y){e.next=71;break}return e.prev=60,e.next=63,_e(null==V||null===(J=V.__raw)||void 0===J?void 0:J.body);case 63:Q=e.sent,e.next=69;break;case 66:e.prev=66,e.t2=e.catch(60),Q={message:"Server Error"};case 69:e.next=74;break;case 71:return e.next=73,V.json();case 73:Q=e.sent;case 74:fe(b,Q,{uri:P,resource:s});case 75:e.next=80;break;case 77:e.prev=77,e.t3=e.catch(21),pe(b,e.t3);case 80:case"end":return e.stop()}}),e,null,[[21,77],[36,42],[60,66]])})));return function(t){return e.apply(this,arguments)}}(),N=window.__WEBCHAT_SESSION__,e.abrupt("return",P(N));case 8:case"end":return e.stop()}}),e)}))),ct.apply(this,arguments)}var it=null,at=function(e){e&&(it=e)},ut=null,st=function(e){var t=e.data,r=e.operation,n=void 0===r?O.TrackerOperation.CLICK:r,o=e.page,c=e.shopId,i=e.section,a=void 0===i?"":i,u=e.type,s=void 0===u?"":u;try{ut||(ut=window.BITrack?window.BITrack:window.trackingSDK);var l=function(e){var t=e.data,r=e.operation,n=e.page,o=e.shopId,c=e.section,i=e.type,a=it||{},u=a.shop_id,s=void 0===u?"":u,l=a.role,f=void 0===l?"":l,d=a.id,p=void 0===d?"":d;return{operation:r,page_section:c,target_type:i,page_type:n||"minichat_page",data:Object.assign({},{shopid:s||o,account_type:f||"shopee_user",account_id:p},t)}}({data:t,operation:n,page:o,shopId:c,section:a,type:s});ut({data:{type:"v3",timestamp:Date.now(),info:l}})}catch(e){console.warn("Tracker error",e)}},lt=new(r(187).EventEmitter),ft=r(383);function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _t,St=function(e,t,r){return new ft.schema.Entity(e,pt({},t),pt({},r))},vt=St("users"),ht=St("affiliate"),Et=St("messages"),gt=St("conversations"),bt=St("orders"),mt=St("products"),Ot=St("offers"),Rt=St("stickers"),Tt=St("shops"),yt=St("messageShortcuts"),At=St("rateCards"),Ct=St("agentConversations"),wt=St("contacts",{},{idAttribute:"account_id"}),Dt=St("vouchers"),Pt={users:vt,affiliate:ht,messages:Et,conversations:gt,orders:bt,offers:Ot,products:mt,stickers:Rt,shops:Tt,messageShortcuts:yt,rateCards:At,agentConversations:Ct,contacts:wt,vouchers:Dt},Nt=function(e,t){var r=Pt[e]||St(e);return t instanceof Array?(0,ft.normalize)(t,[r]):(0,ft.normalize)(t,r)},It=r(944),Ut=regeneratorRuntime.mark(jt),Lt=[];_t=[202,215];var kt="https://seller.shopee.sg/api/tsp";"br"===(0,O.getRuntimeRegion)()&&(kt="https://seller.shopee.com.br/api/tsp"),"live"!==(0,O.getRuntimeServer)()&&(kt+="/nonlive");var Mt=function(e,t){var r=_t.includes(e)?"c":"r",n=(t||"").toLocaleLowerCase(),o="".concat((0,O.getCDNUrl)(),"shopee-seller-live-sg/tsp/api/").concat(r,"_").concat(e,"_").concat(n,".json");return re()(o).then(function(){var e=K(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},xt=function(e){var t="".concat(kt,"/init?language=").concat(e,"&collections=202%3B215");return re()(t).then(function(){var e=K(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))};function jt(e){var t,r,n,o,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.locale,r={},i.next=4,(0,It.call)(xt,t);case 4:if(n=i.sent,o=null==n?void 0:n.translations,(0,O.checkEmptyObject)(o)||(0,O.checkEmptyObject)(o.collection)||Object.keys(o.collection).forEach((function(e){r=Object.assign(r,o.collection[e])})),!(0,O.checkEmptyObject)(r)){i.next=14;break}return c=[],_t.concat(Lt).forEach((function(e){c.push(Mt(e,t))})),i.next=12,(0,It.all)(c);case 12:i.sent.forEach((function(e){Object.assign(r,e)}));case 14:return i.abrupt("return",r);case 15:case"end":return i.stop()}}),Ut)}}(),_}())},96961:function(e,t,r){"use strict";e.exports=r(27449)},55698:function(e,t,r){var n,o,c,i,a;e.exports=(n=r(82677),o=r(20573),c=r(29494),i=r(53402),a=r(96961),function(){"use strict";var e={383:function(e){e.exports=n},975:function(e){e.exports=o},511:function(e){e.exports=i},644:function(e){e.exports=a},855:function(e){e.exports=c}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,r),c.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}function n(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,c=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return c}}(e,r)||t(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(r){return function(t){if(Array.isArray(t))return e(t)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||t(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.r(u),r.d(u,{activeListTabSelector:function(){return S},allConversationIdsSelector:function(){return W},allTotalConversationsCountMapSelector:function(){return dt},allTotalConversationsCountSelector:function(){return ft},assistantHighlightSelector:function(){return b},autoRepliedHighlightConvIdSelector:function(){return O},autoRepliedHighlightSelector:function(){return E},autoTranslationStatusSelector:function(){return wt},bannerInfoSelector:function(){return Z},bizIdSelector:function(){return Re},bizIdsSelector:function(){return Ae},changeChatWithTypeSelector:function(){return Te},chatWithIhsSelector:function(){return oe},chatWithTypeListSelector:function(){return ye},chatWithTypeSelector:function(){return J},chatbotConversationIdSelector:function(){return h},chatbotConversationSelector:function(){return H},conversationBeenDeletedSelector:function(){return Ze},conversationDirectionSelector:function(){return se},conversationHttpStatusSelector:function(){return ue},conversationIdsSelector:function(){return B},conversationLastMessageSelector:function(){return Yt},conversationsSelector:function(){return le},curConvsMessageSelector:function(){return rr},curMessagesRelatedSelector:function(){return zt},currentAffiliateSelector:function(){return ze},currentBuyerIdSelector:function(){return Ce},currentBuyerSelector:function(){return We},currentBuyerShopIdSelector:function(){return Ke},currentBuyerShopSelector:function(){return Ye},currentConversationBuyerIdSelectors:function(){return Me},currentConversationCanReadSelector:function(){return ae},currentConversationHasLoadingSelector:function(){return Et},currentConversationIdSelector:function(){return Q},currentConversationMaxOptionHideTimeSelectors:function(){return je},currentConversationSelector:function(){return be},currentConversationShopIdSelectors:function(){return Le},currentConversationShopNameSelectors:function(){return Ue},currentConversationShopRegionSelectors:function(){return Ie},currentConversationShopSelectors:function(){return Ne},currentConversationStatusSelectors:function(){return xe},currentConversationToNameSelector:function(){return et},currentConversationTranslationAccessSelector:function(){return Xe},currentPendingOffersCountSelector:function(){return it},currentSellerAccountIdSelector:function(){return st},currentShopIdSelector:function(){return Ve},currentShopIsManagedByShopeeSelector:function(){return ke},defaultCount:function(){return lt},degradeConversationIdsSelector:function(){return Se},feedbackSelector:function(){return ur},filterSelector:function(){return ve},filteredConversationsSelector:function(){return he},getConversation:function(){return He},getConversationBizId:function(){return Fe},getConversationPendingOffersCountSelector:function(){return at},getConversationShopId:function(){return Ge},getConversationShopRegion:function(){return ut},getConversations:function(){return Be},getConversationsSelector:function(){return k},getConvsMessagesRelatedSelector:function(){return Kt},getMessageSelector:function(){return Wt},hasPinFlagSelector:function(){return A},ihcsEntitySelector:function(){return ee},ihsDisableTextSelector:function(){return ie},inlocationSelector:function(){return Y},isAffiliateChatRoomSelector:function(){return Pe},isBuyerChatRoomSelector:function(){return we},isChatAvailiableSelector:function(){return $},isDriverSelector:function(){return X},isNavigateToUnreadMessageSelector:function(){return nt},isOfficialChatSelector:function(){return me},keywordSelector:function(){return qe},lastBuyerSendMessageIdSelector:function(){return ir},listsHashSelector:function(){return $e},mediaListSelector:function(){return ar},messagesRelatedMapSelector:function(){return Ft},missedReadNoticeCountSelector:function(){return K},navigateToUnreadMessageIdSelector:function(){return ot},noticesCountSelector:function(){return lr},pinnedConversationIdsSelector:function(){return V},readRequestIdsSelector:function(){return z},reconnectFlagSelector:function(){return sr},redirectionInfoSelector:function(){return gt},replyToMessageSelector:function(){return cr},resultsSelector:function(){return Qe},reverseMessagesSelector:function(){return $t},rrButtonSelector:function(){return Ot},searchConversationHttpStatusSelector:function(){return Je},selectVideoInfoByKey:function(){return Bt},selectVideoInfoKeyByVid:function(){return Vt},serveTodayAllConversationIdsSelector:function(){return L},serveTodayAutoRepliedConversationIdsSelector:function(){return I},serveTodayAutoRepliedConversationsSelector:function(){return x},serveTodayConversationHttpStatusSelector:function(){return C},serveTodayConversationsSelector:function(){return F},serveTodayFolderStatusSelector:function(){return v},serveTodayManuallyRepliedConversationIdsSelector:function(){return U},serveTodayManuallyRepliedConversationsSelector:function(){return j},serveTodayOnlyConversationsSelector:function(){return G},serveTodayPinnedConversationIdsSelector:function(){return P},serveTodayUnrepliedConversationIdsSelector:function(){return N},serveTodayUnrepliedConversationsSelector:function(){return M},serveTodayWaitingUpdatedRecordsSelector:function(){return y},shopAccessSelector:function(){return rt},shopIsIhcsSelector:function(){return te},showAssistantAlertSelector:function(){return R},showAssistantHighlightSelector:function(){return Ct},showAutoReplyHighlightSelector:function(){return yt},showChatbotConversationSelector:function(){return ge},showFrozenTipSelector:function(){return vt},showLoadingMessagesMapSelector:function(){return ht},showOnboardingAnimationSelector:function(){return Tt},showOnboardingAnimationStatusSelector:function(){return T},showUnrepliedHighlightSelector:function(){return At},showWorkStationSelector:function(){return De},singleConversationIdsSelector:function(){return D},singleConversationMarkInfoSelector:function(){return St},singleConversationStateSelector:function(){return w},sortedConversationsSelector:function(){return Ee},subAccountBizIdSelector:function(){return Oe},subAccountToIsIhcsSelector:function(){return ce},toShopIsIhcsSelector:function(){return re},toShopisChoiceOrIsIhcsSelector:function(){return mt},toUserChattingWithIhsSelector:function(){return ne},totalConversationsCountSelector:function(){return pt},twoTabsAllConversationIdsSelector:function(){return bt},unrepliedHighlightSelector:function(){return g},unrepliedHightlightConvIdSelector:function(){return m},updateTimeNowSelector:function(){return q}});var c=r(383),i=r(975),a=r(855),s=r(511),l=r(644);function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.serveToday)||{}},S=(0,i.createSelector)(_,(function(e){return e.activeListTab})),v=(0,i.createSelector)(_,(function(e){return e.folderStatus})),h=(0,i.createSelector)(_,(function(e){return e.chatbotConversationId||0})),E=(0,i.createSelector)(_,(function(e){var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.autoRepliedHighlightStatus)||!1})),g=(0,i.createSelector)(_,(function(e){var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.unrepliedHighlightStatus)||!1})),b=(0,i.createSelector)(_,(function(e){var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.assistantHighlightStatus)||!1})),m=(0,i.createSelector)(_,(function(e){var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.unrepliedHighlightConvId)||0})),O=(0,i.createSelector)(_,(function(e){var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.autoRepliedHighlightConvId)||0})),R=(0,i.createSelector)(_,s.chatbotToggleOpenSelector,s.onboardingWhitelistSelector,(function(e,t,r){var n;return t&&r||(null===(n=e.highlightStatus)||void 0===n?void 0:n.showAssistantAlert)})),T=(0,i.createSelector)(_,(function(e){var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.showOnboardingAnimationStatus)||!1})),y=(0,i.createSelector)(_,(function(e){return e.waitingUpdatedRecords||{}})),A=(0,i.createSelector)(_,(function(e){return e.hasPinFlag||!1})),C=(0,i.createSelector)(_,(function(e){return e.status||""})),w=function(e){return(0,i.createSelector)(_,(function(t){return t[e]||{}}))},D=function(e){return(0,i.createSelector)(w(e),(function(e){return Array.from(new Set(e.conversationIds||[]))}))},P=(0,i.createSelector)(_,(function(e){return Array.from(new Set((e[a.ServeTodayTab.PINNED]||{}).conversationIds||[]))})),N=(0,i.createSelector)(_,(function(e){return Array.from(new Set((e[a.ServeTodayTab.UNREPLIED]||{}).conversationIds||[]))})),I=(0,i.createSelector)(_,(function(e){return Array.from(new Set((e[a.ServeTodayTab.AUTOREPLY]||{}).conversationIds||[]))})),U=(0,i.createSelector)(_,(function(e){return Array.from(new Set((e[a.ServeTodayTab.MANUALREPLY]||{}).conversationIds||[]))})),L=(0,i.createSelector)(P,N,I,U,(function(e,t,r,n){return[].concat(o(e),o(t),o(r),o(n))})),k=function(e){return(0,i.createSelector)(s.conversationEntitiesSelector,D(e),(function(e,t){return((0,c.denormalize)(t,[l.conversationSchema],{conversations:e})||[]).filter(Boolean)}))},M=(0,i.createSelector)(k(a.ServeTodayTab.UNREPLIED),(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})),e})),x=(0,i.createSelector)(k(a.ServeTodayTab.AUTOREPLY),(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))})),j=(0,i.createSelector)(k(a.ServeTodayTab.MANUALREPLY),(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))})),H=(0,i.createSelector)(s.conversationEntitiesSelector,h,(function(e,t){return(0,c.denormalize)(t,l.conversationSchema,{conversations:e})||{}})),F=(0,i.createSelector)(H,v,k(a.ServeTodayTab.PINNED),M,x,j,s.showChatServingFeatureSelector,s.chatbotToggleOpenSelector,(function(e,t,r,n,c,i,u,s){var l,d=[],_=(f(l={},a.ServeTodayTab.PINNED,r),f(l,a.ServeTodayTab.UNREPLIED,n),f(l,a.ServeTodayTab.AUTOREPLY,c),f(l,a.ServeTodayTab.MANUALREPLY,i),l),S=r.map((function(e){return e.id}))||[];return(s?a.ServeTodayFolders:a.ServeTodayFolders.filter((function(e){return e!==a.ServeTodayTab.AUTOREPLY}))).forEach((function(e){var r=_[e];e!==a.ServeTodayTab.PINNED&&(r=r.filter((function(e){return!S.includes(e.id)})),e===a.ServeTodayTab.AUTOREPLY&&(r=r.map((function(e){return p(p({},e),{},{isAutoReply:!0})})))),r.length&&(d=t[e]?d.concat([{key:e,id:"".concat(e,"Tab")}].concat(o(r))):d.concat([{key:e,id:"".concat(e,"Tab")}]))})),null!=e&&e.id?[e].concat(o(d)):d})),G=(0,i.createSelector)(F,(function(e){return e.filter((function(e){return!e.id.includes("Tab")}))})),B=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.conversationIds)||[]},V=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.pinnedConversationIds)||[]},W=(0,i.createSelector)(B,V,(function(e,t){var r=e.filter((function(e){return!t.includes(e)}));return t.concat(r)})),z=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.readRequestIds)||[]},K=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.missedReadNoticeCount)||0},Y=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.inlocation)||!1},q=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.updateTimeNow)||"0"},Q=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.currentConversationId)||null},J=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.chatWithType)||a.ChatWithTypeEnum.Buyer},X=(0,i.createSelector)(J,(function(e){return e===a.ChatWithTypeEnum.Driver})),$=function(e){var t;return null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.isChatAvailiable},Z=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.topBannerInfo)||{}},ee=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.ihcsEntity)||{}},te=(0,i.createSelector)(ee,(function(e){return e.shop_is_ihcs})),re=(0,i.createSelector)(ee,(function(e){return e.to_shop_is_ihcs})),ne=(0,i.createSelector)(ee,(function(e){return e.to_user_chatting_with_ihs})),oe=(0,i.createSelector)(te,ne,(function(e,t){return!e&&t})),ce=(0,i.createSelector)(s.isSubAccountSelector,re,(function(e,t){return e&&t})),ie=(0,i.createSelector)(te,oe,ce,(function(e,t,r){var n="";return e?n="conversation_detail.input_field.self_is_internal_shop":r?n="conversation_detail.input_field.subaccount_chat_with_internal_shop":t&&(n="conversation_detail.input_field.user_chat_with_ihs"),n})),ae=function(e){var t;return(0,s.judgeUndefined)({defaultValue:!0,value:null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.currentConversationCanRead})},ue=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.status)||""},se=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.direction)||""},le=(0,i.createSelector)(s.conversationEntitiesSelector,W,(function(e,t){return((0,c.denormalize)(t,[l.conversationSchema],{conversations:e})||[]).filter(Boolean)})),fe=(0,i.createSelector)(le,Q,(function(e,t){return e.filter((function(e){var r=e.id,n=e.unread_count;return e&&(n>0||r===t)}))})),de=(0,i.createSelector)(le,(function(e){return e.filter((function(e){return e.isPinned}))})),pe=(0,i.createSelector)(le,(function(e){return e.filter((function(e){return e.status&&"closed"===e.status}))})),_e=(0,i.createSelector)(le,Q,(function(e,t){return e.filter((function(e){var r=e.unreplied,n=e.id;return void 0===r||r||!r&&n===t}))})),Se=(0,i.createSelector)(le,(function(e){return e.filter((function(e){return e.lack})).map((function(e){return e.id}))||[]})),ve=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.filter)||"All"},he=(0,i.createSelector)(ve,le,fe,de,pe,_e,(function(e,t,r,n,o,c){return{All:t,Unread:r,Pinned:n,Closed:o,Unreplied:c}[e]})),Ee=(0,i.createSelector)(he,V,s.waitingTimeFilterSelector,ve,(function(e,t,r,n){var o=e.filter((function(e){return!t.includes(e.id)})),c=e.filter((function(e){return t.includes(e.id)}));return o.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})),c.concat(o).filter((function(e){return void 0===e.faking&&(null==e?void 0:e.biz_id)!==a.BizIdEnum.Chatbot}))})),ge=(0,i.createSelector)(Q,H,(function(e,t){return(null==t?void 0:t.id)&&e===(null==t?void 0:t.id)})),be=(0,i.createSelector)(le,F,Q,s.isSubAccountSelector,Y,s.userEntitiesSelector,s.conversationEntitiesSelector,s.showServingTabSelector,ge,H,(function(e,t,r,n,i,a,u,s,f,d){if(f)return d;var p=(s?[].concat(o(e),o(t)):e).find((function(e){return e.id===r}))||{};if(i&&!p.id&&(p=(0,c.denormalize)(r,l.conversationSchema,{conversations:u})||{}),!n&&p.lack){var _=p.to_id,S=(0,c.denormalize)(_,l.userSchema,{users:a})||{},v={to_shop_id:S.shop_id,to_status:S.status,to_name:S.name||"-",to_avatar:S.avatar};return Object.assign(p,v)}return p})),me=(0,i.createSelector)(be,(function(e){var t;return(null==e||null===(t=e.official_chat)||void 0===t?void 0:t.official_conv_type)===a.OfficialConvType.OFFICIAL_CREDIT||!1})),Oe=(0,i.createSelector)(s.conversationEntitiesSelector,Q,(function(e,t){var r=(0,c.denormalize)(t,l.conversationSchema,{conversations:e});return(null==r?void 0:r.biz_id)||a.BizIdEnum.SubAccount})),Re=(0,i.createSelector)(J,s.sellerDriverWhitelistSelector,s.amsFeatureToggleSelector,s.isSubAccountSelector,Oe,(function(e,t,r,n,o){return n?o:!t&&e===a.ChatWithTypeEnum.Driver||!r&&a.ChatWithTypeEnum.Affiliate?a.ChatWithTypeMap.buyer:a.ChatWithTypeMap[e]||a.BizIdEnum.Buyer})),Te=(0,i.createSelector)(J,Re,(function(e,t){return a.ChatWithTypeMap[e]!==t})),ye=(0,i.createSelector)(s.sellerDriverWhitelistSelector,s.amsFeatureToggleSelector,(function(e,t){var r=[a.ChatWithTypeEnum.Buyer];return e&&r.push(a.ChatWithTypeEnum.Driver),t&&r.push(a.ChatWithTypeEnum.Affiliate),r})),Ae=(0,i.createSelector)(ye,(function(e){return e.map((function(e){return a.ChatWithTypeMap[e]}))})),Ce=(0,i.createSelector)(be,(function(e){return(e||{}).to_id||null})),we=(0,i.createSelector)(s.isSubAccountSelector,J,Oe,me,(function(e,t,r,n){return(!e&&t===a.ChatWithTypeEnum.Buyer||e&&r===a.BizIdEnum.SubAccount)&&!n})),De=(0,i.createSelector)(X,we,me,(function(e,t,r){return e||t&&!r})),Pe=(0,i.createSelector)(s.isSubAccountSelector,J,Oe,(function(e,t,r){return e?a.subAccountAffiliateBiz.includes(r):t===a.ChatWithTypeEnum.Affiliate})),Ne=(0,i.createSelector)(be,s.shopsEntitiesSelector,(function(e,t){return(0,c.denormalize)(e.shop_id,l.shopSchema,{shops:t})||{}})),Ie=(0,i.createSelector)(Ne,(function(e){return(null==e?void 0:e.country)||"SG"})),Ue=(0,i.createSelector)(Ne,(function(e){return(null==e?void 0:e.name)||"SG"})),Le=(0,i.createSelector)(be,(function(e){return e.shop_id})),ke=(0,i.createSelector)(Le,Ne,(function(e,t){return e&&(null==t?void 0:t.managed_by_shopee)||!1})),Me=(0,i.createSelector)(be,(function(e){return e.to_id})),xe=(0,i.createSelector)(be,(function(e){return e.status})),je=(0,i.createSelector)(be,(function(e){return e.max_general_option_hide_time})),He=function(e){return(0,i.createSelector)(s.conversationEntitiesSelector,(function(t){return(0,c.denormalize)(e,l.conversationSchema,{conversations:t})||{}}))},Fe=function(e){return(0,i.createSelector)(He(e),s.isSubAccountSelector,Re,(function(e,t,r){return t?null==e?void 0:e.biz_id:r}))},Ge=function(e){return(0,i.createSelector)(He(e),(function(e){return e.shop_id}))},Be=function(e){return(0,i.createSelector)(le,F,s.showServingTabSelector,(function(t,r,n){var c=n?[].concat(o(t),o(r)):t;return e.map((function(e){return c.find((function(t){return t.id===e}))})).filter(Boolean)}))},Ve=(0,i.createSelector)(be,(function(e){return(e||{}).shop_id||null})),We=(0,i.createSelector)(s.userEntitiesSelector,be,(function(e,t){return t?(0,c.denormalize)(t.to_id,l.userSchema,{users:e}):{}})),ze=(0,i.createSelector)(s.affiliateEntitiesSelector,be,(function(e,t){return t?(0,c.denormalize)(t.to_id,l.affiliateSchema,{affiliate:e}):{}})),Ke=(0,i.createSelector)(be,(function(e){return(e||{}).to_shop_id||null})),Ye=(0,i.createSelector)(Ke,s.shopsEntitiesSelector,(function(e,t){return(0,c.denormalize)(e,l.shopSchema,{shops:t})||{}})),qe=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.keyword)||""},Qe=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.results)||[]},Je=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.searchStatus)||""},Xe=(0,i.createSelector)(be,(function(e){return e.translationAccess})),$e=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.listsHash)||{}},Ze=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.conversationBeenDeleted)||!1},et=(0,i.createSelector)(be,(function(e){return(e||{}).to_name})),tt={hasSCAccess:!0,hasEditOrderAccess:!0,hasViewOrderAccess:!0,hasViewProductAccess:!0,hasEditVoucherAccess:!0,hasViewVoucherAccess:!0,hasViewRrOrderAccess:!0,hasOrderDetailAccess:!0},rt=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.access)||tt},nt=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.isNavigateToUnreadMessage)||!1},ot=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.navigateToUnreadMessageId)||""},ct=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.pendingOffersCount)||{}},it=(0,i.createSelector)(be,ct,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0})),at=function(e){return(0,i.createSelector)(He(e),ct,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0}))},ut=function(e){return(0,i.createSelector)(Ge(e),s.shopsEntitiesSelector,(function(e,t){var r=(0,c.denormalize)(e,l.shopSchema,{shops:t})||{};return(null==r?void 0:r.country)||"SG"}))},st=(0,i.createSelector)(s.isSubAccountSelector,s.currentUserIdSelector,Ne,(function(e,t,r){return e?r.user_id:t})),lt={unrepliedCount:0,duesoonCount:0,overdueCount:0,pinnedCount:0,unreadCount:0,serveTodayUnrepliedCount:0,serveTodayDuesoonCount:0,serveTodayOverdueCount:0,serveTodayPinnedCount:0,serveTodayBotRepliedCount:0,serveTodayManualRepliedCount:0},ft=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.allTotalConversationsCount)||{}},dt=(0,i.createSelector)(ye,ft,(function(e,t){return e.reduce((function(e,r){var n,o,c=(null===(n=t["with_".concat(r,"_attribute")])||void 0===n?void 0:n.attributes)||{},i=(null===(o=t["with_".concat(r,"_attribute")])||void 0===o?void 0:o.serving_today_attributions)||{},a={unrepliedCount:c.total_unreplied_conv_count,duesoonCount:c.total_due_soon_conv_count,overdueCount:c.total_over_due_conv_count,pinnedCount:c.total_pinned_conv_count,unreadCount:c.total_unread_conv_count,serveTodayUnrepliedCount:i.total_unreplied_conv_count,serveTodayDuesoonCount:i.total_due_soon_conv_count,serveTodayOverdueCount:i.total_over_due_conv_count,serveTodayPinnedCount:i.total_pinned_conv_count,serveTodayBotRepliedCount:i.total_bot_replied_count,serveTodayManualRepliedCount:i.total_manual_replied_count,serveTodayUnreadCount:i.total_unread_conv_count};return e[r]=a||lt,e}),{})})),pt=(0,i.createSelector)(J,dt,(function(e,t){return t[e]||{}})),_t=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.conversationMark)||{}},St=function(e){return(0,i.createSelector)(_t,(function(t){return t[e]}))},vt=(0,i.createSelector)(s.shopTranslationSettingsSelector,s.isSubAccountSelector,Ve,s.currentUserShopIdSelector,(function(e,t,r,n){return"frozen"===(e[t?r:n]||{}).userStatus})),ht=function(e){var t;return null===(t=e.conversationReducer)||void 0===t?void 0:t.showLoadingMessagesMap},Et=(0,i.createSelector)(Q,ht,(function(e,t){var r,o,c=t&&t[e],i=Object.entries(c||{})||[],a=i.some((function(e){var t=n(e,2),r=(t[0],t[1]);return null==r?void 0:r.showLoading}));return i.forEach((function(e,t){var c=n(e,2),i=(c[0],c[1]),a=i.startTime;(0===t||a<r)&&(r=a,o=i.isSend)})),{hasLoading:a,isSend:o,earliestStartTime:r}})),gt=function(e){var t;return null===(t=e.conversationReducer)||void 0===t?void 0:t.redirectionInfo},bt=(0,i.createSelector)(s.showServingTabSelector,W,L,(function(e,t,r){return e?[].concat(o(t),o(r)):t})),mt=(0,i.createSelector)(be,s.isSubAccountSelector,re,(function(e,t,r){var n=(e||{}).choice_entity;return(n=void 0===n?{}:n).to_shop_is_choice||r&&!t})),Ot=function(e){var t;return null===(t=e.conversationReducer)||void 0===t?void 0:t.clickable},Rt=(0,i.createSelector)(s.chatbotToggleOpenSelector,s.onboardingNewbieCompleteSelector,s.onboardingWhitelistSelector,(function(e,t,r){return e&&!t&&r})),Tt=(0,i.createSelector)(s.chatbotToggleOpenSelector,s.onboardingNewbieCompleteSelector,ge,s.onboardingWhitelistSelector,T,(function(e,t,r,n,o){return(e||!e&&r)&&n&&!t&&o})),yt=(0,i.createSelector)(Rt,s.newbieSelector,Tt,b,O,(function(e,t,r,n,o){return e&&!!(0,a.checkAutoReplyHighlightGuide)(t)&&!r&&!n&&o})),At=(0,i.createSelector)(Rt,s.newbieSelector,Tt,b,O,m,g,(function(e,t,r,n,o,c,i){return e&&!!(0,a.checkAutoReplyHighlightGuide)(t)&&!r&&!n&&!o&&c||i})),Ct=(0,i.createSelector)(s.newbieSelector,Tt,b,s.chatbotToggleOpenSelector,(function(e,t,r,n){return!!(0,a.checkAssistantHighlightGuide)(e)&&!t&&r&&!n})),wt=function(e){return(0,i.createSelector)(s.shopTranslationSettingsSelector,Re,(function(t,r){var n=(t[e]||{}).autoTranslationStatus;return r===a.BizIdEnum.Buyer||r===a.BizIdEnum.SubAccount?n:a.SwitchStatus.ENABLED}))};function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nt,It=a.MessageTypes.MSG_TYPE_OFFER,Ut=a.MessageTypes.MSG_TYPE_ORDER,Lt=a.MessageTypes.MSG_TYPE_PRODUCT,kt=a.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED,Mt=a.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,xt=a.MessageTypes.MSG_TYPE_RATE_CARD,jt=a.MessageTypes.MSG_TYPE_FAQ_BOT_PRODUCT,Ht=[Ut,Lt,jt],Ft=(0,i.createSelector)((function(e){return e}),(function(e){return(e.messageReducer||{}).messagesRelatedMap||{}})),Gt=function(e){var t;return(null===(t=e.messageReducer)||void 0===t?void 0:t.videoMap)||{}},Bt=function(e){return(0,i.createSelector)(Gt,(function(t){return JSON.parse(JSON.stringify(t[e]||{}))}))},Vt=function(e){return(0,i.createSelector)(Gt,(function(t){return Object.keys(t).find((function(r){return t[r].vid===e}))}))},Wt=function(e){return(0,i.createSelector)(s.messageEntitiesSelector,(function(t){return(0,c.denormalize)(e,l.messageSchema,{messages:t})}))},zt=(0,i.createSelector)(Q,Ft,(function(e,t){return t[e]||{all:[]}})),Kt=function(e){return(0,i.createSelector)(Ft,(function(t){return t[e]||{all:[],sending:[],failed:[]}}))},Yt=(Nt=function(e){return(0,i.createSelector)(Kt(e),He(e),s.messageEntitiesSelector,(function(e,t,r){return(0,s.getConversationLastMessage)(e,t,r)}))},function(){var e=Array.prototype.slice.call(arguments);return Nt.memoize=Nt.memoize||{},e in Nt.memoize?Nt.memoize[e]:Nt.memoize[e]=Nt.apply(this,e)}),qt=(0,i.createSelector)(zt,(function(e){var t=o(e.all||[]);return e.securityTipsMessageId&&t.push(e.securityTipsMessageId),t})),Qt=(0,i.createSelector)(zt,(function(e){return e.sending||[]})),Jt=(0,i.createSelector)(zt,(function(e){return e.failed||[]})),Xt=(0,i.createSelector)(s.messageEntitiesSelector,qt,(function(e,t){return((0,c.denormalize)(t,[l.messageSchema],{messages:e})||[]).filter(Boolean)})),$t=(0,i.createSelector)(Xt,(function(e){return e.reverse()})),Zt=(0,i.createSelector)(be,$t,(function(e,t){return e?t.filter(Boolean).reduce((function(e,t){var r=t.type,n=t.source_type,o=t.source_content,c=t.content;if(!n||r===It||[-1,0].includes(o["".concat(n,"_id")]))return e;if(Ht.includes(r)&&o){var i="".concat(r,"_id");if(c[i]===o[i])return e}var a=e.lastSourceMessage,u=e.sourceList;if(!u.length)return{sourceList:u.concat(t),lastSourceMessage:t};if(n===Lt){var s=null==o?void 0:o.product_id,l=a.source_content&&a.source_content.product_id;if(!s||l===s)return e}else if(n===Ut){var f=null==o?void 0:o.order_id,d=a.source_content&&a.source_content.order_id;if(!f||[-1,0,d].includes(f))return e}return{sourceList:u.concat(t),lastSourceMessage:t}}),{sourceList:[],lastSourceMessage:null}).sourceList:[]})),er=(0,i.createSelector)(Zt,(function(e){return e.map((function(e){return e.id}))})),tr=(0,i.createSelector)(s.entitiesSelector,Xt,(function(e,t){var r=t.filter((function(e){return e&&e.type===It})).map((function(e){return e.content.offer_id}));return(0,c.denormalize)(r,[l.offerSchema],e)})),rr=(0,i.createSelector)($t,er,Qt,Jt,be,s.rateCardEntitiesSelector,tr,(function(e,t,r,n,o,c,i){return o?e.filter((function(e){if(!e)return!1;var t=e.content,r=e.type;return!(![kt,Mt].includes(r)&&(!t||t&&0===Object.keys(t).length))})).map((function(e){var o=r.includes(e.id)?a.MessageSendStatus.SENDING:n.includes(e.id)?a.MessageSendStatus.FAILED:e.send_status||null,u=t.includes(e.id),s=Object.assign({},e,{send_status:o,hasMessageSource:u}),l=s,f=l.type,d=l.content,p=void 0===d?{}:d,_=l.message_option;switch(f){case It:var S=i.find((function(e){return e&&e.id===p.offer_id}));s=Object.assign({},s,{textContent:S});break;case xt:var v=c[p.card_id];v&&(s=Object.assign({},s,{textContent:v}))}return(0,a.hasTargetMessageOption)(_,a.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(s=Pt(Pt({},s),{},{send_status:a.MessageSendStatus.FAILED,errorCode:a.MessageErrorCode.BLACKLIST})),s})):[]})),nr=(0,i.createSelector)((function(e){var t;return null==e||null===(t=e.messageReducer)||void 0===t?void 0:t.reply}),(function(e){return e?e.toMessageId:{}})),or=(0,i.createSelector)(Q,nr,(function(e,t){return t[e]||""})),cr=(0,i.createSelector)(or,s.messageEntitiesSelector,(function(e,t){return(0,c.denormalize)(e,l.messageSchema,{messages:t})})),ir=(0,i.createSelector)(rr,be,(function(e,t){for(var r="",n=e.length-1;n>=0;n--){var o=e[n];if(!(0,a.getMessageIsSend)(o,t)){r=o.id;break}}return r})),ar=(0,i.createSelector)(Q,(function(e){var t;return(null===(t=e.mediaPreviewerReducer)||void 0===t?void 0:t.mediaMap)||{}}),(function(e,t){return t[e]||[]})),ur=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.feedback)||void 0},sr=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.reconnectFlag)||!1},lr=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.noticesCount)||0}}(),u}())},66633:function(e,t,r){"use strict";e.exports=r(55698)},88377:function(e,t,r){var n,o,c,i,a,u,s,l,f,d;e.exports=(n=r(34857),o=r(20573),c=r(29494),i=r(96961),a=r(6678),u=r(82677),s=r(38104),l=r(58518),f=r(44900),d=r(36808),function(){"use strict";var e={701:function(e,t,r){r.d(t,{t:function(){return c}});var n=r(661),o=r.n(n),c=o().t.bind(o())},661:function(e){e.exports=l},598:function(e){e.exports=d},383:function(e){e.exports=u},252:function(e){e.exports=a},944:function(e){e.exports=n},975:function(e){e.exports=o},783:function(e){e.exports=s},644:function(e){e.exports=i},855:function(e){e.exports=c},672:function(e){e.exports=f}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,r),c.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var p={};return function(){r.r(p),r.d(p,{addNeedCaptchaRequest:function(){return lc},affiliateEntitiesSelector:function(){return a},agentConversationEntitiesSelector:function(){return s},allMessageShortcutGroupsSelector:function(){return Jn},amsFeatureToggleSelector:function(){return Se},authorizedShopsCountSelector:function(){return lt},autoTranslation:function(){return so},batchRemoveDraftHandler:function(){return Dt},batchUpdateRecord:function(){return F},botConfigSelector:function(){return Ie},botPermissionSelector:function(){return De},buyerIsFrozenSelector:function(){return mt},captchaSignatureSelector:function(){return Me},captchaVerifyReducer:function(){return mc},captchaVisibleSelector:function(){return ke},chatbotToggleOpenSelector:function(){return Oe},chatbotToggleSelector:function(){return ue},checkUserPermissionSaga:function(){return cn},checkUserPermissionSucceeded:function(){return rn},clearNeedCaptchaRequest:function(){return dc},clearReportRequested:function(){return Ko},contactsEntitiesSelector:function(){return g},conversationEntitiesSelector:function(){return u},conversationsLengthLevelSelector:function(){return b},copySucceedFeedback:function(){return wn},curTabFocusedSelector:function(){return rt},currentAllMessageShortcutsSelector:function(){return ro},currentGroupIdSelector:function(){return Qn},currentGroupTypeSelector:function(){return qn},currentMessageShortcutGroupsSelector:function(){return Zn},currentUserDistributionStatusSelector:function(){return et},currentUserIdSelector:function(){return Z},currentUserIsSellerSelector:function(){return dt},currentUserRoleSelector:function(){return Ze},currentUserSelector:function(){return Ge},currentUserShopIdSelector:function(){return Xe},currentUserShopSelector:function(){return $e},deepUpdateRecord:function(){return G},deleteCaptchaRequest:function(){return fc},deleteConfigDurationSelector:function(){return oe},deleteConfigSelector:function(){return Ue},deleteConversationSucceedHandler:function(){return yt},deleteRecord:function(){return H},disappearChatbotLoadingTimeSelector:function(){return de},displayCBCBannerSelector:function(){return _o},distributionAccountStatusSelector:function(){return po},draftHashSelector:function(){return Po},entitiesSelector:function(){return c},entityReducer:function(){return Y},fetchSettings:function(){return vo},fetchSettingsStatusSelector:function(){return Uo},fetchShopAuth:function(){return mn},fetchShopsByIds:function(){return bn},fetchedShopIdsSelector:function(){return Sn},forceLogoutRequested:function(){return wr},forwardGroupMembersSelector:function(){return R},forwardGroupsEntitiesSelector:function(){return O},getConversationLastMessage:function(){return qt},getDraft:function(){return No},getShopUnreadCountByIds:function(){return En},getTimestamp:function(){return Ht},getToastInformation:function(){return An},handle401ErrorRequested:function(){return Ro},handleLoginSucceededLogic:function(){return Mr},handleMessageSubscribe:function(){return Ut},hasDeletePermissionSelector:function(){return ne},hasFetchedUnreadSelector:function(){return ut},hasReplyPermissionSelector:function(){return re},hasSidebarPanelSelector:function(){return st},hasVerifyPhoneNumberNormalSellerSelector:function(){return pt},hasVerifyPhoneNumberSelector:function(){return St},hasVerifyPhoneNumberSubaccountSelector:function(){return _t},hasVideoPermissionSelector:function(){return te},hideBlockEntranceSelector:function(){return se},hideFeedbackSelector:function(){return ae},includeDirectShopSelector:function(){return Qe},isCBSellerSelector:function(){return Ke},isCBSubAccountSelector:function(){return Je},isMainPageSelector:function(){return tt},isSubAccountSelector:function(){return Ve},judgeUndefined:function(){return Ft},legacyMessageShortcutsCountSelector:function(){return fo},loadingSelector:function(){return $},localeSelector:function(){return Be},login:function(){return xr},loginRequested:function(){return Tr},loginSucceeded:function(){return yr},loginSuccessSelector:function(){return it},logout:function(){return sn},logoutHandler:function(){return un},logoutRequested:function(){return Ar},logoutSucceeded:function(){return Cr},messageEntitiesSelector:function(){return l},messageShortcutGroupEntitiesSelector:function(){return v},messageShortcutGroupHttpStatusSelector:function(){return Yn},messageShortcutGroupSelector:function(){return Kn},messageShortcutsSelector:function(){return oo},messageShortcutsStatusSelector:function(){return lo},messagesLengthLevelSelector:function(){return m},networkStatusSelector:function(){return ee},newChatEntranceSelector:function(){return We},newMessageFlagSelector:function(){return He},newbieSelector:function(){return je},notificationTypes:function(){return Qt},offerSelector:function(){return wo},offersSelector:function(){return Ao},onboardingNewbieCompleteSelector:function(){return Re},onboardingWhitelistSelector:function(){return Te},openMallUrl:function(){return go},openMallUrlSaga:function(){return mo},orderEntitiesSelector:function(){return d},personalMessageShortcutGroupsSelector:function(){return Xn},personalMessageShortcutsSelector:function(){return eo},productEntitiesSelector:function(){return _},productsSelector:function(){return Go},pureActionHandler:function(){return Mt},pureMergeActionHandler:function(){return xt},rateCardEntitiesSelector:function(){return h},rcmdWhitelistSelector:function(){return Ne},reduxReset:function(){return Do},relatedOfferIdsSelector:function(){return Co},removeSingleDraftHandler:function(){return wt},reportArraySelector:function(){return Bo},reportMessageApiTimer:function(){return Bt},reportReducer:function(){return oc},reportRequested:function(){return zo},resendMessagePayloadSelector:function(){return xe},resendNeedCaptchaRequest:function(){return pc},responseStatusSelector:function(){return Ae},saveDraftHandler:function(){return Pt},sellerBuyerSplitSelector:function(){return ye},sellerDriverWhitelistSelector:function(){return _e},senderFeedbackBotMsgSelector:function(){return we},serviceDownAlertSelector:function(){return ht},serviceDownClosedSelector:function(){return Et},serviceDownListSelector:function(){return gt},serviceDownMessageSelector:function(){return bt},setServiceDownStatus:function(){return Xr},setToastInformation:function(){return Dn},setToastInformationSaga:function(){return Un},settingsFetchStatusSelector:function(){return uo},settingsNeedForceUpdateSelectors:function(){return io},settingsSelector:function(){return co},settingsStatusSelector:function(){return ao},shopSelector:function(){return _n},shopStatisticsMapSelector:function(){return Ye},shopStatisticsSelector:function(){return qe},shopTranslationSettingsSelector:function(){return Io},shopsEntitiesSelector:function(){return E},shopsUnreadConversationCountSelector:function(){return q},showAutoHangupModalSelector:function(){return ft},showChatServingFeatureSelector:function(){return pe},showChatWindowSelector:function(){return ct},showChatbotLoadingTimeSelector:function(){return fe},showConversationDetailSelector:function(){return ot},showCrrDueSelector:function(){return ie},showCsatSubmitSelector:function(){return ve},showEntrySelector:function(){return at},showMsgStatusSelector:function(){return be},showOriginalMessagesMapSelector:function(){return Tc},showRecallBannerSelector:function(){return he},showReportSelector:function(){return le},showServingTabSelector:function(){return Pe},showServingTodayTabSelector:function(){return Ce},showShop:function(){return gn},showSourceBannerSelector:function(){return Ee},showTopBannerSelector:function(){return ge},sortConversations:function(){return jt},sortedAllMessageShortcutsSelector:function(){return no},stickerEntitiesSelector:function(){return f},subaccountHasUnrepliedPermissionSelector:function(){return Le},takeEveryWithCancel:function(){return Ac},teamMessageShortcutGroupsSelector:function(){return $n},teamMessageShortcutsSelector:function(){return to},textBoxHeightSelector:function(){return nt},textMaxInputLenghSelector:function(){return me},timerHandler:function(){return Xo},toastReducer:function(){return Vn},toastSelector:function(){return Tn},totalUnreadConversationsCountSelector:function(){return Q},unreadCountActions:function(){return J},updateChatEntryStatus:function(){return or},updateChatWindowStatus:function(){return tr},updateConversationDetailStatus:function(){return rr},updateConversationListsHash:function(){return To},updateCurTabFocused:function(){return Kr},updateCurTabFocusedSaga:function(){return qr},updateCurTabFocusedSucceeded:function(){return Yr},updateEntities:function(){return x},updateHasFetchedUnread:function(){return cr},updateHasSidebarPanel:function(){return ir},updateIsMainPage:function(){return zr},updateLoginSuccessStatus:function(){return nr},updateNetworkStatus:function(){return $t},updateOrReplaceAction:function(){return jo},updateRecord:function(){return j},updateShowAutoHangupModal:function(){return Zt},updateStatusSelector:function(){return Lo},updateUseNewChatEntrance:function(){return er},useNewChatEntranceSelector:function(){return ze},userEntitiesSelector:function(){return i},userReducer:function(){return pn},userSelector:function(){return Fe},verifyRequestsSelector:function(){return Rc},voucherEntitiesSelector:function(){return S},waitingTimeFilterSelector:function(){return ce},watchHandleUrlSagas:function(){return yo},watchLogin:function(){return jr},watchReportSagas:function(){return nc},watchTab:function(){return Qr},watchToastSagas:function(){return Bn},watchUserSagas:function(){return dn},watchVerifySagas:function(){return Oc}});var e=r(944),t=r(975),n=r(855),o=function(e){return e<=100?1:e<=500?2:e<=1e3?3:4},c=function(e){return e.entityReducer},i=(0,t.createSelector)(c,(function(e){return e.users})),a=(0,t.createSelector)(c,(function(e){return e.affiliate})),u=(0,t.createSelector)(c,(function(e){return e.conversations})),s=(0,t.createSelector)(c,(function(e){return e.agentConversations})),l=(0,t.createSelector)(c,(function(e){return function(e){return(0,n.checkEmptyObject)(e)?{}:e}(e.messages)})),f=(0,t.createSelector)(c,(function(e){return e.stickers})),d=(0,t.createSelector)(c,(function(e){return e.orders})),_=(0,t.createSelector)(c,(function(e){return e.products})),S=(0,t.createSelector)(c,(function(e){return e.vouchers})),v=(0,t.createSelector)(c,(function(e){return e.messageShortcutsGroups})),h=(0,t.createSelector)(c,(function(e){return e.rateCards})),E=(0,t.createSelector)(c,(function(e){return e.shops})),g=(0,t.createSelector)(c,(function(e){return e.contacts})),b=(0,t.createSelector)(u,s,(function(e,t){var r=Object.keys(e).length+Object.keys(t).length;return o(r)})),m=(0,t.createSelector)(l,(function(e){return o(Object.keys(e).length)})),O=(0,t.createSelector)(c,(function(e){return e.groups})),R=(0,t.createSelector)(c,(function(e){return e.groupMembers}));function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,c=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return c}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w,D=r(644);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.UPDATE_ENTITIES="UPDATE_ENTITIES",e.UPDATE_RECORD="UPDATE_RECORD",e.DELETE_RECORD="DELETE_RECORD",e.BATCH_UPDATE_RECORD="BATCH_UPDATE_RECORD",e.DEEP_UPDATE_RECORD="DEEP_UPDATE_RECORD"}(w||(w={}));var I,U,L=T({},w.UPDATE_ENTITIES,(function(e,t){var r=t.payload.entities;return Object.entries(r).reduce((function(e,t){var r=C(t,2),n=r[0],o=r[1];return"persist"!==n?("shops"===n&&D.shopService.updateShopMap(o),N(N({},e),{},T({},n,N(N({},e[n]),o)))):N(N({},e),{},T({},n,o))}),e)})),k=r(252),M=(0,k.createActions)((T(I={},w.UPDATE_ENTITIES,(function(e){return{entities:e.entities}})),T(I,w.UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),T(I,w.DELETE_RECORD,(function(e){return{name:e.name,id:e.id}})),T(I,w.BATCH_UPDATE_RECORD,(function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}})),T(I,w.DEEP_UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),I)),x=M.updateEntities,j=M.updateRecord,H=M.deleteRecord,F=M.batchUpdateRecord,G=M.deepUpdateRecord;function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=(T(U={},w.UPDATE_RECORD,(function(e,t){var r=t.payload,n=r.name,o=r.id,c=r.record;return V(V({},e),{},T({},n,V(V({},e[n]),{},T({},o,V(V({},e[n][o]),c)))))})),T(U,w.DELETE_RECORD,(function(e,t){var r=t.payload,n=r.name,o=r.id,c=e[n];return delete c[o],V(V({},e),{},T({},n,c))})),T(U,w.BATCH_UPDATE_RECORD,(function(e,t){var r=t.payload,n=r.name,o=r.records,c=r.checkProp,i=V({},e[n]);return Object.keys(o).forEach((function(e){(!c||c&&o[e][c]>i[e][c])&&(i[e]=V(V({},i[e]),o[e]))})),V(V({},e),{},T({},n,i))})),T(U,w.DEEP_UPDATE_RECORD,(function(e,t){var r=t.payload,n=r.name,o=r.id,c=r.record,i=Object.keys(c),a={},u=V({},e[n][o]);return i.forEach((function(e){a[e]=V(V({},u[e]),c[e])})),V(V({},e),{},T({},n,V(V({},e[n]),{},T({},o,V(V({},e[n][o]),a)))))})),U);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y=(0,k.handleActions)(K(K({},L),W),{users:{},affiliate:{},messages:{},conversations:{},agentConversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},persist:null,vouchers:{},messageShortcuts:{}}),q=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.shopsUnreadConversationCount)||0},Q=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.totalUnreadConversationsCount)||0},J={MARK_AS_READ:"markAsRead",MARK_AS_UNREAD:"markASUnread",CLOSE_CONVERSATION:"closeConversation",DELETE_CONVERSATION:"deleteConversation",FORWARD_CONVERSATION:"forwardConversation",RECEIVE_UNREADABLE_MESSAGE:"receiveUnreadableMessage",REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT:"refreshTotalUnreadConversationCount",REFRESH_SHOPS_UNREAD_CONVERSATIONS_COUNT:"refreshShopsUnreadConversationsCount",REFRESH_SINGLE_SHOP_UNREAD_CONVERSATION_COUNT:"refreshSingleShopUnreadConversationCount",UPDATE_CONVERSATION:"updateConversation",MESSAGE_QUEUE_UPDATE:"messageQueueUpdate",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_CLOSE:"mass_close",ACTIVE_CONVERSATION:"activeConversation",CLEAR_CONVERSATION_COUNT:"clearConversationCount"},X=r(383),$=function(e){return e.userReducer.loading},Z=function(e){return e.userReducer.currentUserId},ee=function(e){return e.userReducer.networkStatus},te=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hasVideoPermission)||!1},re=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hasReplyPermission)||!1},ne=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hasDeletePermission)||!1},oe=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.deleteConfigDuration)||0},ce=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.waitingTimeFilter)||!1},ie=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showCrrDue)||!1},ae=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hideFeedback)||!1},ue=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.chatbotToggle)||0},se=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hideBlockEntrance)||!1},le=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showReport)||!1},fe=function(e){var t;return null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showChatbotLoadingTime},de=function(e){var t;return null==e||null===(t=e.userReducer)||void 0===t?void 0:t.disappearChatbotLoadingTime},pe=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showChatServingFeature)||!1},_e=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.sellerDriverWhitelist)||!1},Se=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.amsFeatureToggle)||!1},ve=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showCsatSubmit)||!1},he=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showRecallBanner)||!1},Ee=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showSourceBanner)||!1},ge=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showTopBanner)||!1},be=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.msgStatus)||!1},me=function(e){var t;return null==e||null===(t=e.userReducer)||void 0===t?void 0:t.textMaxInputLengh},Oe=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.chatbotToggleOpen)||!1},Re=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.onboardingNewbieComplete)||!1},Te=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.onboardingWhitelist)||!1},ye=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.sellerBuyerSplit)||!1},Ae=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.responseStatus)||!1},Ce=(0,t.createSelector)(pe,Te,(function(e,t){return e||t})),we=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.senderFeedbackBotMsg)||!1},De=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.senderFeedbackReason)||{}},Pe=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showServingTab)||!1},Ne=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.rcmdWhitelist)||!1},Ie=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.botConfig)||{}},Ue=function(e){var t=(null==e?void 0:e.userReducer)||{},r=t.hasDeletePermission,n=void 0!==r&&r,o=t.deleteConfigVersion,c=void 0===o?0:o,i=t.deleteConfigDuration;return{hasDeletePermission:n,deleteConfigVersion:c,deleteConfigDuration:void 0===i?0:i}},Le=function(e){return e.userReducer.subaccountHasUnrepliedPermission},ke=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.captchaVisible)||!1},Me=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.captchaSignature)||""},xe=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.resendMessagePayload)||void 0},je=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.newbie)||[]},He=function(e){return e.userReducer.newMessageFlag},Fe=function(e){return(0,t.createSelector)(c,(function(t){return(0,X.denormalize)(e,D.userSchema,{users:t})}))},Ge=(0,t.createSelector)(i,Z,(function(e,t){return(0,X.denormalize)(t,D.userSchema,{users:e})||{}})),Be=(0,t.createSelector)(Ge,(function(e){return e&&e.locale})),Ve=(0,t.createSelector)(Ge,(function(e){return!(0,n.checkEmptyObject)(e)&&e.type===n.AccountType.SUBACCOUNT})),We=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.useNewChatEntrance)||!1},ze=(0,t.createSelector)(Ve,We,(function(e,t){return!e&&t})),Ke=(0,t.createSelector)(Ge,(function(e){return!(0,n.checkEmptyObject)(e)&&e.is_cb})),Ye=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.shopStatisticsMap)||{}},qe=function(e,r){return(0,t.createSelector)(Ye,(function(t){return t["".concat(e,"-").concat(r)]||{}}))},Qe=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.includesDirectShop)||!1},Je=(0,t.createSelector)(Ve,Ke,Qe,(function(e,t,r){return e&&(t||r)})),Xe=(0,t.createSelector)(Ge,Ve,(function(){return(arguments.length>1?arguments[1]:void 0)?void 0:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shop_id})),$e=(0,t.createSelector)(Ge,Ve,E,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;return(arguments.length>1?arguments[1]:void 0)?void 0:(0,X.denormalize)(e.shop_id,D.shopSchema,{shops:t})||{}})),Ze=(0,t.createSelector)(Ge,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).role||""})),et=(0,t.createSelector)(Ge,(function(e){return e&&e.distribution_status||""})),tt=function(e){return e.userReducer.isMainPage},rt=function(e){return e.userReducer.curTabFocused},nt=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.textBoxHeight)||0},ot=function(e){return e.userReducer.showConversationDetail},ct=function(e){return e.userReducer.showChatWindow},it=function(e){return e.userReducer.loginSuccess},at=function(e){return e.userReducer.showEntry},ut=function(e){return e.userReducer.hasFetchedUnread},st=function(e){return e.userReducer.hasSidebarPanel},lt=(0,t.createSelector)(Ge,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).authorizedShopsCount||0})),ft=function(e){return e.userReducer.showAutoHangupModal},dt=(0,t.createSelector)(Ge,Ve,(function(){return!!(arguments.length>1?arguments[1]:void 0)||(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).is_seller})),pt=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.hasVerifyPhoneNumber)||!1},_t=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.hasVerifyPhoneNumberMap)||{}},St=(0,t.createSelector)(Ve,pt,_t,(function(e,t,r){return e?r:t})),vt=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.serviceDownStatus)||{}},ht=(0,t.createSelector)(vt,(function(e){return e.alert||!1})),Et=(0,t.createSelector)(vt,(function(e){return e.closed||!1})),gt=(0,t.createSelector)(vt,(function(e){return e.list||!1})),bt=(0,t.createSelector)(vt,(function(e){return e.message||!1})),mt=function(e,r,n){return(0,t.createSelector)(qe(e,r),(function(e){return"frozen"===n&&"boolean"==typeof e.exist_pending_order&&!e.exist_pending_order}))};function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Tt=function(e,t){var r=new Set(t);return r.delete(e),Array.from(r)},yt=function(e,t){var r=t.payload.conversationId,n=Rt(Rt({},e.conversationIdsMap),{},T({},r,!1)),o=Tt(r,e.conversationIds),c=Tt(r,e.pinnedConversationIds),i=e.currentConversationId;return Rt(Rt({},e),{},{currentConversationId:i===r?null:i,conversationIds:o,pinnedConversationIds:c,conversationIdsMap:n})};function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wt=function(e,t){var r=t.payload.conversationId,n=Ct({},e.draftHash);return delete n[r],Ct(Ct({},e),{},{draftHash:n})},Dt=function(e,t){var r=t.payload.conversationIds,n=void 0===r?[]:r,o=Ct({},e.draftHash);return n.forEach((function(e){delete o[e]})),Ct(Ct({},e),{},{draftHash:o})},Pt=function(e,t){var r=t.payload,n=r.conversationId,o=r.draft,c=Ct({},e.draftHash);return c[n]=o,Ct(Ct({},e),{},{draftHash:c})},Nt=r(783),It=regeneratorRuntime.mark(Ut);function Ut(t){var r,o;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r=t.payload,o=t.type,c.next=3,(0,e.spawn)(Bt,r.request_id);case 3:if(o!==n.ConversationTypeEnum.Agent){c.next=8;break}return c.next=6,(0,e.put)((0,Nt.receiveAgentMessageRequested)({message:r}));case 6:c.next=10;break;case 8:return c.next=10,(0,e.put)((0,Nt.receiveMessageRequested)({message:r}));case 10:case"end":return c.stop()}}),It)}function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mt=function(){return function(e,t){var r=t.payload;return kt(kt({},e),r)}},xt=function(e){return function(t,r){var n=r.payload;return kt(kt({},t),{},T({},e,kt(kt({},t[e]),n)))}},jt=function(e){e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))},Ht=function(e,t){var r=e.last_message_time_nano,n=e.next_timestamp_nano;return t&&!n&&(n=t.next_message_time_nano),{nextTimestampNano:n,oldestTimestampNano:n,latestTimestampNano:r}},Ft=function(e){var t=e.defaultValue,r=e.value;return void 0===r?t:r},Gt=regeneratorRuntime.mark(Bt);function Bt(e){var t,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,n.getItem)(e);case 2:(t=o.sent)&&(null==(r=(0,D.getReportManager)())||r.reportMessageSocket(t),(0,n.removeItem)(e));case 4:case"end":return o.stop()}}),Gt)}var Vt,Wt,zt,Kt=r(701).t,Yt=n.MessageTypes.MSG_TYPE_TEXT,qt=function(e,t,r){var o=e.all||[],c=e.sending||[],i=e.failed||[],a=o.length,u=null;if(a){for(var s=0,l=null;s<a&&!l;){var f=e.all[s];(l=(0,X.denormalize)(f,D.messageSchema,{messages:r}))&&(l.type===n.MessageTypes.MSG_TYPE_SECURITY_TIPS||l.isFaking)&&(l=null),s++}l&&l.created_timestamp>Math.floor(t.last_message_time_nano/Math.pow(10,9))&&(u=(0,n.fillMessagePreview)(l))}if(!u){var d=t.latest_message_id,p=t.latest_message_content,_=t.latest_message_type,S=t.last_message_option,v=t.latest_message_source,h=t.last_message_time_nano;(u={id:d,content:p,type:_,message_option:S,source:v,to_shop_id:t.latest_message_to_shop_id,label_info:t.label_info}).created_at=new Date(h/1e6)+""}var E=u,g=E.id,b=E.message_option,m=c.includes(g)?n.MessageSendStatus.SENDING:i.includes(g)?n.MessageSendStatus.FAILED:u.send_status?n.MessageSendStatus.SUCCEED:null;return(0,n.hasTargetMessageOption)(b,n.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(m=n.MessageSendStatus.FAILED,u.type=Yt,u.content={text:Kt("common.blacklist.replaced_text")}),(0,n.hasTargetMessageOption)(b,n.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)&&(m=n.MessageSendStatus.FAILED),u.send_status=m,u},Qt={MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",DELETE_CONVERSATION:"delete_conversation",UPDATE_OFFER_STATUS:"update_offer_status",UPDATE_CONVERSATION:"update_conversation",UPDATE_USER_STATUS:"update_user_status",UPDATE_CONVERSATION_FLAG:"update_conversation_flag",FORCE_LOGOUT:"force_logout",UPDATE_RATING_CARD_STATUS:"update_rating_card_status",PULL_NOTIFICATION:"pull_notification",PIN_CONVERSATION:"pin_conversation",UNPIN_CONVERSATION:"unpin_conversation",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_PIN:"mass_pin",MASS_UNPIN:"mass_unpin",MASS_CLOSE:"mass_close",MASS_ACTIVATE:"mass_activate",VIDEO_UPLOAD:"video_upload",MARK_AS_REPLIED:"mark_as_replied",MARK_AS_UNREPLIED:"mark_as_unreplied",CHAT_DELETE_MSG:"chat_delete_msg",FAQ_SESSION_UPDATE:"faq_session_update",MUTE_CONVERSATION:"mute_conversation",UNMUTE_CONVERSATION:"unmute_conversation",CTT_UPDATE:"ctt_update",HAVE_UNRATED_CSAT:"have_unrated_csat",FAQ_SELLER_UNREAD_STATUS_UPDATE:"faq_seller_unread_status_update",CHAT_UPDATE_MSG_STATUS:"chat_update_msg_status",NEW_MSG_BOX:"new_msg_box",DEL_MSG_BOX:"del_msg_box"};!function(e){e.SHOW_LOADING_SUCCEEDED="SHOW_LOADING_SUCCEEDED",e.SET_HAS_SESSION="SET_HAS_SESSION",e.UPDATE_NETWORK_STATUS="UPDATE_NETWORK_STATUS",e.UPDATE_CUR_TAB_FOCUSED="UPDATE_CUR_TAB_FOCUSED",e.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED="UPDATE_CUR_TAB_FOCUSED_SUCCEEDED",e.UPDATE_WORKSTATION_PANEL="UPDATE_WORKSTATION_PANEL",e.UPDATE_NEW_MESSAGE_FLAG="UPDATE_NEW_MESSAGE_FLAG",e.UPDATE_CHAT_WINDOW_STATUS="UPDATE_CHAT_WINDOW_STATUS",e.UPDATE_CONVERSATION_DETAIL_STATUS="UPDATE_CONVERSATION_DETAIL_STATUS",e.UPDATE_LOGIN_SUCCESS_STATUS="UPDATE_LOGIN_SUCCESS_STATUS",e.UPDATE_CHAT_ENTRY_STATUS="UPDATE_CHAT_ENTRY_STATUS",e.LOGIN_REQUESTED="LOGIN_REQUESTED",e.LOGIN_SUCCEEDED="LOGIN_SUCCEEDED",e.LOGOUT_REQUESTED="LOGOUT_REQUESTED",e.LOGOUT_SUCCEEDED="LOGOUT_SUCCEEDED",e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.SHOW_TRANSLATION_GUIDE="SHOW_TRANSLATION_GUIDE",e.SHOW_REGION_FILTER_GUIDE="SHOW_REGION_FILTER_GUIDE",e.FORCE_LOGOUT_REQUESTED="FORCE_LOGOUT_REQUESTED",e.CONNECT_SOCKET="CONNECT_SOCKET",e.UPLOAD_FEEDBACK_VIDEO_REQUESTED="UPLOAD_FEEDBACK_VIDEO_REQUESTED",e.UPLOAD_FEEDBACK_VIDEO_STATUS="UPLOAD_FEEDBACK_VIDEO_STATUS",e.UPDATE_RELATED_CAPACITY="UPDATE_RELATED_CAPACITY",e.UPDATE_IS_MAIN_PAGE="UPDATE_IS_MAIN_PAGE",e.UPDATE_SHOW_AUTO_HANGUP_MODAL="UPDATE_SHOW_AUTO_HANGUP_MODAL",e.UPDATE_HAS_FETCHED_UNREAD="UPDATE_HAS_FETCHED_UNREAD",e.CHECK_USER_PERMISSION_SUCCEEDED="CHECK_USER_PERMISSION_SUCCEEDED",e.SET_SERVICE_DOWN_STATUS="SET_SERVICE_DOWN_STATUS",e.UPDATE_HAS_SIDEBAR_PANEL="UPDATE_HAS_SIDEBAR_PANEL",e.UPDATE_USE_NEW_CHAT_ENTRANCE="UPDATE_USE_NEW_CHAT_ENTRANCE"}(Vt||(Vt={}));var Jt,Xt=(0,k.createActions)((T(Wt={},Vt.UPDATE_NETWORK_STATUS,(function(e){return{networkStatus:e.networkStatus}})),T(Wt,Vt.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e){return{showAutoHangupModal:e.showAutoHangupModal}})),T(Wt,Vt.UPDATE_USE_NEW_CHAT_ENTRANCE,(function(e){return{useNewChatEntrance:e.useNewChatEntrance}})),T(Wt,Vt.UPDATE_CHAT_WINDOW_STATUS,(function(e){return{showChatWindow:e.showChatWindow}})),T(Wt,Vt.UPDATE_CONVERSATION_DETAIL_STATUS,(function(e){return{showConversationDetail:e.showConversationDetail}})),T(Wt,Vt.UPDATE_LOGIN_SUCCESS_STATUS,(function(e){return{loginSuccess:e.loginSuccess}})),T(Wt,Vt.UPDATE_CHAT_ENTRY_STATUS,(function(e){return{showEntry:e.showEntry}})),T(Wt,Vt.UPDATE_HAS_FETCHED_UNREAD,(function(e){return{hasFetchedUnread:e.hasFetchedUnread}})),T(Wt,Vt.UPDATE_HAS_SIDEBAR_PANEL,(function(e){return{hasSidebarPanel:e.hasSidebarPanel}})),Wt)),$t=Xt.updateNetworkStatus,Zt=Xt.updateShowAutoHangupModal,er=Xt.updateUseNewChatEntrance,tr=Xt.updateChatWindowStatus,rr=Xt.updateConversationDetailStatus,nr=Xt.updateLoginSuccessStatus,or=Xt.updateChatEntryStatus,cr=Xt.updateHasFetchedUnread,ir=Xt.updateHasSidebarPanel,ar=(T(zt={},Vt.UPDATE_NETWORK_STATUS,Mt()),T(zt,Vt.UPDATE_SHOW_AUTO_HANGUP_MODAL,Mt()),T(zt,Vt.UPDATE_USE_NEW_CHAT_ENTRANCE,Mt()),T(zt,Vt.UPDATE_CHAT_WINDOW_STATUS,Mt()),T(zt,Vt.UPDATE_CONVERSATION_DETAIL_STATUS,Mt()),T(zt,Vt.UPDATE_LOGIN_SUCCESS_STATUS,Mt()),T(zt,Vt.UPDATE_CHAT_ENTRY_STATUS,Mt()),T(zt,Vt.UPDATE_HAS_FETCHED_UNREAD,Mt()),T(zt,Vt.UPDATE_HAS_SIDEBAR_PANEL,Mt()),zt),ur=r(672),sr=r(598),lr=r.n(sr);!function(e){e[e.Disable=0]="Disable",e[e.Waiting=1]="Waiting",e[e.Up=2]="Up",e[e.Down=3]="Down"}(Jt||(Jt={}));var fr,dr,pr=function(e){var t=e.messageId,r=e.feedback,n=e.conversationId,o=e.tagIds,c=e.reasonIds,i=e.otherReasons,a=e.bizId;return new Promise((function(e,u){(0,D.fetch)({suffix:"feedback",resource:"messages",method:"POST",payload:JSON.stringify({msg_id:t,feedback:r,conversation_id:n,tag_ids:o,reason_ids:c,other_reason:i,biz_id:a})}).then((function(){e()})).catch((function(e){u(e)}))}))};function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vr=regeneratorRuntime.mark(Dr),hr=regeneratorRuntime.mark(Pr),Er=regeneratorRuntime.mark(Ir),gr=regeneratorRuntime.mark(kr),br=regeneratorRuntime.mark(Mr),mr=regeneratorRuntime.mark(xr),Or=regeneratorRuntime.mark(jr),Rr=(0,k.createActions)((T(fr={},Vt.LOGIN_REQUESTED,(function(){return{}})),T(fr,Vt.LOGIN_SUCCEEDED,(function(e){return{currentUserId:e.currentUserId,status:e.status}})),T(fr,Vt.LOGOUT_REQUESTED,(function(){return{}})),T(fr,Vt.LOGOUT_SUCCEEDED,(function(){return{}})),T(fr,Vt.FORCE_LOGOUT_REQUESTED,(function(){return{}})),fr)),Tr=Rr.loginRequested,yr=Rr.loginSucceeded,Ar=Rr.logoutRequested,Cr=Rr.logoutSucceeded,wr=Rr.forceLogoutRequested;function Dr(){var t,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=(0,n.getTranslationLocale)((0,n.getRuntimeLocale)()),o.next=3,(0,e.call)(D.getTranslation,{locale:t});case 3:return r=o.sent,o.next=6,(0,e.call)(n.changeLanguage,t,r);case 6:case"end":return o.stop()}}),vr)}function Pr(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),hr)}var Nr=regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.call)(Dr);case 2:return t.next=4,(0,e.put)(or({showEntry:!0}));case 4:return t.next=6,(0,e.put)(nr({loginSuccess:!1}));case 6:null==(n=(0,D.getReportManager)())||n.reportLoginFailed({type:(o=r,o instanceof D.InternalServerError?"InternalServerError":o instanceof D.Forbidden?"Forbidden":o instanceof D.Unauthoried?"Unauthoried":"Other")});case 8:case"end":return t.stop()}var o}),t)}));function Ir(){var e,t,r,n,o,c,i,a,u,s,l;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:try{for(e=[],t=0,r=Object.entries(window.localStorage);t<r.length;t++)n=C(r[t],2),o=n[0],n[1],o.includes("MDAP_CONFIG_STORAGE_minichat_live_")&&(c=o.split("_")||[],i=c[c.length-1]||"",(a=i.split(".")||[]).length&&(u=a[0]?Number(a[0]):"",s=a[1]?Number(a[1]):"",l=a[2]?Number(a[2]):"",(u&&u<8||s&&s<5||5===s&&l&&l<6)&&e.push(o)));e.length&&e.forEach((function(e){window.localStorage.removeItem(e)}))}catch(e){console.log("删除MDAP发生错误")}case 2:case"end":return f.stop()}}),Er)}var Ur=function(e){var t,r,o=(0,D.getReportManager)(),c=window.__CHATEASY_TRANSLATION__;if(!(0,n.checkEmptyObject)(c)&&!(0,n.checkEmptyObject)(c.collection)){null==o||o.reportFetchTranslationInHtml();var i={};Object.keys(c.collection).forEach((function(e){i=Object.assign(i,c.collection[e])})),t=i,r=window.__CHATEASY_LOCALE__}return{resources:t,translationLocale:r}},Lr=regeneratorRuntime.mark((function t(r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,e.call)(D.getTranslation,{locale:r});case 3:o=t.sent,t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(0),t.next=10,(0,e.call)(D.getTranslation,{locale:(0,n.getTranslationLocale)((0,n.getRuntimeLocale)())});case 10:o=t.sent;case 11:if(!o){t.next=14;break}return t.next=14,(0,e.spawn)(n.setItem,"chat_translation",{resources:o,locale:r});case 14:return t.next=16,(0,e.call)(n.changeLanguage,r,o);case 16:return t.next=18,(0,e.call)(n.updateTimeLocale,r);case 18:case"end":return t.stop()}}),t,null,[[0,6]])}));function kr(t){var r,o,c,i,a,u,s,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Ur(),o=r.resources,c=r.translationLocale,i=(0,D.getReportManager)(),!o){t.next=11;break}return t.next=5,(0,e.call)(n.changeLanguage,c,o);case 5:return t.next=7,(0,e.call)(n.updateTimeLocale,c);case 7:return t.next=9,(0,e.spawn)(n.setItem,"chat_translation",{resources:o,locale:c});case 9:case 25:t.next=30;break;case 11:return a=(0,n.getMallTranslationLocale)(),null==i||i.reportFetchTranslationInService(),t.next=15,(0,e.call)(n.getItem,"chat_translation");case 15:if(u=t.sent,l=(s=u||{}).resources,f=s.locale,!l||f!==a){t.next=27;break}return null==i||i.reportFetchTranslationAsync(),t.next=21,(0,e.call)(n.changeLanguage,a,l);case 21:return t.next=23,(0,e.call)(n.updateTimeLocale,a);case 23:return t.next=25,(0,e.spawn)(Lr,a);case 27:return null==i||i.reportFetchTranslationSync(),t.next=30,(0,e.call)(Lr,a);case 30:case"end":return t.stop()}}),gr)}function Mr(t,r){var o,c,i,a,u,s,l,f,d,p;return regeneratorRuntime.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,o=r.godToken,c=t.user,i=t.show_chatbot_entrance,a=c.id,u=c.type,s=c.locale,l=c.distribution_status,f=u===n.AccountType.SUBACCOUNT,window.__WEBCHAT_LOGIN__||f&&"working"===l&&(window.__WEBCHAT_LOGIN__=!0),_.next=8,(0,e.call)(kr,s||"en");case 8:return performance.mark("APP_RENDERING"),(0,D.collectLoadTask)(),(0,D.mdapConfig)(u),(0,D.configTrackerUser)(c),_.next=14,(0,e.put)(er({useNewChatEntrance:i}));case 14:return _.next=16,(0,e.put)($t({networkStatus:"online"}));case 16:return window.addEventListener("online",(function(){ur.store.dispatch($t({networkStatus:"online"}))})),window.addEventListener("offline",(function(){ur.store.dispatch($t({networkStatus:"offline"}))})),window.addEventListener("message",(function(e){var t;if("captcha-modal"===(null===(t=e.data)||void 0===t?void 0:t.type)){var r,o,c,i;if(3===(null===(r=e.data)||void 0===r?void 0:r.status)){var a,u,s,l=null===(a=e.data)||void 0===a?void 0:a.AC_CERT_D;l&&(0,n.isVisitingCn)()&&lr().set("AC_CERT_D",l,{secure:!0,domain:"".concat(window.location.host),expires:new Date((new Date).getTime()+6e4)}),ur.store.dispatch(pc()),null===(u=(s=window).closeSFUCaptchaModal)||void 0===u||u.call(s)}1===(null===(o=e.data)||void 0===o?void 0:o.status)&&(ur.store.dispatch(fc()),null===(c=(i=window).closeSFUCaptchaModal)||void 0===c||c.call(i))}}),!1),_.next=21,(0,e.put)(nr({loginSuccess:!0}));case 21:return _.next=23,(0,e.put)(or({showEntry:!0}));case 23:return d=(0,D.normalize)("users",c),p=d.entities,_.next=26,(0,e.put)(x({entities:p}));case 26:return _.next=28,(0,n.setItem)("mini-session",t);case 28:return _.next=30,(0,e.put)(yr({currentUserId:a}));case 30:return _.next=32,(0,e.call)(cn);case 32:return _.next=34,(0,e.put)((0,Nt.emptyAction)());case 34:if(o){_.next=37;break}return _.next=37,(0,e.call)(Nt.startConnect);case 37:return _.next=39,(0,e.spawn)(Pr);case 39:if(f){_.next=42;break}return _.next=42,(0,e.call)(Nt.fetchShopSettings,{payload:{shopId:c.shop_id}});case 42:return _.next=44,(0,e.spawn)(Ir);case 44:window.addExternalGlobal("submitMessageFeedback",pr),_.next=51;break;case 47:return _.prev=47,_.t0=_.catch(0),_.next=51,(0,e.call)(Nr,_.t0);case 51:return _.prev=51,_.finish(51);case 53:case"end":return _.stop()}}),br,null,[[0,47,51,53]])}function xr(){var t,r,o,c,i,a,u;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,performance.mark("APP_PREPARED"),o={},c="",i=(0,D.getReportManager)(),!window.__WEBCHAT_SESSION__){s.next=10;break}null==i||i.reportLoginInHtml(),o=window.__WEBCHAT_SESSION__,s.next=19;break;case 10:return null==i||i.reportLoginInService(),a={method:"POST",subServer:"coreapi",resource:"login"},u=(0,n.isVisitingCNSC)()||(0,n.isVisitingKRSC)(),a.params={source:"pcmall"},u&&(a.parent="cbsc"),s.next=17,(0,e.call)(D.fetch,a);case 17:o=s.sent,window.__WEBCHAT_SESSION__=o;case 19:return performance.mark("LOGIN_API_RESPONSED"),n.LS.setItem("mini-session",JSON.stringify(o)),n.LS.setItem("chat-locale",JSON.stringify(null===(t=o)||void 0===t||null===(r=t.user)||void 0===r?void 0:r.locale)),s.abrupt("return",{session:o,params:{godToken:c}});case 25:return s.prev=25,s.t0=s.catch(0),s.next=29,(0,e.call)(Nr,s.t0);case 29:return s.prev=29,s.finish(29);case 31:case"end":return s.stop()}}),mr,null,[[0,25,29,31]])}function jr(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeLatest)(Tr,xr);case 2:return t.next=4,(0,e.takeLatest)(Ar,sn);case 4:return t.next=6,(0,e.takeLatest)(wr,un);case 6:case"end":return t.stop()}}),Or)}var Hr,Fr,Gr=(T(dr={},Vt.LOGIN_SUCCEEDED,Mt()),T(dr,Vt.LOGOUT_SUCCEEDED,(function(e){return Sr(Sr({},e),{},{currentUserId:null,performance:{},closeHangupTips:!1,hasVideoPermission:!1,captchaVisible:!1,curTabFocused:!0})})),dr),Br=regeneratorRuntime.mark(qr),Vr=regeneratorRuntime.mark(Qr),Wr=(0,k.createActions)((T(Hr={},Vt.UPDATE_IS_MAIN_PAGE,(function(e){return{isMainPage:e.isMainPage}})),T(Hr,Vt.UPDATE_CUR_TAB_FOCUSED,(function(e){return{focused:e.focused}})),T(Hr,Vt.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e){return{curTabFocused:e.curTabFocused}})),Hr)),zr=Wr.updateIsMainPage,Kr=Wr.updateCurTabFocused,Yr=Wr.updateCurTabFocusedSucceeded;function qr(t){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=t.payload.focused)){n.next=6;break}return n.next=4,(0,e.call)(Nt.tabFocused);case 4:return n.next=6,(0,e.put)(zr({isMainPage:!0}));case 6:return n.next=8,(0,e.put)(Yr({curTabFocused:r}));case 8:case"end":return n.stop()}}),Br)}function Qr(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Kr,qr);case 2:case"end":return t.stop()}}),Vr)}var Jr=(T(Fr={},Vt.UPDATE_IS_MAIN_PAGE,Mt()),T(Fr,Vt.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,Mt()),Fr),Xr=(0,k.createActions)(T({},Vt.SET_SERVICE_DOWN_STATUS,(function(e){return e}))).setServiceDownStatus;window.addExternalGlobal("setServiceDownStatus",Xr);var $r=T({},Vt.SET_SERVICE_DOWN_STATUS,xt("serviceDownStatus")),Zr=regeneratorRuntime.mark(cn);function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?en(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rn=(0,k.createActions)(T({},Vt.CHECK_USER_PERMISSION_SUCCEEDED,(function(e){return{hasVideoPermission:e.hasVideoPermission,hasReplyPermission:e.hasReplyPermission,hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion,waitingTimeFilter:e.waitingTimeFilter,subaccountHasUnrepliedPermission:e.subaccountHasUnrepliedPermission,showCrrDue:e.showCrrDue,hideFeedback:e.hideFeedback,chatbotToggle:e.chatbotToggle,showChatbotLoadingTime:e.showChatbotLoadingTime,disappearChatbotLoadingTime:e.disappearChatbotLoadingTime,showChatServingFeature:e.showChatServingFeature,sellerDriverWhitelist:e.sellerDriverWhitelist,amsFeatureToggle:e.amsFeatureToggle,hideBlockEntrance:e.hideBlockEntrance,showCsatSubmit:e.showCsatSubmit,showRecallBanner:e.showRecallBanner,showSourceBanner:e.showSourceBanner,showTopBanner:e.showTopBanner,msgStatus:e.msgStatus,textMaxInputLengh:e.textMaxInputLengh,showReport:e.showReport,chatbotToggleOpen:e.chatbotToggleOpen,onboardingNewbieComplete:e.onboardingNewbieComplete,onboardingWhitelist:e.onboardingWhitelist,sellerBuyerSplit:e.sellerBuyerSplit,responseStatus:e.responseStatus,senderFeedbackBotMsg:e.senderFeedbackBotMsg,senderFeedbackReason:e.senderFeedbackReason,showServingTab:e.showServingTab,rcmdWhitelist:e.rcmdWhitelist,botConfig:e.botConfig}}))).checkUserPermissionSucceeded,nn={hasVideoPermission:!1,hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigDuration:0,deleteConfigVersion:0,waitingTimeFilter:!1,showCrrDue:!1,hideFeedback:!1,chatbotToggle:n.ChatbotToggle.Disable,showChatbotLoadingTime:0,disappearChatbotLoadingTime:0,hideBlockEntrance:!1,showSourceBanner:!1,showTopBanner:!1,msgStatus:!1,showReport:!1,chatbotToggleOpen:!1,onboardingNewbieComplete:!1,onboardingWhitelist:!1,sellerBuyerSplit:!1,responseStatus:!1},on=function(){try{return n.LS.getItem("minichat-service-down")||!1}catch(e){return!1}};function cn(){var t,r,o,c,i,a,u,s,l,f,d,p,_,S,v,h,E,g,b,m,O,R,T,y,A,C,w,P,N,I,U,L,k,M,x,j,H,F,G,B,V,W,z,K,Y,q,Q,J,X,$,Z,ee,te;return regeneratorRuntime.wrap((function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,(0,e.select)(Ge);case 2:return t=re.sent,r=t.type,o=t.country,re.prev=4,re.next=7,(0,e.call)(D.fetch,{subServer:"coreapi",parent:"user",resource:"global_config",params:{entry_point:"pc_mall"}});case 7:return c=re.sent,a=(i=c||{}).video,u=i.reply,s=i.waiting_time_filter,l=i.show_crr_due,f=i.delete_msg,d=i.support_subaccount_unreplied,p=i.hide_feedback,_=i.chatbot_toggle,S=i.show_chatbot_loading_time,v=i.disappear_chatbot_loading_time,h=i.show_chat_serving_feature,E=i.seller_driver_whitelist,g=i.ams_toggle_status,b=i.show_source_banner,m=i.show_top_banner,(O=void 0===(O=i.subaccount_guide_config)?{}:O).show_popup,O.popup_duration_sec,O.shop_bind_main_account,O.show_dropdown_menu_entry,R=i.show_recall_banner,T=i.hide_block_entrance,y=i.ab_test_info,A=(y=void 0===y?{}:y).show_csat_submit,C=i.msg_status,w=i.text_max_input_len,P=i.show_report,N=i.chatbot_toggle_open,I=void 0!==N&&N,U=i.onboarding_newbie_complete,L=void 0!==U&&U,k=i.onboarding_whitelist,M=void 0!==k&&k,x=i.seller_buyer_split,j=void 0!==x&&x,H=i.sender_feedback_bot_msg,F=i.sender_feedback_reason,G=void 0===F?{}:F,B=i.show_serving_tab,V=void 0!==B&&B,W=i.rcmd_whitelist,z=void 0!==W&&W,K=i.bot_config,window.__SENDER_FEEDBACK_TIMEOUT__=null==G?void 0:G.feedback_timeout,(Y=tn(tn({},nn),{},{hasVideoPermission:a,hasReplyPermission:u,waitingTimeFilter:s,showCrrDue:l,hideFeedback:p,chatbotToggle:_,showChatbotLoadingTime:S,disappearChatbotLoadingTime:v,showChatServingFeature:h,sellerDriverWhitelist:E,amsFeatureToggle:g,hideBlockEntrance:T,showCsatSubmit:A,showRecallBanner:R,showSourceBanner:b,showTopBanner:m,msgStatus:C,textMaxInputLengh:w,showReport:P,chatbotToggleOpen:I,onboardingNewbieComplete:L,onboardingWhitelist:M,sellerBuyerSplit:j,senderFeedbackBotMsg:H,senderFeedbackReason:G,showServingTab:V,rcmdWhitelist:z,botConfig:K})).waitingTimeFilter=!1,Y.chatbotToggle=n.ChatbotToggle.Disable,Y.showChatServingFeature=!1,Y.sellerDriverWhitelist=!1,Y.amsFeatureToggle=!1,Y.senderFeedbackBotMsg=!1,Y.showServingTab=!1,Y.rcmdWhitelist=!1,window.addExternalGlobal("seller_buyer_split",j),"seller"===r?(Q=(q=f||{}).config_version,J=q.region_config,X=void 0===J?[]:J,Y.deleteConfigVersion=Q,($=X.find((function(e){return e.region===o})))&&$.duration&&(Y.hasDeletePermission=!0,Y.deleteConfigDuration=$.duration)):Y.subaccountHasUnrepliedPermission=d,re.next=27,(0,e.put)(rn(tn(tn({},Y),{},{responseStatus:!0})));case 27:if(void 0===c.br_site_close){re.next=32;break}return re.next=30,(0,e.put)(Xr({alert:(null==c||null===(Z=c.br_site_close)||void 0===Z?void 0:Z.site_close)||!1,closed:on()}));case 30:window.__SERVICEDOWN_STATT_TIME__=(null==c||null===(ee=c.br_site_close)||void 0===ee?void 0:ee.start_time)||0,window.__SERVICEDOWN_END_TIME__=(null==c||null===(te=c.br_site_close)||void 0===te?void 0:te.end_time)||0;case 32:re.next=38;break;case 34:return re.prev=34,re.t0=re.catch(4),re.next=38,(0,e.put)(rn(tn(tn({},nn),{},{responseStatus:!0})));case 38:case"end":return re.stop()}}),Zr,null,[[4,34]])}var an=T({},Vt.CHECK_USER_PERMISSION_SUCCEEDED,Mt()),un=regeneratorRuntime.mark((function t(){var r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.length>0&&void 0!==r[0]&&!r[0]){t.next=4;break}return t.next=4,(0,e.call)(Nt.closeConnect);case 4:return t.next=6,(0,e.put)(Cr());case 6:return t.next=8,(0,e.put)(Do());case 8:(0,n.removeItem)("mini-session"),(0,n.removeItem)("mini-sc_redirect");case 10:case"end":return t.stop()}}),t)})),sn=regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={server:(0,n.getSCApiServer)(),namespace:"",resource:"logout/",params:{SPC_CDS:lr().get("SPC_CDS"),SPC_CDS_VER:2}},(0,n.isVisitingCNSC)()||(0,n.isVisitingKRSC)()?(r.version="cnsc",r.parent="selleraccount"):r.version="v1",t.next=5,(0,e.call)(D.fetch,r);case 5:return document.location.replace("https://".concat((0,n.getSellerCenterUrl)(),"/account/signin")),window.removeEventListener("online",(function(){ur.store.dispatch($t({networkStatus:"online"}))})),window.removeEventListener("offline",(function(){ur.store.dispatch($t({networkStatus:"offline"}))})),(0,D.clearApiCache)(),t.next=11,(0,e.call)(un);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),t.t0.handler?(0,e.call)(t.t0.handler):console.error("[Logout Failed] ",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])}));function ln(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ln(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var dn=[jr,Qr],pn=(0,k.handleActions)(fn(fn(fn(fn(fn({},Jr),an),ar),Gr),$r),{networkStatus:"online",currentUserId:null,currentUser:{},curTabFocused:!0,isMainPage:!0,subaccountHasUnrepliedPermission:!1,showAutoHangupModal:!1,hasVideoPermission:!1,hasReplyPermission:!1,shouldInitFSSDK:!1,hasDeletePermission:!1,deleteConfigVersion:0,deleteConfigDuration:0,waitingTimeFilter:!1,showCrrDue:!1,hideFeedback:!1,showChatbotLoadingTime:0,disappearChatbotLoadingTime:0,textMaxInputLengh:600,loginSuccess:!0,showChatWindow:!1,showConversationDetail:!0,showEntry:!1,hasFetchedUnread:!1,hasSidebarPanel:!1,serviceDownStatus:{alert:!1,closed:!1,list:!1,message:!1}}),_n=function(e){return(0,t.createSelector)(E,(function(t){return(0,X.denormalize)(e,D.shopSchema,{shops:t})}))},Sn=function(e){var t;return(null==e||null===(t=e.shopReducer)||void 0===t?void 0:t.fetchedShopIds)||[]},vn=regeneratorRuntime.mark(gn),hn=regeneratorRuntime.mark(mn),En=function(e){return new Promise((function(t){(0,D.fetch)({parent:"conversation",resource:"unread-counts",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e["unread-counts"];t(void 0===r?[]:r)})).catch((function(){t([])}))}))};function gn(t){var r,n,o,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=t.payload.shopId,i.prev=1,i.next=4,(0,e.select)(_n(r));case 4:return n=i.sent,i.next=7,(0,e.call)(D.fetch,{resource:"shop",id:r,params:{need_cache:1,cache_expires:600}});case 7:return n=i.sent,o=(0,D.normalize)("shops",n),c=o.entities,i.next=11,(0,e.put)(x({entities:c}));case 11:return i.next=13,(0,e.put)((0,Nt.updateFetchedShopIds)({shopIds:[n.id]}));case 13:return i.abrupt("return",n);case 16:return i.prev=16,i.t0=i.catch(1),i.abrupt("return",{});case 19:case"end":return i.stop()}}),vn,null,[[1,16]])}var bn=function(e){var t=e.shopIds,r={ids:JSON.stringify(t)};return new Promise((function(e){(0,D.fetch)({resource:"shop_list",params:r}).then((function(t){var r=t.shops;e(void 0===r?[]:r)})).catch((function(){e([])}))}))};function mn(t){var r,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=t.payload.shopId,o.prev=1,o.next=4,(0,e.call)(D.fetch,{parent:"shop",parentId:r,resource:"auth"});case 4:return n=o.sent,o.abrupt("return",n);case 8:return o.prev=8,o.t0=o.catch(1),o.abrupt("return",{});case 11:case"end":return o.stop()}}),hn,null,[[1,8]])}var On,Rn,Tn=function(e){return e.toastReducer.toast},yn=r(701).t,An=function(e,t){var r={};if(t){switch(t.type){case"auto-reply":e?t.first&&"enabled"===t.action?(r.message=yn("settings.enable_auto_reply_successfully"),r.show=!0):(r.message="",r.show=!1):(t.first&&"enabled"===t.action?r.message=yn("settings.failed_to_enable_auto_reply"):r.message="enabled"===t.action?yn("settings.failed_to_enable"):yn("settings.failed_to_disable"),r.show=!0);break;case"message":r.message=e?"save"===t.action?yn("settings.message.save_successfully"):"delete"===t.action?yn("settings.message.delete_successfully"):yn("settings.message.import_successfully"):"save"===t.action?yn("settings.message.failed_to_save"):"delete"===t.action?yn("settings.message.failed_to_delete"):yn("settings.message.failed_to_import"),r.show=!0;break;case"message-tips":e?(r.message="",r.show=!1):(r.message="enabled"===t.action?yn("settings.failed_to_enable"):yn("settings.failed_to_disable"),r.show=!0);break;case"forward":e||(r.message=403===t.status?yn("forward.exception",{forwardName:""}):yn("forward.server_error"),r.show=!0);break;case"send-feedback":r.message=yn("feedback_modal.error.failed_to_send"),r.show=!0;break;case"server-error-tips":r.message=yn("common.server_error.warning_tips"),r.show=!0;break;case"conversation-closed-tip":r.message=yn("conversation_detail.closed.warning_tips"),r.show=!0;break;case"permission-denied":r.message=yn("common.permission_denied"),r.show=!0;break;case"claim-voucher":r.message=yn(e?"voucher.claim.success":"voucher.claim.fail"),r.show=!0;break;case"claim-voucher-not-satisfy":r.message=yn("voucher.claim.fail_not_satisfy_rule"),r.show=!0;break;case"claim-voucher-already-claimed":r.message=yn("voucher.claim.fail_already_claimed"),r.show=!0;break;case"claim-voucher-no-longer-valid":r.message="claim_voucher.error.no_longer_valid",r.show=!0;break;case"claim-voucher-failed":r.message="claim_voucher.error.failed",r.show=!0;break;case"private-image":r.message=yn("common.image.expired"),r.show=!0;break;case"operation":"save"===t.action&&(r.message=yn(e?"text.save_successfully":"text.save_failed")),r.show=!0;break;default:r.message=t.message,r.show=!0}r.type=e?"success":"fail"}return r};!function(e){e.COPY_SUCCEED_FEEDBACK="COPY_SUCCEED_FEEDBACK",e.SET_TOAST_INFORMATION="SET_TOAST_INFORMATION",e.SET_TOAST_INFORMATION_SUCCEEDED="SET_TOAST_INFORMATION_SUCCEEDED"}(On||(On={}));var Cn=(0,k.createActions)((T(Rn={},On.COPY_SUCCEED_FEEDBACK,(function(){return{}})),T(Rn,On.SET_TOAST_INFORMATION,(function(e){return{type:e.type,error:e.error,toast:e.toast,extra:e.extra}})),T(Rn,On.SET_TOAST_INFORMATION_SUCCEEDED,(function(e){return{toast:e.toast}})),Rn)),wn=Cn.copySucceedFeedback,Dn=Cn.setToastInformation,Pn=Cn.setToastInformationSucceeded,Nn=regeneratorRuntime.mark(Un),In=regeneratorRuntime.mark(Ln);function Un(t){var r,n,o,c,i,a;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return r=t.payload,n=r.type,o=r.error,c=r.toast,i=r.extra,u.next=3,(0,e.select)(ot);case 3:if(!u.sent){u.next=11;break}return a=null,n&&(a=An(!1,{type:n})),void 0!==o&&(a=o instanceof D.CustomError||o instanceof D.Webview?o.handler(null==i?void 0:i.toShopId):An(!1,{type:"server-error-tips"})),c&&(a=c),u.next=11,(0,e.put)(Pn({toast:a}));case 11:case"end":return u.stop()}}),Nn)}function Ln(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Dn,Un);case 2:case"end":return t.stop()}}),In)}var kn=T({},On.SET_TOAST_INFORMATION_SUCCEEDED,Mt()),Mn=r(701).t,xn=regeneratorRuntime.mark(Hn),jn=regeneratorRuntime.mark(Fn);function Hn(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.put)(Dn({toast:An(!0,{message:Mn("common.successful_copied")})}));case 2:case"end":return t.stop()}}),xn)}function Fn(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(wn,Hn);case 2:case"end":return t.stop()}}),jn)}function Gn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Bn=[Ln,Fn],Vn=(0,k.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},kn),{toast:{type:"",message:"",show:!1}});function Wn(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var zn,Kn=function(e){return e.messageShortcutGroupReducer||{groups:[],status:"",currentGroupType:-1,currentGroupId:-1}},Yn=(0,t.createSelector)(Kn,(function(e){return e.status})),qn=(0,t.createSelector)(Kn,(function(e){return e.currentGroupType})),Qn=(0,t.createSelector)(Kn,(function(e){return e.currentGroupId})),Jn=(0,t.createSelector)(Kn,(function(e){return e.groups})),Xn=(0,t.createSelector)(Jn,(function(e){return e.filter((function(e){return e.group_type===n.MessageShortcutGroupType.PERSONAL}))})),$n=(0,t.createSelector)(Jn,(function(e){return e.filter((function(e){return e.group_type===n.MessageShortcutGroupType.TEAM}))})),Zn=(0,t.createSelector)(Jn,qn,(function(e,t){return-1===t?e:e.filter((function(e){return e.group_type===t}))})),eo=(0,t.createSelector)(Xn,(function(e){return e.reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),to=(0,t.createSelector)($n,(function(e){return e.reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),ro=(0,t.createSelector)(eo,to,(function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(Wn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),Wn(e))})),no=(0,t.createSelector)(ro,(function(e){var t=e.filter((function(e){return!(null==e||!e.pin_time)})).sort((function(e,t){return e.pin_time-t.pin_time})),r=e.filter((function(e){return!(null!=e&&e.pin_time)}));return[].concat(Wn(t),Wn(r))})),oo=(0,t.createSelector)(no,qn,Qn,(function(e,t,r){var n=-1===t?e:e.filter((function(e){return e.group_type===t}));return-1===r?n:n.filter((function(e){return e.groupId===r}))})),co=function(e){var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.settings)||{}},io=function(e){var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.needForceUpdate)||!1},ao=function(e){var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.status)||""},uo=function(e){var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.fetchStatus)||""},so=(0,t.createSelector)(co,(function(e){return e.auto_translation_status||""})),lo=(0,t.createSelector)(co,(function(e){return e.message_shortcuts_status||""})),fo=(0,t.createSelector)(co,(function(e){return e.legacy_message_shortcuts_count||0})),po=(0,t.createSelector)(co,(function(e){return e.distribution_account_status||"enabled"})),_o=(0,t.createSelector)(co,(function(e){return e.display_banner||!1})),So=regeneratorRuntime.mark(vo);function vo(){var t,r,o;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,(0,e.put)((0,Nt.fetchSettingsStatus)({fetchStatus:n.DataFetchStatus.PENDING}));case 3:return t=Date.now(),c.next=6,(0,e.call)(D.fetch,{parent:"user",resource:"setting"});case 6:return r=c.sent,null==(o=(0,D.getReportManager)())||o.reportUserSettingApi(Date.now()-t),c.next=11,(0,e.put)((0,Nt.fetchSettingsSucceeded)({settings:r,fetchStatus:n.DataFetchStatus.SUCCEED,timestamp:Date.now(),needForceUpdate:!1}));case 11:return c.abrupt("return",r);case 14:return c.prev=14,c.t0=c.catch(0),c.next=18,(0,e.put)((0,Nt.fetchSettingsStatus)({fetchStatus:n.DataFetchStatus.FAILED}));case 18:return c.abrupt("return",{});case 19:case"end":return c.stop()}}),So,null,[[0,14]])}!function(e){e.HANDLE_401_ERROR_REQUESTED="HANDLE_401_ERROR_REQUESTED",e.UPDATE_CONVERSATION_LISTS_HASH="UPDATE_CONVERSATION_LISTS_HASH",e.OPEN_MALL_URL="OPEN_MALL_URL"}(zn||(zn={}));var ho=regeneratorRuntime.mark(mo),Eo=regeneratorRuntime.mark(Oo),go=(0,k.createActions)(T({},zn.OPEN_MALL_URL,(function(e){return{path:e.path,region:e.region,isAbsolute:e.isAbsolute}}))).openMallUrl,bo="xiapibuy.com";function mo(t){var r,o,c,i,a,u,s,l,f,d,p,_,S;return regeneratorRuntime.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(r=t.payload,o=r.path,c=void 0===o?"":o,i=r.region,a=void 0===i?"":i,void 0===(u=r.isAbsolute)||!u){v.next=4;break}return window.open(c),v.abrupt("return");case 4:if("cn"!==(s=a?a.toLowerCase():(0,n.getRuntimeRegion)())&&"kr"!==s||(s="my"),f=c?c.startsWith("/")?c:"/".concat(c):"",!(0,n.isVisitingCn)()){v.next=24;break}return v.prev=8,v.next=11,(0,e.call)(D.fetch,{url:"https://".concat((0,n.getSCApiServer)(),"/selleraccount/nonce/get/")});case 11:d=v.sent,p=d.data,_="".concat((0,n.cnDomainHash)(s),".").concat((0,n.envPrefix)()).concat(bo),S=encodeURIComponent(window.btoa('{"next":"https://'.concat(_).concat(f,'"}'))),f="/api/seller_platform/nonce/callback/?nonce=".concat(p.nonce,"&region=").concat(s,"&state=").concat(S),l="https://".concat(_).concat(f),v.next=22;break;case 19:v.prev=19,v.t0=v.catch(8),l="https://".concat((0,n.cnDomainHash)(s),".").concat((0,n.envPrefix)()).concat(bo).concat(f);case 22:v.next=25;break;case 24:l="https://".concat((0,n.domainPrefix)(),".").concat((0,n.domainSuffix)(s)).concat(f);case 25:window.open(l);case 26:case"end":return v.stop()}}),ho,null,[[8,19]])}function Oo(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(go,mo);case 2:case"end":return t.stop()}}),Eo)}var Ro=(0,k.createActions)(T({},zn.HANDLE_401_ERROR_REQUESTED,(function(e){return{resource:e.resource}}))).handle401ErrorRequested,To=(0,k.createActions)(T({},zn.UPDATE_CONVERSATION_LISTS_HASH,(function(){return{}}))).updateConversationListsHash,yo=[Oo],Ao=(0,t.createSelector)(c,(function(e){return e.offers||{}})),Co=function(e,r,o,c){return(0,t.createSelector)(Ao,(function(t){return Object.values(t).filter((function(t){return t.product_id===c&&t.model_id===r&&t.conversation_id===e&&t.id!==o&&t.status===n.OfferStatus.PENDING}))}))},wo=function(e){return(0,t.createSelector)(c,(function(t){return(0,X.denormalize)(e,D.offerSchema,t)}))},Do=(0,k.createActions)({REDUX_RESET:function(){return{}}}).reduxReset;window.addExternalGlobal("resetAction",Do);var Po=function(e){var t;return(null===(t=e.draftReducer)||void 0===t?void 0:t.draftHash)||{}},No=function(e){return(0,t.createSelector)(Po,(function(t){return t[e]||""}))},Io=function(e){var t;return(null==e||null===(t=e.translatePreferenceReducer)||void 0===t?void 0:t.translationSettings)||{}},Uo=function(e){var t;return(null==e||null===(t=e.translatePreferenceReducer)||void 0===t?void 0:t.fetchSettingsStatus)||""},Lo=function(e){var t;return(null==e||null===(t=e.translatePreferenceReducer)||void 0===t?void 0:t.updateStatus)||""},ko=regeneratorRuntime.mark(jo);function Mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jo(t,r,n){var o,c,i,a,u=arguments;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o=u.length>3&&void 0!==u[3]?u[3]:[],c=t,i=[],a=[],Array.isArray(t)&&(c=((0,D.normalize)(n,t).entities||{})[n]||{}),r.forEach((function(t){var r=t.id,u=c[r];u?["conversations","agentConversations"].includes(n)&&(void 0!==u.faking||u.latestMessageStatus||void 0!==u.unreplied)?(delete(t=xo(xo({},u),t)).faking,delete t.latestMessageStatus,delete t.unreplied,t.manual&&(delete t.manual,t.unreplied=!1),a.push(t)):(o.length&&o.forEach((function(e){t[e]=u[e]})),i.push((0,e.put)(j({name:n,id:r,record:xo({},t)})))):a.push(t)})),a.length&&i.push((0,e.put)(x({entities:(0,D.normalize)(n,a).entities}))),s.next=9,(0,e.all)(i);case 9:case"end":return s.stop()}}),ko)}var Ho,Fo,Go=function(e){return(0,t.createSelector)(_,(function(t){return(0,X.denormalize)(e,[D.productSchema],{products:t})}))},Bo=function(e){return e.reportReducer.beingReported};!function(e){e.REPORT_REQUESTED="REPORT_REQUESTED",e.CLEAR_REPORT_REQUESTED="CLEAR_REPORT_REQUESTED"}(Ho||(Ho={}));var Vo,Wo=(0,k.createActions)((T(Fo={},Ho.REPORT_REQUESTED,(function(e){return{event_time:e.event_time,url:e.url}})),T(Fo,Ho.CLEAR_REPORT_REQUESTED,(function(){return{}})),Fo)),zo=Wo.reportRequested,Ko=Wo.clearReportRequested,Yo=regeneratorRuntime.mark(Xo),qo=regeneratorRuntime.mark($o);function Qo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qo(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xo(){var t,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,e.select)(Bo);case 2:if(!(t=o.sent).length){o.next=10;break}return r=Wn(t),o.next=7,(0,e.put)(Ko());case 7:return r.sort((function(e,t){return Number(t.event_time)-Number(e.event_time)})),o.next=10,(0,e.call)(D.fetch,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_active",payload:JSON.stringify(Jo(Jo({},r[0]),{},{platform_id:(0,n.isVisitingCNSC)()||(0,n.isVisitingKRSC)()?2:1}))});case 10:case"end":return o.stop()}}),Yo)}function $o(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,(0,e.delay)(6e4);case 3:return t.next=5,Xo();case 5:t.next=0;break;case 7:case"end":return t.stop()}}),qo)}var Zo=(T(Vo={},Ho.REPORT_REQUESTED,(function(e,t){var r=t.payload,n=r.event_time,o=r.url;return{beingReported:[].concat(Wn(e.beingReported),[{event_time:n,url:o}])}})),T(Vo,Ho.CLEAR_REPORT_REQUESTED,(function(e){return{beingReported:[]}})),Vo);function ec(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var tc,rc,nc=[$o],oc=(0,k.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ec(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Zo),{beingReported:[]});function cc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ic(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cc(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.ADD_NEED_CAPTCHA_REQUEST="ADD_NEED_CAPTCHA_REQUEST",e.DELETE_CAPTCHA_REQUEST="DELETE_CAPTCHA_REQUEST",e.CLEAR_NEED_CAPTCHA_REQUEST="CLEAR_NEED_CAPTCHA_REQUEST",e.RESEND_NEED_CAPTCHA_REQUEST="RESEND_NEED_CAPTCHA_REQUEST"}(tc||(tc={}));var ac,uc=(T(rc={},tc.ADD_NEED_CAPTCHA_REQUEST,(function(e,t){var r=t.payload.request,n=Wn(e.verifyRequests);return n.push(r),ic(ic({},e),{},{verifyRequests:n})})),T(rc,tc.DELETE_CAPTCHA_REQUEST,(function(e){var t=Wn(e.verifyRequests);return t.pop(),ic(ic({},e),{},{verifyRequests:t})})),T(rc,tc.CLEAR_NEED_CAPTCHA_REQUEST,(function(e){return ic(ic({},e),{},{verifyRequests:[]})})),rc),sc=(0,k.createActions)((T(ac={},tc.ADD_NEED_CAPTCHA_REQUEST,(function(e){return{request:e.request}})),T(ac,tc.DELETE_CAPTCHA_REQUEST,(function(){return{}})),T(ac,tc.CLEAR_NEED_CAPTCHA_REQUEST,(function(){return{}})),T(ac,tc.RESEND_NEED_CAPTCHA_REQUEST,(function(){return{}})),ac)),lc=sc.addNeedCaptchaRequest,fc=sc.deleteCaptchaRequest,dc=sc.clearNeedCaptchaRequest,pc=sc.resendNeedCaptchaRequest,_c=regeneratorRuntime.mark(Ec),Sc=regeneratorRuntime.mark(gc);function vc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return hc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,c=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw c}}}}function hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ec(){var t,r,n,o,c,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,e.select)(Rc);case 3:if(!(t=a.sent).length){a.next=44;break}return a.next=7,(0,e.put)(dc());case 7:r=vc(t),a.prev=8,r.s();case 10:if((n=r.n()).done){a.next=36;break}o=n.value,c=o.id,i=o.extra,a.t0=c,a.next="unread-count"===a.t0?16:"unread-count-single"===a.t0?19:"send-message"===a.t0?22:"orders_by_buyer"===a.t0||"purchased_list"===a.t0?25:"item-list-my-shop"===a.t0||"item-list-other-shop"===a.t0?28:"fill-handler"===a.t0?31:34;break;case 16:return a.next=18,(0,e.spawn)(Nt.doRefreshTotalUnreadConversationsCount,i);case 18:return a.abrupt("break",34);case 19:return a.next=21,(0,e.spawn)(doRefreshSingleShopUnreadConversationCount,i);case 21:return a.abrupt("break",34);case 22:return a.next=24,(0,e.put)((0,Nt.resendMessageRequested)(i));case 24:return a.abrupt("break",34);case 25:return a.next=27,(0,e.put)((0,Nt.fetchOrdersRequested)(i));case 27:return a.abrupt("break",34);case 28:return a.next=30,(0,e.put)((0,Nt.fetchProductsRequested)(i));case 30:return a.abrupt("break",34);case 31:return a.next=33,(0,e.call)(Nt.fillActionHandler,i);case 33:return a.abrupt("break",34);case 34:a.next=10;break;case 36:a.next=41;break;case 38:a.prev=38,a.t1=a.catch(8),r.e(a.t1);case 41:return a.prev=41,r.f(),a.finish(41);case 44:a.next=48;break;case 46:a.prev=46,a.t2=a.catch(0);case 48:case"end":return a.stop()}}),_c,null,[[0,46],[8,38,41,44]])}function gc(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(pc,Ec);case 2:case"end":return t.stop()}}),Sc)}function bc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var mc=(0,k.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bc(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},uc),{verifyRequests:[]}),Oc=[gc],Rc=function(e){return e.captchaVerifyReducer.verifyRequests},Tc=function(e){var t;return(null===(t=e.translateReducer)||void 0===t?void 0:t.showOriginalMessages)||{}},yc=regeneratorRuntime.mark(Ac);function Ac(t,r,n){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,e.takeEvery)(t,regeneratorRuntime.mark((function t(o){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=o.payload.id){t.next=5;break}return t.next=4,(0,e.call)(r,o);case 4:return t.abrupt("return");case 5:return t.next=7,(0,e.race)({task:(0,e.call)(r,o),cancel:(0,e.take)((function(e){return e.type===n.toString()&&e.payload.id===c}))});case 7:case"end":return t.stop()}}),t)})));case 2:case"end":return o.stop()}}),yc)}}(),p}())},53402:function(e,t,r){"use strict";e.exports=r(88377)}}]);