(self.miniJsonp=self.miniJsonp||[]).push([[9631],{27830:function(e,t,r){var o;o=(e,t,r,o,n,a,s,i,c,l,u)=>(()=>{"use strict";var d={701:(e,t,r)=>{r.d(t,{t:()=>a});var o=r(661),n=r.n(o),a=n().t.bind(n())},187:e=>{var t,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,o){function n(r){e.removeListener(t,a),o(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}E(e,t,a,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&E(e,"error",t,{once:!0})}(e,n)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function i(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,r,o){var n,a,s,l;if(i(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]),void 0===s)s=a[t]=r,++e._eventsCount;else if("function"==typeof s?s=a[t]=o?[r,s]:[s,r]:o?s.unshift(r):s.push(r),(n=c(e))>0&&s.length>n&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=u.bind(o);return n.listener=r,o.wrapFn=n,n}function _(e,t,r){var o=e._events;if(void 0===o)return[];var n=o[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):p(n,n.length)}function S(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),o=0;o<t;++o)r[o]=e[o];return r}function E(e,t,r,o){if("function"==typeof e.on)o.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(a){o.once&&e.removeEventListener(t,n),r(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,a=this._events;if(void 0!==a)n=n&&void 0===a.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var i=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw i.context=s,i}var c=a[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var l=c.length,u=p(c,l);for(r=0;r<l;++r)o(u[r],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return i(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return i(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,o,n,a,s;if(i(t),void 0===(o=this._events))return this;if(void 0===(r=o[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){s=r[a].listener,n=a;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(o[e]=r[0]),void 0!==o.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,o;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,a=Object.keys(r);for(o=0;o<a.length;++o)"removeListener"!==(n=a[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this},a.prototype.listeners=function(e){return _(this,e,!0)},a.prototype.rawListeners=function(e){return _(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):S.call(e,t)},a.prototype.listenerCount=S,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},782:e=>{e.exports=s},830:e=>{e.exports=i},292:e=>{e.exports=c},661:t=>{t.exports=e},444:e=>{e.exports=n},598:e=>{e.exports=r},383:e=>{e.exports=l},944:e=>{e.exports=u},855:e=>{e.exports=t},672:e=>{e.exports=a},459:e=>{e.exports=o}},_={};function S(e){var t=_[e];if(void 0!==t)return t.exports;var r=_[e]={exports:{}};return d[e](r,r.exports,S),r.exports}S.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return S.d(t,{a:t}),t},S.d=(e,t)=>{for(var r in t)S.o(t,r)&&!S.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},S.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),S.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var p={};return(()=>{S.r(p),S.d(p,{$tracker:()=>ze,Blacklist:()=>h,CancelOrderWarning:()=>f,CustomError:()=>n,EventBus:()=>Ke,ExceptionName:()=>ae,Forbidden:()=>t,HTTPError:()=>T,InternalServerError:()=>O,Limiting:()=>_,MarkName:()=>oe,NeedCaptchaVerify:()=>b,NotFound:()=>u,ReportComponent:()=>ne,ReportPoint:()=>ye,TemporyError:()=>v,Unauthoried:()=>l,UnprocessableEntity:()=>d,UntrustedNetwork:()=>E,UnverifiedPhoneNumber:()=>g,Webview:()=>c,affiliateSchema:()=>$e,agentConversationSchema:()=>ct,clearApiCache:()=>j,collectAsyncTask:()=>we,collectComponentTask:()=>De,collectConversationLoadTask:()=>Ce,collectLoadTask:()=>Ae,configTrackerUser:()=>Ve,contactsSchema:()=>lt,conversationSchema:()=>et,exceptionTag:()=>se,fetch:()=>Ge,getReportManager:()=>Se,getTranslation:()=>gt,initMDAPSdk:()=>Ie,isError:()=>m,isInServiceDownDuration:()=>G,mdapConfig:()=>Oe,messageSchema:()=>Ze,messageShortcutsSchema:()=>st,normalize:()=>_t,offerSchema:()=>ot,orderSchema:()=>tt,productSchema:()=>rt,rateCardsSchema:()=>it,reportApiTime:()=>Ue,shopSchema:()=>at,shopService:()=>I,stickerSchema:()=>nt,userSchema:()=>Xe,vouchersSchema:()=>ut});class e extends Error{constructor(e,t,r){super(e),this.name=this.constructor.name,this.errors=t,this.data=r}}class t extends e{constructor(e,t,r){super(e,t,r),this.name=this.constructor.name}handler(){}}var r=S(701).t,o=["unauthorized_for_shop","target_subaccount_unauthorized_for_shop","target_group_unauthorized_for_shop","conversation_not_belong_to_you","conversation_not_dispatch","cannot_move_conversation_to_yourself","target_subaccount_not_online","subaccount_conversation_not_found","conversation_closed"];class n extends e{constructor(e,t,r){super(e,t,r),this.name=this.constructor.name,this.handler=this.handler.bind(this)}handler(){var e="";if(o.includes(this.errors))e="forward.error.".concat(this.errors);else switch(this.errors){case"user_have_delete_disable":e="forward.error.user_deleted";break;case"user_has_pending_order":e="conversation_detail.workstation.block_fail_modal.title";break;case"too_many_requests_for_unique_fields":e="feedback_modal.too_many_requests_for_unique_fields";break;default:e="common.server_error.warning_tips"}return{show:!0,type:"fail",message:r(e)}}}var a=S(855),s=S(701).t,i={rating_card_expired:"conversation_detail.message_list.csat_expired",have_submited_csat:"conversation_detail.message_list.csat_have_submited",no_organic_within_24hr:"conversation_detail.message_list.csat_no_organic_within_24hr",send_rating_card_too_frequently:"conversation_detail.message_list.csat_send_rating_card_too_frequently",buyer_receiver_too_many_rating_card:"conversation_detail.message_list.csat_buyer_receiver_too_many_rating_card",buyer_active_feedback_off:"conversation_detail.message_list.csat_buyer_active_feedback_off",not_chat_with_agent:"conversation_detail.message_list.csat_not_chat_with_agent",have_received_rating_card_today:"conversation_detail.message_list.csat_have_received_rating_card_today",can_not_rate_now:"conversation_detail.message_list.csat_can_not_rate_now",can_not_rate_bot_now:"cast.error.can_not_rate_bot_now",bot_frequency_limit:"cast.error.bot_frequency_limit",not_chat_with_bot:"cast.error.not_chat_with_bot"};class c extends e{constructor(e,t,r){super(e,t,r),this.name=this.constructor.name}handler(e){var t,r=null!==(t=i[this.errors])&&void 0!==t?t:"common.server_error.warning_tips";"cast.error.can_not_rate_bot_now"===r&&(0,a.checkSpecialShops)(e)&&(r="".concat(r,"_idscs"));var o=s(r);if("buyer_receiver_too_many_rating_card"===this.errors){var n,c,l=null!==(n=null===(c=this.data)||void 0===c?void 0:c.limit)&&void 0!==n?n:"";o=s(i.buyer_receiver_too_many_rating_card,{count:l})}return{message:o,show:!0,type:"fail"}}}class l extends e{}class u extends e{}class d extends e{}class _ extends e{}class E extends e{}class v extends e{}class h extends e{}class f extends e{}class g extends e{}class O extends e{}class b extends e{}var T=e=>{switch(e){case 401:return l;case 403:return t;case 404:return u;case 422:return d;case 429:return _;case 451:return E;case 452:return v;case 491:return n;case 492:return h;case 493:return c;case 494:return f;case 495:return g;case 499:return b;case 500:return O;default:return Error}},m=e=>"".concat(e).startsWith("4")||"".concat(e).startsWith("5");function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t,r,o,n,a,s){try{var i=e[a](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(o,n)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function s(e){y(a,o,n,s,i,"next",e)}function i(e){y(a,o,n,s,i,"throw",e)}s(void 0)}))}}var C=S(598),D=S.n(C),w=S(459);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=new class{constructor(){this.shopsMap={}}updateShopMap(e){this.shopsMap=N(N({},this.shopsMap),e)}getRegion(e,t){var r=this;return A((function*(){if(t){var o,n=null===(o=r.shopsMap[t])||void 0===o?void 0:o.country;if(!n){var s=yield Ge({resource:"shop",id:t,params:{need_cache:1,cache_expires:600}});return r.updateShopMap({[s.id]:s}),s.country}return n}var i=(0,a.getRuntimeRegion)().toUpperCase();return["KR","CN"].includes(i)||e?"GLOBAL":i}))()}};"live"!==(0,a.getRuntimeServer)()&&(window.shopService=I);var U=S(444),L=S.n(U),M="CHAT_API",j=()=>{window.caches&&window.caches.delete(M)};function H(e,t){return k.apply(this,arguments)}function k(){return(k=A((function*(e,t){try{var r=new URL(e).searchParams,o=r.get("need_cache"),n=r.get("force_update"),a=r.get("_ts"),s=t.method&&"get"===t.method.toLowerCase(),i="&csrf_token=".concat(encodeURIComponent(r.get("csrf_token")||"")),c="&force_update=".concat(String(n)),l=e.replace(i,"").replace(c,"").replace(a||"","");if(s&&o&&window.caches){var u=yield window.caches.open(M),d=yield u.match(l),_=Date.now();if(d){if(_<Number(d.headers.get("cache-expires"))&&!n)return d;yield u.delete(l)}var S=yield L()(e,t),p=S.clone();if(200===S.status){var E=[...S.headers.entries()],v={},h=_+1e3*(Number(r.get("cache_expires"))||3600),f=yield S.blob();E.forEach((e=>{v[e[0]]=e[1]})),v["cache-expires"]=h;var g=new Response(f,{headers:new Headers(v)});try{u.put(l,g)}catch(e){window.caches.delete(M)}}return p}return L()(e,t)}catch(r){return L()(e,t)}}))).apply(this,arguments)}var F=S(672),G=()=>{var e=window.__SERVICEDOWN_STATT_TIME__,t=window.__SERVICEDOWN_END_TIME__,r=void 0!==e&&void 0!==t,o=Math.ceil(Date.now()/1e3);return r&&o>=e&&o<=t},B=e=>{m(e)||!G()&&window.__CHAT_GLOBAL__.setServiceDownStatus&&F.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!1,closed:!1,list:!1,message:!1}))},x=(e,t)=>{var r=new(T(e))(t.message,t.errors||t.error_code||t.errcode,t.data);if(r)throw r},V=(e,t,r)=>{if(m(e)){var{uri:o,resource:n}=r,{error_code:s}=t||{};"br_site_is_close"===s&&(e=>{var t;G()?(t=e.split("?")[0]).endsWith("conversations")||t.endsWith("conversation/list")?window.__CHAT_GLOBAL__.setServiceDownStatus&&F.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!0,list:!0})):window.__CHAT_GLOBAL__.setServiceDownStatus&&F.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!0,message:!0})):window.__CHAT_GLOBAL__.setServiceDownStatus&&F.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!1,closed:!1,list:!1,message:!1}))})(o),[400,404].includes(e),[491,493].includes(e)?x(e,t):401===e?((0,a.removeItem)("mini-session"),(0,a.removeItem)("mini-sc_redirect"),"login"===n&&x(e,t)):x(e,t)}},W=e=>{var{uri:t,id:r,parentId:o}=e;if(void 0!==r&&parseInt(r)<=0&&!t.includes("message_shortcuts/group")||void 0!==o&&parseInt(o)<=0)throw new Error},z=(e,t,r)=>{throw e||(t.offlineError=!0),t};function K(e){return Y.apply(this,arguments)}function Y(){return Y=A((function*(e){var t=e.getReader(),r=new TextDecoder,o=[];function n(){return a.apply(this,arguments)}function a(){return(a=A((function*(){var{done:e,value:a}=yield t.read();if(e)return JSON.parse(o.join(""));var s=r.decode(a,{stream:!0});return o.push(s),n()}))).apply(this,arguments)}return n()})),Y.apply(this,arguments)}var q,Q,J=S(782),X=S(830),$=S.n(X),Z=S(292),ee=S.n(Z),te={"18a6f08d7326025b60ded61f60c9ea20":"LOAD_HTML","0d2968a6996a60fee2db1270a70ef563":"LOAD_STATIC",ea02fc90bd3663f3179be7a1b7847a83:"APP_PREPARE","4e0b71ed91b3eacb1dfc4ec7f63b2966":"LOGIN_API","9d4a48b69fed6d1001e63ee668a05488":"LOGIN_SUCCEEDED","84fcedc144bfce212ae8db9f6ebb84ec":"SHOW_WEBCHAT"},re={"94a2f272c378ddf18f5c88f4e951c709":"SHOW_HOME_PAGE",a5707a9d6695fc50e257b51aee9ec03b:"LOAD_RESOURCE",dd25761ed961c46f4a0725abf6325b3a:"RENDER_HOME_PAGE","65d0f06861e011436277b54e32e0e702":"SEND_MESSAGE_API",b2bad090fbb5b6eb526af0423326ba91:"SEND_MESSAGE_CONSUMING","00f7d4cb0b968ed35a91ae83c0346fe1":"FETCH_CONV_API",b7b04ad90caccf19961c3dcdf7063294:"FETCH_MESSAGE_API","7ce993bd22dee11001514ad2b8e760bf":"RENDER_MESSAGE_LIST_FROM_CONV"};q={LOAD_HTML:"31b7f223943eee895738ce50e49a359a",LOAD_STATIC:"0ec7c5189cc4ada79908cfe5d6bd97ca",APP_PREPARE:"a61675f22b23600e51007c24a9b8aaf2",LOGIN_API:"75cbf76696b4f8d988de72cdfeb1877c",LOGIN_SUCCEEDED:"05c0e68ee42384c7e07e47fec4400e28",SHOW_WEBCHAT:"1b16553696a08e9f016235005a5a0678",SHOW_HOME_PAGE:"94a2f272c378ddf18f5c88f4e951c709",VIDEO_UPLOAD:"334a26e8a6dc82c95a47430f8af2e198",SERVICE_DONE:"19f2ea17be2d1d80257667787e54c882",MESSAGE_SOCKET:"f76ebd29ea3ed4571c9ea48ca893ac14",READ_SOCKET:"37e5b36437f0166056d3312fcea2b592",LOGIN_FAILED:"df8a83f83c949bb6a2b84c6f0048e203",SOCKET_FAILED:"13ddf42d9169b2ce05feb84224d79057",SHARED_TABS:"94e8d83005c95982268ff1c8b036313e",LOGIN_IN_HTML:"4075993c600862e7c604e35cd692a297",LOGIN_IN_SERVICE:"2845ad2751849e3d43b26a805a25dbb4",PRE_FETCH_USER_INFO:"36a82dac2154de34fa4c6d7e3da73a19",NON_PRE_FETCH_USER_INFO:"a9de236c14047b42eec108bf7f22f2ac",TRANSLATION_IN_HTML:"b3105979b5cc6448de8272e177db5741",TRANSLATION_IN_SERVICE:"acfba493a8c2d11ad323bc09c2d06603",CONVERSATION_MOUNTED:"53ddb086a61674f59a9d84e1a02f04a5",CONVERSATION_LOADED:"800c5562450216bccfad6cd11847c160",RECEIVE_CHATBOT_RESPONSE:"a6f37d623af1c31b5ae3eb333fc571c8",REPORT_T3:"b16720c32b08d2c2b4b9cebb66205520",REPORT_T4:"20749fffb5583f720b3eacf5013c4398",REPORT_ERROR:"ce4cc92284f6ed31f8266c8e676744c5",MESSAGE_LATENCY:"4cb5dab311e98cba8ecb48c5e3df9e12",LOAD_RESOURCE:"a5707a9d6695fc50e257b51aee9ec03b",RENDER_HOME_PAGE:"dd25761ed961c46f4a0725abf6325b3a",SEND_MESSAGE_API:"65d0f06861e011436277b54e32e0e702",SEND_MESSAGE_CONSUMING:"b2bad090fbb5b6eb526af0423326ba91",FETCH_CONV_API:"00f7d4cb0b968ed35a91ae83c0346fe1",FETCH_MESSAGE_API:"b7b04ad90caccf19961c3dcdf7063294",RENDER_MESSAGE_LIST_FROM_CONV:"7ce993bd22dee11001514ad2b8e760bf",FETCH_TRANSLATION_ASYNC:"961879cce46dc871cea546c825daf31d",FETCH_TRANSLATION_SYNC:"9f3d370e38d01f43e13f3e7465c1734c",RENDER_OLD_ENTRY:"34be4e989931224dfd8363a07ff0f896",RENDER_NEW_ENTRY:"99502b156aba4099d7e2fa2316f211cd",USER_SETTING:"6ec802950c6974b45c8a9080a70e7017",SEND_MESSAGES:"407610332f95a6a3bde8f720195f5a40"},Q={LOAD_HTML:"18a6f08d7326025b60ded61f60c9ea20",LOAD_STATIC:"0d2968a6996a60fee2db1270a70ef563",APP_PREPARE:"ea02fc90bd3663f3179be7a1b7847a83",LOGIN_API:"4e0b71ed91b3eacb1dfc4ec7f63b2966",LOGIN_SUCCEEDED:"9d4a48b69fed6d1001e63ee668a05488",SHOW_WEBCHAT:"84fcedc144bfce212ae8db9f6ebb84ec",SHOW_HOME_PAGE:"94a2f272c378ddf18f5c88f4e951c709",VIDEO_UPLOAD:"cc0dbd7370b7ade934cfe7c01bbd4ae9",SERVICE_DONE:"26ba92fb54150fe3bd6f827bb08ce8c9",MESSAGE_SOCKET:"a01882e94fde5237ca815e13b0e2a88b",READ_SOCKET:"e46fdcb42cae43a7e6f49213f150fa8e",LOGIN_FAILED:"87df9f73fb8b93629ae8a08822cfcf77",SOCKET_FAILED:"3a74221d64cf853a5c3ca65c3c3339eb",SHARED_TABS:"22557ca0a2caca6bae43f1932f088d47",LOAD_RESOURCE:"a5707a9d6695fc50e257b51aee9ec03b",RENDER_HOME_PAGE:"dd25761ed961c46f4a0725abf6325b3a",SEND_MESSAGE_API:"65d0f06861e011436277b54e32e0e702",SEND_MESSAGE_CONSUMING:"b2bad090fbb5b6eb526af0423326ba91",FETCH_CONV_API:"00f7d4cb0b968ed35a91ae83c0346fe1",FETCH_MESSAGE_API:"b7b04ad90caccf19961c3dcdf7063294",RENDER_MESSAGE_LIST_FROM_CONV:"7ce993bd22dee11001514ad2b8e760bf",FETCH_TRANSLATION_ASYNC:"961879cce46dc871cea546c825daf31d",FETCH_TRANSLATION_SYNC:"9f3d370e38d01f43e13f3e7465c1734c"};var oe={HTML_LOADED:"HTML_LOADED",STATIC_LOADED:"STATIC_LOADED",APP_PREPARED:"APP_PREPARED",LOGIN_API_RESPONSED:"LOGIN_API_RESPONSED",APP_RENDERING:"APP_RENDERING",RENDER_CONVERSATION_LIST:"RENDER_CONVERSATION_LIST",RENDER_MESSAGE_LIST:"RENDER_MESSAGE_LIST",RENDER_WELCOME_PAGE:"RENDER_WELCOME_PAGE",START_SEND_MESSAGE:"START_SEND_MESSAGE",START_HANDLE_RESPONSE:"START_HANDLE_RESPONSE"},ne={WELCOME_PAGE:"WELCOME_PAGE",MESSAGE_LIST:"MESSAGE_LIST",CONVERSATION_LIST:"CONVERSATION_LIST",APP:"APP"},ae={TYPE_ERROR:"TypeError",RANGE_ERROR:"RangeError",SYNTAX_ERROR:"SyntaxError",REFERENCE_ERROR:"ReferenceError",SAGA_ERROR:"Saga Error",ERROR_BOUNDARY:"Error Boundary",PRELOAD_ERROR:"Preload Error",SOCKET_LOGIN_FAILED:"Socket Login Failed",LOGIN_ERROR:"Login Error",PARAMETER_ERROR:"Parameter Error",API_UNCAUGHT_ERROR:"Api Uncaught Error",API_CLIENT_ERROR:"Api Client Error",FETCH_CONV_ERROR:"Fetch Conversation Error",FETCH_SERVE_TODAY_CONV_ERROR:"Fetch Serve Today Conversation Error"},se={TYPE_ERROR:"type_error",RANGE_ERROR:"range_error",SYNTAX_ERROR:"syntax_error",REFERENCE_ERROR:"reference_error",ERROR_BOUNDARY:"error_boundary",PRELOAD_ERROR:"preload_error",SOCKET_LOGIN_FAILED:"socket_login_failed",LOGIN_ERROR:"login_error",PARAMETER_ERROR:"parameter_error",API_CLIENT_ERROR:"api_client_error",API_UNCAUGHT_ERROR:"api_uncaught_error",FETCH_CONV_ERROR:"fetch_conversation_error",FETCH_SERVE_TODAY_CONV_ERROR:"fetch_serve_today_conversation_error"},{TYPE_ERROR:ie,RANGE_ERROR:ce,SYNTAX_ERROR:le,REFERENCE_ERROR:ue}=ae;se.TYPE_ERROR,se.RANGE_ERROR,se.SYNTAX_ERROR,se.REFERENCE_ERROR;class de{reportLoadResource(){we(ye.LOAD_RESOURCE,0)}reportRenderHomePage(e){we(ye.RENDER_HOME_PAGE,0,{isSidebar:e})}reportShowHomePage(e){if(window.__MINICHAT_ENTRY_CLICKED__){var{startTime:t,fromPage:r}=window.__MINICHAT_ENTRY_CLICKED__,o=Date.now()-t;window.__MINICHAT_ENTRY_CLICKED__=void 0,e?setTimeout((()=>{De(ne.APP,{duration:o,id:ye.SHOW_HOME_PAGE,extra:{isSidebar:e,fromPage:r}})}),1e3):De(ne.APP,{duration:o,id:ye.SHOW_HOME_PAGE,extra:{isSidebar:e,fromPage:r}})}}reportWhetherPrefetchUserInfo(){window.__CHATEASY_LOCALE__?we(ye.PRE_FETCH_USER_INFO,0):we(ye.NON_PRE_FETCH_USER_INFO,0)}reportShowMinichat(){var e=Date.now()-window.__START_MINICHAT__;De(ne.APP,{duration:e,id:ye.SHOW_WEBCHAT})}reportFetchTranslationAsync(){we(ye.FETCH_TRANSLATION_ASYNC,0)}reportFetchTranslationSync(){we(ye.FETCH_TRANSLATION_SYNC,0)}reportUserSettingApi(e){ye.USER_SETTING&&we(ye.USER_SETTING,e)}newReportSendMessagesApi(e){ye.SEND_MESSAGES&&we(ye.SEND_MESSAGES,e)}reportSendMessageApi(e){we(ye.SEND_MESSAGE_API,0,{value:e})}reportSendMessageConsuming(e){var t,r,o=null===(t=(performance.getEntriesByName("".concat(oe.START_SEND_MESSAGE,"_").concat(null===(r=JSON.parse(e).content)||void 0===r?void 0:r.uid),"mark")||[])[0])||void 0===t?void 0:t.startTime,n=Date.now()-Math.round(performance.timeOrigin+o);De(ne.APP,{duration:n,id:ye.SEND_MESSAGE_CONSUMING})}reportFetchConvApi({value:e,resource:t}){we(ye.FETCH_CONV_API,0,{value:e,resource:t})}reportFetchMessageApi(e){we(ye.FETCH_MESSAGE_API,0,{value:e})}reportRenderMessageListFromConv(e){window.__CLICK_CONV__&&(De(ne.APP,{duration:Date.now()-window.__CLICK_CONV__,id:ye.RENDER_MESSAGE_LIST_FROM_CONV,extra:{isFirstRender:e}}),window.__CLICK_CONV__=null)}reportVideoUpload(e,t={}){we(ye.VIDEO_UPLOAD,performance.now()-e,t)}reportVideoServiceDone(e,t={}){var r=performance.getEntriesByName("REPORT_UPLOAD_".concat(e),"mark")[0];if(r){performance.mark("SERVICE_DONE_".concat(e));var o=performance.getEntriesByName("SERVICE_DONE_".concat(e))[0].startTime-r.startTime;performance.clearMarks("REPORT_UPLOAD_".concat(e)),performance.clearMarks("SERVICE_DONE_".concat(e)),we(ye.SERVICE_DONE,o,t)}}reportMessageSocket(e){var t=+new Date-+e;we(ye.MESSAGE_SOCKET,t)}reportReadSocket(e){we(ye.READ_SOCKET,Date.now()-e)}reportLoginFailed(e){we(ye.LOGIN_FAILED,0,e)}reportSocketFailed(e={}){we(ye.SOCKET_FAILED,0,e)}reportSharedTabs(e){we(ye.SHARED_TABS,e)}reportLoginInHtml(){we(ye.LOGIN_IN_HTML,0)}reportLoginInService(){we(ye.LOGIN_IN_SERVICE,0)}reportFetchTranslationInHtml(){we(ye.TRANSLATION_IN_HTML,0)}reportFetchTranslationInService(){we(ye.TRANSLATION_IN_SERVICE,0)}reportT3OrT4(e){we(e,0)}reportChatbotApiError(){we(ye.REPORT_ERROR,0)}reportAsyncTask(e,t,r={}){we(e,t,r)}reportReceiveChatbotResponse(){we(ye.RECEIVE_CHATBOT_RESPONSE,0)}}var _e,Se=()=>(window.chatReportManager||(window.chatReportManager=new de),window.chatReportManager);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ve,he,fe,ge,Oe=e=>{_e=e},be=!1,Te=location.host.includes("shopee.cn"),me=[],Re=window.requestIdleCallback,ye="live"===(0,a.getRuntimeServer)()?q:Q,Ae=()=>{try{var e=performance.getEntriesByName(oe.HTML_LOADED,"mark")[0].startTime,t=performance.getEntriesByName(oe.STATIC_LOADED,"mark")[0].startTime,r=performance.getEntriesByName(oe.APP_PREPARED,"mark")[0].startTime,o=performance.getEntriesByName(oe.LOGIN_API_RESPONSED,"mark")[0].startTime,n=performance.getEntriesByName(oe.APP_RENDERING,"mark")[0].startTime;me.push({id:ye.LOAD_HTML,duration:window.__INDEX_HTML_LOADED__},{id:ye.LOAD_STATIC,duration:Math.floor(t-e)},{id:ye.APP_PREPARE,duration:Math.floor(r-t)},{id:ye.LOGIN_API,duration:Math.floor(o-r)},{id:ye.LOGIN_SUCCEEDED,duration:Math.floor(n-o)})}catch(e){}},Ce=()=>{try{var e=performance.getEntriesByName("ENTRY_CLICKED","mark")[0].startTime,t=performance.getEntriesByName("CONVERSATION_LIST_MOUNTED","mark")[0].startTime,r=performance.getEntriesByName("CONVERSATION_LIST_MOUNTED","mark")[0].startTime;ye.CONVERSATION_MOUNTED&&e&&t&&me.push({id:ye.CONVERSATION_MOUNTED,duration:Math.floor(t-e)}),ye.CONVERSATION_LOADED&&t&&r&&me.push({id:ye.CONVERSATION_LOADED,duration:Math.floor(r-t)})}catch(e){}},De=(e,t)=>{try{var r,o=null,n=null===(r=performance.getEntriesByName(oe.APP_RENDERING,"mark")[0])||void 0===r?void 0:r.startTime;switch(e){case ne.WELCOME_PAGE:o=performance.getEntriesByName(oe.RENDER_WELCOME_PAGE,"mark")[0].startTime,me.push({id:ye.RENDER_WELCOME_PAGE,duration:Math.floor(o-n)});break;case ne.MESSAGE_LIST:o=performance.getEntriesByName(oe.RENDER_MESSAGE_LIST,"mark")[0].startTime,me.push({id:ye.RENDER_MESSAGE_LIST,duration:Math.floor(o-n)});break;case ne.CONVERSATION_LIST:o=performance.getEntriesByName(oe.RENDER_CONVERSATION_LIST,"mark")[0].startTime,me.push({id:ye.RENDER_CONVERSATION_LIST,duration:Math.floor(o-n)})}me.push(t),Re(Pe,{timeout:2e3})}catch(e){}},we=(e,t,r={})=>{try{me.push({id:e,duration:t,extra:r}),Re(Pe,{timeout:2e3})}catch(e){}};function Pe(e){for(;(e.timeRemaining()>5||e.didTimeout)&&me.length;){var{id:t,duration:r,extra:o}=me.shift();t&&Ue(t,r,o),"live"!==(0,a.getRuntimeServer)()&&te[t]&&console.log("|-- 上报阶段: ",te[t],", 耗时为: ".concat(r),", 数据: ",o),re[t]&&console.log("|-- 新加上报点上报阶段: ",re[t],", 耗时为: ".concat(r,", 数据："),o)}me.length&&Re(Pe,{timeout:2e3})}var Ne,Ie=()=>{if(!be){var e=(0,a.getRuntimeServer)(),t="live"===e,r=(0,a.getRuntimeRegion)(),o=(0,a.getRuntimeVersion)();ve=new J.MdapSdk({app_name:"minichat",secret_key:t?"b23651c629e54c7bc1c9a743f25dbb5825cb1ed4e7bb7f8a78cd788dfc769127":"2b74d02be173856bde260473166da16b83fcc18d18057ce8b4a73eab5f1c7280",environment:e,region:r,app_version:o,sample:.6}),he=new($())({path:[/[\\/]webchat[\\/]api[\\/].*[\\/](login|(conversations[\\/](\d+)[\\/]messages)|conversations|orders_by_buyer_id|vouchers|products|items|(offer[\\/]given)|read|(video[\\/](in_whitelist|preupload|report_upload|upload_status)))[\\?]/,"/webchat/api/v1.2/messages","webchat/api/v1.2/mini/messages",/[\\/]api[\\/]tsp[\\/].*/]}),fe=new(ee())({path:[/.*[\\/]chateasy[\\/].*\.(js|css)/]}),ge=new J.CustomPlugin({}),ve.use(he),ve.use(fe),ve.use(ge),be=!0}};function Ue(e,t,r){be||Ie();var o={point_id:e,data:{userType:_e,localOrCn:void 0!==Ne?Ne:Ne=Te&&"CN"!==(0,a.getRuntimeRegion)().toUpperCase()?"cn":"local",chatHost:"pcmall",hasSandbox:String(!!window.__MMF_MODULE_BY_SANDBOX__)}};t&&(o=Ee(Ee({},o),{},{duration:t})),r&&(o.data=Ee(Ee({},o.data),r)),ge.sendData(o)}function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je=(0,a.getRuntimeVersion)(),He=function(){var e=A((function*(){var e=null;try{e=a.LS.getItem("mini-session",!0)}catch(t){e=null}return e||(e=yield(0,a.getItem)("mini-session")),e}));return function(){return e.apply(this,arguments)}}(),ke={404:"Resource not found",452:"Tempory Error",500:"Internal server error",502:"Bad Gateway"},Fe=90309999;function Ge(e){return Be.apply(this,arguments)}function Be(){return Be=A((function*({url:e,server:t,subServer:r,version:o="v1.2",parent:n,parentId:s,resource:i,id:c,suffix:l,method:u="GET",credentials:d="include",extension:_,params:S={},payload:p,headers:E={},namespace:v="mini",fetcher:h}){var f=(e,t)=>[e,Object.entries(t).filter((([e,t])=>t||0===t)).map((([e,t])=>"".concat(e,"=").concat(encodeURIComponent(t)))).join("&")].filter(Boolean).join("?"),g=function(){var g=A((function*(g){g||(g=yield He());var O,b,T,{token:m,user:{type:R}={}}=g||{},y=0;if("subaccount"===R){var A=(()=>{if("sc"===l)return c;if("auth"===i)return s;if(S.shop_id)return S.shop_id;if(p)try{return JSON.parse(p).shop_id}catch(e){}})();T=yield I.getRegion(!0,A)}else T=(0,a.getRuntimeRegion)().toUpperCase();var C=m&&"include"===d||!t,P=C?{Authorization:"Bearer ".concat(m),"x-shop-region":T}:{};!t&&(t=(0,a.getApiServer)());var N=(()=>{var e=D().get("SPC_CDS_CHAT");if(!e){e=(0,w.v4)();var t=window.location.host.split(".");["seller","banhang"].includes(t[0])&&t.shift(),D().set("SPC_CDS_CHAT",e,{domain:".".concat(t.join("."))})}return e})();if(e){b=e;var U={};N&&(U.SPC_CDS_CHAT=N),b=f(b,U)}else{var L=["https:/",t,r,o,v,n,s,i,c,l].filter(Boolean).join("/"),M=_?"".concat(L,".").concat(_):L;((e,{session:t,shouldAddHeader:r,region:o,spcToken:n})=>{var a,s=null==t||null===(a=t.user)||void 0===a?void 0:a.uid;s&&(e._uid=s),je&&(e._v=je);var i=D().get("CTOKEN");i&&(e.csrf_token=i),n&&(e.SPC_CDS_CHAT=n),r&&(e["x-shop-region"]=o),e._api_source="pcmall"})(S,{session:g,shouldAddHeader:C,region:T,spcToken:N}),b=f(M,S)}try{W({uri:b,id:c,parentId:s});var j,k=Date.now(),F={method:u,credentials:d,headers:Me(Me({},P),E),body:p},G=h||H,Y=yield G(b,F);if(y="number"==typeof Y.status?Y.status:Y.__raw.status,h&&200===y&&p){var q=Se();null==q||q.reportSendMessageConsuming(p)}if(h?Y.error===Fe?x(y=499,{message:"need captcha",errcode:y,data:null}):y=Y.__raw.status:y=Y.status,[200,204].includes(y)&&"report_upload"===i&&p){var{vid:Q}=JSON.parse(p);performance.mark("REPORT_UPLOAD_".concat(Q))}if(B(y),200===y){var J=null;try{J=yield Y.json()}catch(e){J=Y}var X=J instanceof Array?{[i]:J}:J;return h&&p&&(O=JSON.parse(p).request_id,(0,a.setItem)(O,k)),X}if(204===y)return null;switch(y){case 404:case 452:case 500:case 502:j={message:ke[y]};break;default:if(h)try{var $;j=yield K(null==Y||null===($=Y.__raw)||void 0===$?void 0:$.body)}catch(e){j={message:"Server Error"}}else j=yield Y.json()}V(y,j,{uri:b,resource:i})}catch(e){z(y,e)}}));return function(e){return g.apply(this,arguments)}}();return g(window.__WEBCHAT_SESSION__)})),Be.apply(this,arguments)}var xe=null,Ve=e=>{e&&(xe=e)},We=null,ze=({data:e,operation:t=a.TrackerOperation.CLICK,page:r,shopId:o,section:n="",type:s=""})=>{try{We||(We=window.BITrack?window.BITrack:window.trackingSDK);var i=(({data:e,operation:t,page:r,shopId:o,section:n,type:a})=>{var{shop_id:s="",role:i="",id:c=""}=xe||{};return{operation:t,page_section:n,target_type:a,page_type:r||"minichat_page",data:Object.assign({},{shopid:s||o,account_type:i||"shopee_user",account_id:c},e)}})({data:e,operation:t,page:r,shopId:o,section:n,type:s});We({data:{type:"v3",timestamp:Date.now(),info:i}})}catch(e){console.warn("Tracker error",e)}},Ke=new(S(187).EventEmitter),Ye=S(383);function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Je=(e,t,r)=>new Ye.schema.Entity(e,Qe({},t),Qe({},r)),Xe=Je("users"),$e=Je("affiliate"),Ze=Je("messages"),et=Je("conversations"),tt=Je("orders"),rt=Je("products"),ot=Je("offers"),nt=Je("stickers"),at=Je("shops"),st=Je("messageShortcuts"),it=Je("rateCards"),ct=Je("agentConversations"),lt=Je("contacts",{},{idAttribute:"account_id"}),ut=Je("vouchers"),dt={users:Xe,affiliate:$e,messages:Ze,conversations:et,orders:tt,offers:ot,products:rt,stickers:nt,shops:at,messageShortcuts:st,rateCards:it,agentConversations:ct,contacts:lt,vouchers:ut};const _t=(e,t)=>{var r=dt[e]||Je(e);return t instanceof Array?(0,Ye.normalize)(t,[r]):(0,Ye.normalize)(t,r)};var St,pt=S(944),Et=[];St=[202,215];var vt="https://seller.shopee.sg/api/tsp";"br"===(0,a.getRuntimeRegion)()&&(vt="https://seller.shopee.com.br/api/tsp"),"live"!==(0,a.getRuntimeServer)()&&(vt+="/nonlive");var ht=(e,t)=>{var r=St.includes(e)?"c":"r",o=(t||"").toLocaleLowerCase(),n="".concat((0,a.getCDNUrl)(),"shopee-seller-live-sg/tsp/api/").concat(r,"_").concat(e,"_").concat(o,".json");return L()(n).then(function(){var e=A((function*(e){return yield e.json()}));return function(t){return e.apply(this,arguments)}}())},ft=e=>{var t="".concat(vt,"/init?language=").concat(e,"&collections=202%3B215");return L()(t).then(function(){var e=A((function*(e){return yield e.json()}));return function(t){return e.apply(this,arguments)}}()).catch((e=>{}))};function*gt({locale:e}){var t={},r=yield(0,pt.call)(ft,e),o=null==r?void 0:r.translations;if((0,a.checkEmptyObject)(o)||(0,a.checkEmptyObject)(o.collection)||Object.keys(o.collection).forEach((e=>{t=Object.assign(t,o.collection[e])})),(0,a.checkEmptyObject)(t)){var n=[];St.concat(Et).forEach((t=>{n.push(ht(t,e))})),(yield(0,pt.all)(n)).forEach((e=>{Object.assign(t,e)}))}return t}})(),p})(),e.exports=o(r(58518),r(29494),r(36808),r(67429),r(94301),r(44900),r(59065),r(67677),r(58397),r(82677),r(34857))},96961:function(e,t,r){"use strict";e.exports=r(27830)},78232:function(e,t,r){var o;o=(e,t,r,o,n)=>(()=>{"use strict";var a={383:t=>{t.exports=e},975:e=>{e.exports=t},511:e=>{e.exports=o},644:e=>{e.exports=n},855:e=>{e.exports=r}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return a[e](r,r.exports,i),r.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{i.r(c),i.d(c,{activeListTabSelector:()=>d,allConversationIdsSelector:()=>G,allTotalConversationsCountMapSelector:()=>ct,allTotalConversationsCountSelector:()=>it,assistantHighlightSelector:()=>v,autoRepliedHighlightConvIdSelector:()=>f,autoRepliedHighlightSelector:()=>p,autoTranslationStatusSelector:()=>Rt,bannerInfoSelector:()=>Q,bizIdSelector:()=>ge,bizIdsSelector:()=>Te,changeChatWithTypeSelector:()=>Oe,chatWithIhsSelector:()=>ee,chatWithTypeListSelector:()=>be,chatWithTypeSelector:()=>K,chatbotConversationIdSelector:()=>S,chatbotConversationSelector:()=>M,conversationBeenDeletedSelector:()=>Qe,conversationDirectionSelector:()=>ae,conversationHttpStatusSelector:()=>ne,conversationIdsSelector:()=>k,conversationLastMessageSelector:()=>Vt,conversationsSelector:()=>se,curConvsMessageSelector:()=>$t,curMessagesRelatedSelector:()=>Bt,currentAffiliateSelector:()=>Be,currentBuyerIdSelector:()=>me,currentBuyerSelector:()=>Ge,currentBuyerShopIdSelector:()=>xe,currentBuyerShopSelector:()=>Ve,currentConversationBuyerIdSelectors:()=>Ie,currentConversationCanReadSelector:()=>oe,currentConversationHasLoadingSelector:()=>pt,currentConversationIdSelector:()=>z,currentConversationMaxOptionHideTimeSelectors:()=>Le,currentConversationSelector:()=>ve,currentConversationShopIdSelectors:()=>Pe,currentConversationShopNameSelectors:()=>we,currentConversationShopRegionSelectors:()=>De,currentConversationShopSelectors:()=>Ce,currentConversationStatusSelectors:()=>Ue,currentConversationToNameSelector:()=>Je,currentConversationTranslationAccessSelector:()=>Ye,currentPendingOffersCountSelector:()=>rt,currentSellerAccountIdSelector:()=>at,currentShopIdSelector:()=>Fe,currentShopIsManagedByShopeeSelector:()=>Ne,defaultCount:()=>st,degradeConversationIdsSelector:()=>de,feedbackSelector:()=>nr,filterSelector:()=>_e,filteredConversationsSelector:()=>Se,getConversation:()=>Me,getConversationBizId:()=>je,getConversationPendingOffersCountSelector:()=>ot,getConversationShopId:()=>He,getConversationShopRegion:()=>nt,getConversations:()=>ke,getConversationsSelector:()=>N,getConvsMessagesRelatedSelector:()=>xt,getMessageSelector:()=>Gt,hasPinFlagSelector:()=>T,ihcsEntitySelector:()=>J,ihsDisableTextSelector:()=>re,inlocationSelector:()=>V,isAffiliateChatRoomSelector:()=>Ae,isBuyerChatRoomSelector:()=>Re,isChatAvailiableSelector:()=>q,isDriverSelector:()=>Y,isNavigateToUnreadMessageSelector:()=>Ze,isOfficialChatSelector:()=>he,keywordSelector:()=>We,lastBuyerSendMessageIdSelector:()=>rr,listsHashSelector:()=>qe,mediaListSelector:()=>or,messagesRelatedMapSelector:()=>jt,missedReadNoticeCountSelector:()=>x,navigateToUnreadMessageIdSelector:()=>et,noticesCountSelector:()=>sr,pinnedConversationIdsSelector:()=>F,readRequestIdsSelector:()=>B,reconnectFlagSelector:()=>ar,redirectionInfoSelector:()=>Et,replyToMessageSelector:()=>tr,resultsSelector:()=>ze,reverseMessagesSelector:()=>qt,rrButtonSelector:()=>ft,searchConversationHttpStatusSelector:()=>Ke,selectVideoInfoByKey:()=>kt,selectVideoInfoKeyByVid:()=>Ft,serveTodayAllConversationIdsSelector:()=>P,serveTodayAutoRepliedConversationIdsSelector:()=>D,serveTodayAutoRepliedConversationsSelector:()=>U,serveTodayConversationHttpStatusSelector:()=>m,serveTodayConversationsSelector:()=>j,serveTodayFolderStatusSelector:()=>_,serveTodayManuallyRepliedConversationIdsSelector:()=>w,serveTodayManuallyRepliedConversationsSelector:()=>L,serveTodayOnlyConversationsSelector:()=>H,serveTodayPinnedConversationIdsSelector:()=>A,serveTodayUnrepliedConversationIdsSelector:()=>C,serveTodayUnrepliedConversationsSelector:()=>I,serveTodayWaitingUpdatedRecordsSelector:()=>b,shopAccessSelector:()=>$e,shopIsIhcsSelector:()=>X,showAssistantAlertSelector:()=>g,showAssistantHighlightSelector:()=>mt,showAutoReplyHighlightSelector:()=>bt,showChatbotConversationSelector:()=>Ee,showFrozenTipSelector:()=>_t,showLoadingMessagesMapSelector:()=>St,showOnboardingAnimationSelector:()=>Ot,showOnboardingAnimationStatusSelector:()=>O,showUnrepliedHighlightSelector:()=>Tt,showWorkStationSelector:()=>ye,singleConversationIdsSelector:()=>y,singleConversationMarkInfoSelector:()=>dt,singleConversationStateSelector:()=>R,sortedConversationsSelector:()=>pe,subAccountBizIdSelector:()=>fe,subAccountToIsIhcsSelector:()=>te,toShopIsIhcsSelector:()=>$,toShopisChoiceOrIsIhcsSelector:()=>ht,toUserChattingWithIhsSelector:()=>Z,totalConversationsCountSelector:()=>lt,twoTabsAllConversationIdsSelector:()=>vt,unrepliedHighlightSelector:()=>E,unrepliedHightlightConvIdSelector:()=>h,updateTimeNowSelector:()=>W});var e=i(383),t=i(975),r=i(855),o=i(511),n=i(644);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.serveToday)||{}},d=(0,t.createSelector)(u,(e=>e.activeListTab)),_=(0,t.createSelector)(u,(e=>e.folderStatus)),S=(0,t.createSelector)(u,(e=>e.chatbotConversationId||0)),p=(0,t.createSelector)(u,(e=>{var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.autoRepliedHighlightStatus)||!1})),E=(0,t.createSelector)(u,(e=>{var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.unrepliedHighlightStatus)||!1})),v=(0,t.createSelector)(u,(e=>{var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.assistantHighlightStatus)||!1})),h=(0,t.createSelector)(u,(e=>{var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.unrepliedHighlightConvId)||0})),f=(0,t.createSelector)(u,(e=>{var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.autoRepliedHighlightConvId)||0})),g=(0,t.createSelector)(u,o.chatbotToggleOpenSelector,o.onboardingWhitelistSelector,((e,t,r)=>{var o;return t&&r||(null===(o=e.highlightStatus)||void 0===o?void 0:o.showAssistantAlert)})),O=(0,t.createSelector)(u,(e=>{var t;return(null===(t=e.highlightStatus)||void 0===t?void 0:t.showOnboardingAnimationStatus)||!1})),b=(0,t.createSelector)(u,(e=>e.waitingUpdatedRecords||{})),T=(0,t.createSelector)(u,(e=>e.hasPinFlag||!1)),m=(0,t.createSelector)(u,(e=>e.status||"")),R=e=>(0,t.createSelector)(u,(t=>t[e]||{})),y=e=>(0,t.createSelector)(R(e),(e=>Array.from(new Set(e.conversationIds||[])))),A=(0,t.createSelector)(u,(e=>Array.from(new Set((e[r.ServeTodayTab.PINNED]||{}).conversationIds||[])))),C=(0,t.createSelector)(u,(e=>Array.from(new Set((e[r.ServeTodayTab.UNREPLIED]||{}).conversationIds||[])))),D=(0,t.createSelector)(u,(e=>Array.from(new Set((e[r.ServeTodayTab.AUTOREPLY]||{}).conversationIds||[])))),w=(0,t.createSelector)(u,(e=>Array.from(new Set((e[r.ServeTodayTab.MANUALREPLY]||{}).conversationIds||[])))),P=(0,t.createSelector)(A,C,D,w,((e,t,r,o)=>[...e,...t,...r,...o])),N=r=>(0,t.createSelector)(o.conversationEntitiesSelector,y(r),((t,r)=>((0,e.denormalize)(r,[n.conversationSchema],{conversations:t})||[]).filter(Boolean))),I=(0,t.createSelector)(N(r.ServeTodayTab.UNREPLIED),(e=>(e.sort(((e,t)=>parseInt(t.latest_message_id)-parseInt(e.latest_message_id))),e))),U=(0,t.createSelector)(N(r.ServeTodayTab.AUTOREPLY),(e=>e.sort(((e,t)=>parseInt(t.latest_message_id)-parseInt(e.latest_message_id))))),L=(0,t.createSelector)(N(r.ServeTodayTab.MANUALREPLY),(e=>e.sort(((e,t)=>parseInt(t.latest_message_id)-parseInt(e.latest_message_id))))),M=(0,t.createSelector)(o.conversationEntitiesSelector,S,((t,r)=>(0,e.denormalize)(r,n.conversationSchema,{conversations:t})||{})),j=(0,t.createSelector)(M,_,N(r.ServeTodayTab.PINNED),I,U,L,o.showChatServingFeatureSelector,o.chatbotToggleOpenSelector,((e,t,o,n,a,s,i,c)=>{var u=[],d={[r.ServeTodayTab.PINNED]:o,[r.ServeTodayTab.UNREPLIED]:n,[r.ServeTodayTab.AUTOREPLY]:a,[r.ServeTodayTab.MANUALREPLY]:s},_=o.map((e=>e.id))||[];return(c?r.ServeTodayFolders:r.ServeTodayFolders.filter((e=>e!==r.ServeTodayTab.AUTOREPLY))).forEach((e=>{var o=d[e];e!==r.ServeTodayTab.PINNED&&(o=o.filter((e=>!_.includes(e.id))),e===r.ServeTodayTab.AUTOREPLY&&(o=o.map((e=>l(l({},e),{},{isAutoReply:!0}))))),o.length&&(u=t[e]?u.concat([{key:e,id:"".concat(e,"Tab")},...o]):u.concat([{key:e,id:"".concat(e,"Tab")}]))})),null!=e&&e.id?[e,...u]:u})),H=(0,t.createSelector)(j,(e=>e.filter((e=>!e.id.includes("Tab"))))),k=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.conversationIds)||[]},F=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.pinnedConversationIds)||[]},G=(0,t.createSelector)(k,F,((e,t)=>{var r=e.filter((e=>!t.includes(e)));return t.concat(r)})),B=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.readRequestIds)||[]},x=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.missedReadNoticeCount)||0},V=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.inlocation)||!1},W=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.updateTimeNow)||"0"},z=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.currentConversationId)||null},K=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.chatWithType)||r.ChatWithTypeEnum.Buyer},Y=(0,t.createSelector)(K,(e=>e===r.ChatWithTypeEnum.Driver)),q=e=>{var t;return null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.isChatAvailiable},Q=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.topBannerInfo)||{}},J=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.ihcsEntity)||{}},X=(0,t.createSelector)(J,(e=>e.shop_is_ihcs)),$=(0,t.createSelector)(J,(e=>e.to_shop_is_ihcs)),Z=(0,t.createSelector)(J,(e=>e.to_user_chatting_with_ihs)),ee=(0,t.createSelector)(X,Z,((e,t)=>!e&&t)),te=(0,t.createSelector)(o.isSubAccountSelector,$,((e,t)=>e&&t)),re=(0,t.createSelector)(X,ee,te,((e,t,r)=>{var o="";return e?o="conversation_detail.input_field.self_is_internal_shop":r?o="conversation_detail.input_field.subaccount_chat_with_internal_shop":t&&(o="conversation_detail.input_field.user_chat_with_ihs"),o})),oe=e=>{var t;return(0,o.judgeUndefined)({defaultValue:!0,value:null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.currentConversationCanRead})},ne=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.status)||""},ae=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.direction)||""},se=(0,t.createSelector)(o.conversationEntitiesSelector,G,((t,r)=>((0,e.denormalize)(r,[n.conversationSchema],{conversations:t})||[]).filter(Boolean))),ie=(0,t.createSelector)(se,z,((e,t)=>e.filter((e=>{var{id:r,unread_count:o}=e;return e&&(o>0||r===t)})))),ce=(0,t.createSelector)(se,(e=>e.filter((e=>e.isPinned)))),le=(0,t.createSelector)(se,(e=>e.filter((e=>e.status&&"closed"===e.status)))),ue=(0,t.createSelector)(se,z,((e,t)=>e.filter((e=>{var{unreplied:r,id:o}=e;return void 0===r||r||!r&&o===t})))),de=(0,t.createSelector)(se,(e=>e.filter((e=>e.lack)).map((e=>e.id))||[])),_e=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.filter)||"All"},Se=(0,t.createSelector)(_e,se,ie,ce,le,ue,((e,t,r,o,n,a)=>({All:t,Unread:r,Pinned:o,Closed:n,Unreplied:a}[e]))),pe=(0,t.createSelector)(Se,F,o.waitingTimeFilterSelector,_e,((e,t,o,n)=>{var a=e.filter((e=>!t.includes(e.id))),s=e.filter((e=>t.includes(e.id)));return a.sort(((e,t)=>parseInt(t.latest_message_id)-parseInt(e.latest_message_id))),s.concat(a).filter((e=>void 0===e.faking&&(null==e?void 0:e.biz_id)!==r.BizIdEnum.Chatbot))})),Ee=(0,t.createSelector)(z,M,((e,t)=>(null==t?void 0:t.id)&&e===(null==t?void 0:t.id))),ve=(0,t.createSelector)(se,j,z,o.isSubAccountSelector,V,o.userEntitiesSelector,o.conversationEntitiesSelector,o.showServingTabSelector,Ee,M,((t,r,o,a,s,i,c,l,u,d)=>{if(u)return d;var _=(l?[...t,...r]:t).find((e=>e.id===o))||{};if(s&&!_.id&&(_=(0,e.denormalize)(o,n.conversationSchema,{conversations:c})||{}),!a&&_.lack){var S=_.to_id,p=(0,e.denormalize)(S,n.userSchema,{users:i})||{},E={to_shop_id:p.shop_id,to_status:p.status,to_name:p.name||"-",to_avatar:p.avatar};return Object.assign(_,E)}return _})),he=(0,t.createSelector)(ve,(e=>{var t;return(null==e||null===(t=e.official_chat)||void 0===t?void 0:t.official_conv_type)===r.OfficialConvType.OFFICIAL_CREDIT||!1})),fe=(0,t.createSelector)(o.conversationEntitiesSelector,z,((t,o)=>{var a=(0,e.denormalize)(o,n.conversationSchema,{conversations:t});return(null==a?void 0:a.biz_id)||r.BizIdEnum.SubAccount})),ge=(0,t.createSelector)(K,o.sellerDriverWhitelistSelector,o.amsFeatureToggleSelector,o.isSubAccountSelector,fe,((e,t,o,n,a)=>n?a:!t&&e===r.ChatWithTypeEnum.Driver||!o&&r.ChatWithTypeEnum.Affiliate?r.ChatWithTypeMap.buyer:r.ChatWithTypeMap[e]||r.BizIdEnum.Buyer)),Oe=(0,t.createSelector)(K,ge,((e,t)=>r.ChatWithTypeMap[e]!==t)),be=(0,t.createSelector)(o.sellerDriverWhitelistSelector,o.amsFeatureToggleSelector,((e,t)=>{var o=[r.ChatWithTypeEnum.Buyer];return e&&o.push(r.ChatWithTypeEnum.Driver),t&&o.push(r.ChatWithTypeEnum.Affiliate),o})),Te=(0,t.createSelector)(be,(e=>e.map((e=>r.ChatWithTypeMap[e])))),me=(0,t.createSelector)(ve,(e=>{var{to_id:t}=e||{};return t||null})),Re=(0,t.createSelector)(o.isSubAccountSelector,K,fe,he,((e,t,o,n)=>(!e&&t===r.ChatWithTypeEnum.Buyer||e&&o===r.BizIdEnum.SubAccount)&&!n)),ye=(0,t.createSelector)(Y,Re,he,((e,t,r)=>e||t&&!r)),Ae=(0,t.createSelector)(o.isSubAccountSelector,K,fe,((e,t,o)=>e?r.subAccountAffiliateBiz.includes(o):t===r.ChatWithTypeEnum.Affiliate)),Ce=(0,t.createSelector)(ve,o.shopsEntitiesSelector,((t,r)=>(0,e.denormalize)(t.shop_id,n.shopSchema,{shops:r})||{})),De=(0,t.createSelector)(Ce,(e=>(null==e?void 0:e.country)||"SG")),we=(0,t.createSelector)(Ce,(e=>(null==e?void 0:e.name)||"SG")),Pe=(0,t.createSelector)(ve,(e=>e.shop_id)),Ne=(0,t.createSelector)(Pe,Ce,((e,t)=>e&&(null==t?void 0:t.managed_by_shopee)||!1)),Ie=(0,t.createSelector)(ve,(e=>e.to_id)),Ue=(0,t.createSelector)(ve,(e=>e.status)),Le=(0,t.createSelector)(ve,(e=>e.max_general_option_hide_time)),Me=r=>(0,t.createSelector)(o.conversationEntitiesSelector,(t=>(0,e.denormalize)(r,n.conversationSchema,{conversations:t})||{})),je=e=>(0,t.createSelector)(Me(e),o.isSubAccountSelector,ge,((e,t,r)=>t?null==e?void 0:e.biz_id:r)),He=e=>(0,t.createSelector)(Me(e),(e=>e.shop_id)),ke=e=>(0,t.createSelector)(se,j,o.showServingTabSelector,((t,r,o)=>{var n=o?[...t,...r]:t;return e.map((e=>n.find((t=>t.id===e)))).filter(Boolean)})),Fe=(0,t.createSelector)(ve,(e=>{var{shop_id:t}=e||{};return t||null})),Ge=(0,t.createSelector)(o.userEntitiesSelector,ve,((t,r)=>r?(0,e.denormalize)(r.to_id,n.userSchema,{users:t}):{})),Be=(0,t.createSelector)(o.affiliateEntitiesSelector,ve,((t,r)=>r?(0,e.denormalize)(r.to_id,n.affiliateSchema,{affiliate:t}):{})),xe=(0,t.createSelector)(ve,(e=>{var{to_shop_id:t}=e||{};return t||null})),Ve=(0,t.createSelector)(xe,o.shopsEntitiesSelector,((t,r)=>(0,e.denormalize)(t,n.shopSchema,{shops:r})||{})),We=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.keyword)||""},ze=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.results)||[]},Ke=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.searchStatus)||""},Ye=(0,t.createSelector)(ve,(e=>e.translationAccess)),qe=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.listsHash)||{}},Qe=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.conversationBeenDeleted)||!1},Je=(0,t.createSelector)(ve,(e=>{var{to_name:t}=e||{};return t})),Xe={hasSCAccess:!0,hasEditOrderAccess:!0,hasViewOrderAccess:!0,hasViewProductAccess:!0,hasEditVoucherAccess:!0,hasViewVoucherAccess:!0,hasViewRrOrderAccess:!0,hasOrderDetailAccess:!0},$e=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.access)||Xe},Ze=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.isNavigateToUnreadMessage)||!1},et=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.navigateToUnreadMessageId)||""},tt=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.pendingOffersCount)||{}},rt=(0,t.createSelector)(ve,tt,((e,t)=>{var{shop_id:r,to_id:o}=e;return t["".concat(r,"_").concat(o)]||0})),ot=e=>(0,t.createSelector)(Me(e),tt,((e,t)=>{var{shop_id:r,to_id:o}=e;return t["".concat(r,"_").concat(o)]||0})),nt=r=>(0,t.createSelector)(He(r),o.shopsEntitiesSelector,((t,r)=>{var o=(0,e.denormalize)(t,n.shopSchema,{shops:r})||{};return(null==o?void 0:o.country)||"SG"})),at=(0,t.createSelector)(o.isSubAccountSelector,o.currentUserIdSelector,Ce,((e,t,r)=>e?r.user_id:t)),st={unrepliedCount:0,duesoonCount:0,overdueCount:0,pinnedCount:0,unreadCount:0,serveTodayUnrepliedCount:0,serveTodayDuesoonCount:0,serveTodayOverdueCount:0,serveTodayPinnedCount:0,serveTodayBotRepliedCount:0,serveTodayManualRepliedCount:0},it=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.allTotalConversationsCount)||{}},ct=(0,t.createSelector)(be,it,((e,t)=>e.reduce(((e,r)=>{var o,n,a=(null===(o=t["with_".concat(r,"_attribute")])||void 0===o?void 0:o.attributes)||{},s=(null===(n=t["with_".concat(r,"_attribute")])||void 0===n?void 0:n.serving_today_attributions)||{},{total_unreplied_conv_count:i,total_due_soon_conv_count:c,total_over_due_conv_count:l,total_pinned_conv_count:u,total_unread_conv_count:d}=a,{total_unreplied_conv_count:_,total_due_soon_conv_count:S,total_over_due_conv_count:p,total_pinned_conv_count:E,total_bot_replied_count:v,total_manual_replied_count:h,total_unread_conv_count:f}=s,g={unrepliedCount:i,duesoonCount:c,overdueCount:l,pinnedCount:u,unreadCount:d,serveTodayUnrepliedCount:_,serveTodayDuesoonCount:S,serveTodayOverdueCount:p,serveTodayPinnedCount:E,serveTodayBotRepliedCount:v,serveTodayManualRepliedCount:h,serveTodayUnreadCount:f};return e[r]=g||st,e}),{}))),lt=(0,t.createSelector)(K,ct,((e,t)=>t[e]||{})),ut=e=>{var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.conversationMark)||{}},dt=e=>(0,t.createSelector)(ut,(t=>t[e])),_t=(0,t.createSelector)(o.shopTranslationSettingsSelector,o.isSubAccountSelector,Fe,o.currentUserShopIdSelector,((e,t,r,o)=>{var n=t?r:o,{userStatus:a}=e[n]||{};return"frozen"===a})),St=e=>{var t;return null===(t=e.conversationReducer)||void 0===t?void 0:t.showLoadingMessagesMap},pt=(0,t.createSelector)(z,St,((e,t)=>{var r,o,n=t&&t[e],a=Object.entries(n||{})||[],s=a.some((([e,t])=>null==t?void 0:t.showLoading));return a.forEach((([e,t],n)=>{var{startTime:a}=t;(0===n||a<r)&&(r=a,o=t.isSend)})),{hasLoading:s,isSend:o,earliestStartTime:r}})),Et=e=>{var t;return null===(t=e.conversationReducer)||void 0===t?void 0:t.redirectionInfo},vt=(0,t.createSelector)(o.showServingTabSelector,G,P,((e,t,r)=>e?[...t,...r]:t)),ht=(0,t.createSelector)(ve,o.isSubAccountSelector,$,((e,t,r)=>{var{choice_entity:{to_shop_is_choice:o}={}}=e||{};return o||r&&!t})),ft=e=>{var t;return null===(t=e.conversationReducer)||void 0===t?void 0:t.clickable},gt=(0,t.createSelector)(o.chatbotToggleOpenSelector,o.onboardingNewbieCompleteSelector,o.onboardingWhitelistSelector,((e,t,r)=>e&&!t&&r)),Ot=(0,t.createSelector)(o.chatbotToggleOpenSelector,o.onboardingNewbieCompleteSelector,Ee,o.onboardingWhitelistSelector,O,((e,t,r,o,n)=>(e||!e&&r)&&o&&!t&&n)),bt=(0,t.createSelector)(gt,o.newbieSelector,Ot,v,f,((e,t,o,n,a)=>e&&!!(0,r.checkAutoReplyHighlightGuide)(t)&&!o&&!n&&a)),Tt=(0,t.createSelector)(gt,o.newbieSelector,Ot,v,f,h,E,((e,t,o,n,a,s,i)=>e&&!!(0,r.checkAutoReplyHighlightGuide)(t)&&!o&&!n&&!a&&s||i)),mt=(0,t.createSelector)(o.newbieSelector,Ot,v,o.chatbotToggleOpenSelector,((e,t,o,n)=>!!(0,r.checkAssistantHighlightGuide)(e)&&!t&&o&&!n)),Rt=e=>(0,t.createSelector)(o.shopTranslationSettingsSelector,ge,((t,o)=>{var{autoTranslationStatus:n}=t[e]||{};return o===r.BizIdEnum.Buyer||o===r.BizIdEnum.SubAccount?n:r.SwitchStatus.ENABLED}));function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ct,{MSG_TYPE_OFFER:Dt,MSG_TYPE_ORDER:wt,MSG_TYPE_PRODUCT:Pt,MSG_TYPE_FAQ_UNSUPPORTED:Nt,MSG_TYPE_FAQ_LIVEAGENT_PROMPT:It,MSG_TYPE_RATE_CARD:Ut,MSG_TYPE_FAQ_BOT_PRODUCT:Lt}=r.MessageTypes,Mt=[wt,Pt,Lt],jt=(0,t.createSelector)((e=>e),(e=>(e.messageReducer||{}).messagesRelatedMap||{})),Ht=e=>{var t;return(null===(t=e.messageReducer)||void 0===t?void 0:t.videoMap)||{}},kt=e=>(0,t.createSelector)(Ht,(t=>JSON.parse(JSON.stringify(t[e]||{})))),Ft=e=>(0,t.createSelector)(Ht,(t=>Object.keys(t).find((r=>t[r].vid===e)))),Gt=r=>(0,t.createSelector)(o.messageEntitiesSelector,(t=>(0,e.denormalize)(r,n.messageSchema,{messages:t}))),Bt=(0,t.createSelector)(z,jt,((e,t)=>t[e]||{all:[]})),xt=e=>(0,t.createSelector)(jt,(t=>t[e]||{all:[],sending:[],failed:[]})),Vt=(Ct=e=>(0,t.createSelector)(xt(e),Me(e),o.messageEntitiesSelector,((e,t,r)=>(0,o.getConversationLastMessage)(e,t,r))),function(){var e=Array.prototype.slice.call(arguments);return e in(Ct.memoize=Ct.memoize||{})?Ct.memoize[e]:Ct.memoize[e]=Ct.apply(this,e)}),Wt=(0,t.createSelector)(Bt,(e=>{var t=[...e.all||[]];return e.securityTipsMessageId&&t.push(e.securityTipsMessageId),t})),zt=(0,t.createSelector)(Bt,(e=>e.sending||[])),Kt=(0,t.createSelector)(Bt,(e=>e.failed||[])),Yt=(0,t.createSelector)(o.messageEntitiesSelector,Wt,((t,r)=>((0,e.denormalize)(r,[n.messageSchema],{messages:t})||[]).filter(Boolean))),qt=(0,t.createSelector)(Yt,(e=>e.reverse())),Qt=(0,t.createSelector)(ve,qt,((e,t)=>e?t.filter(Boolean).reduce(((e,t)=>{var{type:r,source_type:o,source_content:n,content:a}=t;if(!o||r===Dt||[-1,0].includes(n["".concat(o,"_id")]))return e;if(Mt.includes(r)&&n){var s="".concat(r,"_id");if(a[s]===n[s])return e}var{lastSourceMessage:i,sourceList:c}=e;if(!c.length)return{sourceList:c.concat(t),lastSourceMessage:t};if(o===Pt){var l=null==n?void 0:n.product_id,u=i.source_content&&i.source_content.product_id;if(!l||u===l)return e}else if(o===wt){var d=null==n?void 0:n.order_id,_=i.source_content&&i.source_content.order_id;if(!d||[-1,0,_].includes(d))return e}return{sourceList:c.concat(t),lastSourceMessage:t}}),{sourceList:[],lastSourceMessage:null}).sourceList:[])),Jt=(0,t.createSelector)(Qt,(e=>e.map((e=>e.id)))),Xt=(0,t.createSelector)(o.entitiesSelector,Yt,((t,r)=>{var o=r.filter((e=>e&&e.type===Dt)).map((e=>e.content.offer_id));return(0,e.denormalize)(o,[n.offerSchema],t)})),$t=(0,t.createSelector)(qt,Jt,zt,Kt,ve,o.rateCardEntitiesSelector,Xt,((e,t,o,n,a,s,i)=>a?e.filter((e=>{if(!e)return!1;var{content:t,type:r}=e;return!(![Nt,It].includes(r)&&(!t||t&&0===Object.keys(t).length))})).map((e=>{var a=o.includes(e.id)?r.MessageSendStatus.SENDING:n.includes(e.id)?r.MessageSendStatus.FAILED:e.send_status||null,c=t.includes(e.id),l=Object.assign({},e,{send_status:a,hasMessageSource:c}),{type:u,content:d={},message_option:_}=l;switch(u){case Dt:var S=i.find((e=>e&&e.id===d.offer_id));l=Object.assign({},l,{textContent:S});break;case Ut:var p=s[d.card_id];p&&(l=Object.assign({},l,{textContent:p}))}return(0,r.hasTargetMessageOption)(_,r.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(l=At(At({},l),{},{send_status:r.MessageSendStatus.FAILED,errorCode:r.MessageErrorCode.BLACKLIST})),l})):[])),Zt=(0,t.createSelector)((e=>{var t;return null==e||null===(t=e.messageReducer)||void 0===t?void 0:t.reply}),(e=>e?e.toMessageId:{})),er=(0,t.createSelector)(z,Zt,((e,t)=>t[e]||"")),tr=(0,t.createSelector)(er,o.messageEntitiesSelector,((t,r)=>(0,e.denormalize)(t,n.messageSchema,{messages:r}))),rr=(0,t.createSelector)($t,ve,((e,t)=>{for(var o="",n=e.length-1;n>=0;n--){var a=e[n];if(!(0,r.getMessageIsSend)(a,t)){o=a.id;break}}return o})),or=(0,t.createSelector)(z,(e=>{var t;return(null===(t=e.mediaPreviewerReducer)||void 0===t?void 0:t.mediaMap)||{}}),((e,t)=>t[e]||[])),nr=e=>{var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.feedback)||void 0},ar=e=>{var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.reconnectFlag)||!1},sr=e=>{var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.noticesCount)||0}})(),c})(),e.exports=o(r(82677),r(20573),r(29494),r(53402),r(96961))},66633:function(e,t,r){"use strict";e.exports=r(78232)},25061:function(e,t,r){var o,n,a,s,i,c,l,u,d,_;e.exports=(o=r(34857),n=r(20573),a=r(29494),s=r(96961),i=r(6678),c=r(82677),l=r(38104),u=r(58518),d=r(44900),_=r(36808),(()=>{"use strict";var e={701:(e,t,r)=>{r.d(t,{t:()=>a});var o=r(661),n=r.n(o),a=n().t.bind(n())},661:e=>{e.exports=u},598:e=>{e.exports=_},383:e=>{e.exports=c},252:e=>{e.exports=i},944:e=>{e.exports=o},975:e=>{e.exports=n},783:e=>{e.exports=l},644:e=>{e.exports=s},855:e=>{e.exports=a},672:e=>{e.exports=d}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var S={};return(()=>{r.r(S),r.d(S,{addNeedCaptchaRequest:()=>dn,affiliateEntitiesSelector:()=>i,agentConversationEntitiesSelector:()=>l,allMessageShortcutGroupsSelector:()=>uo,amsFeatureToggleSelector:()=>le,authorizedShopsCountSelector:()=>nt,autoTranslation:()=>Ro,batchRemoveDraftHandler:()=>mt,batchUpdateRecord:()=>L,botConfigSelector:()=>Ae,botPermissionSelector:()=>me,buyerIsFrozenSelector:()=>Et,captchaSignatureSelector:()=>Pe,captchaVerifyReducer:()=>hn,captchaVisibleSelector:()=>we,chatbotToggleOpenSelector:()=>ve,chatbotToggleSelector:()=>re,checkUserPermissionSaga:()=>Nr,checkUserPermissionSucceeded:()=>Dr,clearNeedCaptchaRequest:()=>Sn,clearReportRequested:()=>$o,contactsEntitiesSelector:()=>g,conversationEntitiesSelector:()=>c,conversationsLengthLevelSelector:()=>O,copySucceedFeedback:()=>Qr,curTabFocusedSelector:()=>Je,currentAllMessageShortcutsSelector:()=>ho,currentGroupIdSelector:()=>lo,currentGroupTypeSelector:()=>co,currentMessageShortcutGroupsSelector:()=>po,currentUserDistributionStatusSelector:()=>qe,currentUserIdSelector:()=>Y,currentUserIsSellerSelector:()=>st,currentUserRoleSelector:()=>Ye,currentUserSelector:()=>Me,currentUserShopIdSelector:()=>ze,currentUserShopSelector:()=>Ke,deepUpdateRecord:()=>M,deleteCaptchaRequest:()=>_n,deleteConfigDurationSelector:()=>$,deleteConfigSelector:()=>Ce,deleteConversationSucceedHandler:()=>gt,deleteRecord:()=>U,disappearChatbotLoadingTimeSelector:()=>se,displayCBCBannerSelector:()=>Do,distributionAccountStatusSelector:()=>Co,draftHashSelector:()=>Go,entitiesSelector:()=>a,entityReducer:()=>B,fetchSettings:()=>wo,fetchSettingsStatusSelector:()=>Vo,fetchShopAuth:()=>Wr,fetchShopsByIds:()=>Vr,fetchedShopIdsSelector:()=>Gr,forceLogoutRequested:()=>ir,forwardGroupMembersSelector:()=>m,forwardGroupsEntitiesSelector:()=>T,getConversationLastMessage:()=>kt,getDraft:()=>Bo,getShopUnreadCountByIds:()=>Br,getTimestamp:()=>It,getToastInformation:()=>qr,handle401ErrorRequested:()=>Uo,handleLoginSucceededLogic:()=>pr,handleMessageSubscribe:()=>At,hasDeletePermissionSelector:()=>X,hasFetchedUnreadSelector:()=>rt,hasReplyPermissionSelector:()=>J,hasSidebarPanelSelector:()=>ot,hasVerifyPhoneNumberNormalSellerSelector:()=>it,hasVerifyPhoneNumberSelector:()=>lt,hasVerifyPhoneNumberSubaccountSelector:()=>ct,hasVideoPermissionSelector:()=>Q,hideBlockEntranceSelector:()=>oe,hideFeedbackSelector:()=>te,includeDirectShopSelector:()=>Ve,isCBSellerSelector:()=>Ge,isCBSubAccountSelector:()=>We,isMainPageSelector:()=>Qe,isSubAccountSelector:()=>He,judgeUndefined:()=>Ut,legacyMessageShortcutsCountSelector:()=>Ao,loadingSelector:()=>K,localeSelector:()=>je,login:()=>Er,loginRequested:()=>or,loginSucceeded:()=>nr,loginSuccessSelector:()=>et,logout:()=>Lr,logoutHandler:()=>Ur,logoutRequested:()=>ar,logoutSucceeded:()=>sr,messageEntitiesSelector:()=>u,messageShortcutGroupEntitiesSelector:()=>v,messageShortcutGroupHttpStatusSelector:()=>io,messageShortcutGroupSelector:()=>so,messageShortcutsSelector:()=>go,messageShortcutsStatusSelector:()=>yo,messagesLengthLevelSelector:()=>b,networkStatusSelector:()=>q,newChatEntranceSelector:()=>ke,newMessageFlagSelector:()=>Ue,newbieSelector:()=>Ie,notificationTypes:()=>Ft,offerSelector:()=>ko,offersSelector:()=>jo,onboardingNewbieCompleteSelector:()=>he,onboardingWhitelistSelector:()=>fe,openMallUrl:()=>Po,openMallUrlSaga:()=>Io,orderEntitiesSelector:()=>_,personalMessageShortcutGroupsSelector:()=>_o,personalMessageShortcutsSelector:()=>Eo,productEntitiesSelector:()=>p,productsSelector:()=>Qo,pureActionHandler:()=>wt,pureMergeActionHandler:()=>Pt,rateCardEntitiesSelector:()=>h,rcmdWhitelistSelector:()=>ye,reduxReset:()=>Fo,relatedOfferIdsSelector:()=>Ho,removeSingleDraftHandler:()=>Tt,reportArraySelector:()=>Jo,reportMessageApiTimer:()=>Lt,reportReducer:()=>sn,reportRequested:()=>Xo,resendMessagePayloadSelector:()=>Ne,resendNeedCaptchaRequest:()=>pn,responseStatusSelector:()=>Oe,saveDraftHandler:()=>Rt,sellerBuyerSplitSelector:()=>ge,sellerDriverWhitelistSelector:()=>ce,senderFeedbackBotMsgSelector:()=>Te,serviceDownAlertSelector:()=>dt,serviceDownClosedSelector:()=>_t,serviceDownListSelector:()=>St,serviceDownMessageSelector:()=>pt,setServiceDownStatus:()=>Rr,setToastInformation:()=>Jr,setToastInformationSaga:()=>$r,settingsFetchStatusSelector:()=>mo,settingsNeedForceUpdateSelectors:()=>bo,settingsSelector:()=>Oo,settingsStatusSelector:()=>To,shopSelector:()=>Fr,shopStatisticsMapSelector:()=>Be,shopStatisticsSelector:()=>xe,shopTranslationSettingsSelector:()=>xo,shopsEntitiesSelector:()=>f,shopsUnreadConversationCountSelector:()=>x,showAutoHangupModalSelector:()=>at,showChatServingFeatureSelector:()=>ie,showChatWindowSelector:()=>Ze,showChatbotLoadingTimeSelector:()=>ae,showConversationDetailSelector:()=>$e,showCrrDueSelector:()=>ee,showCsatSubmitSelector:()=>ue,showEntrySelector:()=>tt,showMsgStatusSelector:()=>pe,showOriginalMessagesMapSelector:()=>On,showRecallBannerSelector:()=>de,showReportSelector:()=>ne,showServingTabSelector:()=>Re,showServingTodayTabSelector:()=>be,showShop:()=>xr,showSourceBannerSelector:()=>_e,showTopBannerSelector:()=>Se,sortConversations:()=>Nt,sortedAllMessageShortcutsSelector:()=>fo,stickerEntitiesSelector:()=>d,subaccountHasUnrepliedPermissionSelector:()=>De,takeEveryWithCancel:()=>bn,teamMessageShortcutGroupsSelector:()=>So,teamMessageShortcutsSelector:()=>vo,textBoxHeightSelector:()=>Xe,textMaxInputLenghSelector:()=>Ee,timerHandler:()=>tn,toastReducer:()=>ao,toastSelector:()=>Kr,totalUnreadConversationsCountSelector:()=>V,unreadCountActions:()=>W,updateChatEntryStatus:()=>Kt,updateChatWindowStatus:()=>Vt,updateConversationDetailStatus:()=>Wt,updateConversationListsHash:()=>Lo,updateCurTabFocused:()=>gr,updateCurTabFocusedSaga:()=>br,updateCurTabFocusedSucceeded:()=>Or,updateEntities:()=>N,updateHasFetchedUnread:()=>Yt,updateHasSidebarPanel:()=>qt,updateIsMainPage:()=>fr,updateLoginSuccessStatus:()=>zt,updateNetworkStatus:()=>Gt,updateOrReplaceAction:()=>Yo,updateRecord:()=>I,updateShowAutoHangupModal:()=>Bt,updateStatusSelector:()=>Wo,updateUseNewChatEntrance:()=>xt,useNewChatEntranceSelector:()=>Fe,userEntitiesSelector:()=>s,userReducer:()=>kr,userSelector:()=>Le,verifyRequestsSelector:()=>gn,voucherEntitiesSelector:()=>E,waitingTimeFilterSelector:()=>Z,watchHandleUrlSagas:()=>Mo,watchLogin:()=>vr,watchReportSagas:()=>an,watchTab:()=>Tr,watchToastSagas:()=>no,watchUserSagas:()=>Hr,watchVerifySagas:()=>fn});var e=r(944),t=r(975),o=r(855),n=e=>e<=100?1:e<=500?2:e<=1e3?3:4,a=e=>e.entityReducer,s=(0,t.createSelector)(a,(e=>e.users)),i=(0,t.createSelector)(a,(e=>e.affiliate)),c=(0,t.createSelector)(a,(e=>e.conversations)),l=(0,t.createSelector)(a,(e=>e.agentConversations)),u=(0,t.createSelector)(a,(e=>(e=>(0,o.checkEmptyObject)(e)?{}:e)(e.messages))),d=(0,t.createSelector)(a,(e=>e.stickers)),_=(0,t.createSelector)(a,(e=>e.orders)),p=(0,t.createSelector)(a,(e=>e.products)),E=(0,t.createSelector)(a,(e=>e.vouchers)),v=(0,t.createSelector)(a,(e=>e.messageShortcutsGroups)),h=(0,t.createSelector)(a,(e=>e.rateCards)),f=(0,t.createSelector)(a,(e=>e.shops)),g=(0,t.createSelector)(a,(e=>e.contacts)),O=(0,t.createSelector)(c,l,((e,t)=>{var r=Object.keys(e).length+Object.keys(t).length;return n(r)})),b=(0,t.createSelector)(u,(e=>n(Object.keys(e).length))),T=(0,t.createSelector)(a,(e=>e.groups)),m=(0,t.createSelector)(a,(e=>e.groupMembers));function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y,A=r(644);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.UPDATE_ENTITIES="UPDATE_ENTITIES",e.UPDATE_RECORD="UPDATE_RECORD",e.DELETE_RECORD="DELETE_RECORD",e.BATCH_UPDATE_RECORD="BATCH_UPDATE_RECORD",e.DEEP_UPDATE_RECORD="DEEP_UPDATE_RECORD"}(y||(y={}));const w={[y.UPDATE_ENTITIES]:(e,{payload:{entities:t}})=>Object.entries(t).reduce(((e,[t,r])=>"persist"!==t?("shops"===t&&A.shopService.updateShopMap(r),D(D({},e),{},{[t]:D(D({},e[t]),r)})):D(D({},e),{},{[t]:r})),e)};var P=r(252),{updateEntities:N,updateRecord:I,deleteRecord:U,batchUpdateRecord:L,deepUpdateRecord:M}=(0,P.createActions)({[y.UPDATE_ENTITIES]:({entities:e})=>({entities:e}),[y.UPDATE_RECORD]:({name:e,id:t,record:r})=>({name:e,id:t,record:r}),[y.DELETE_RECORD]:({name:e,id:t})=>({name:e,id:t}),[y.BATCH_UPDATE_RECORD]:({name:e,records:t,checkProp:r})=>({name:e,records:t,checkProp:r}),[y.DEEP_UPDATE_RECORD]:({name:e,id:t,record:r})=>({name:e,id:t,record:r})});function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const k={[y.UPDATE_RECORD]:(e,{payload:{name:t,id:r,record:o}})=>H(H({},e),{},{[t]:H(H({},e[t]),{},{[r]:H(H({},e[t][r]),o)})}),[y.DELETE_RECORD]:(e,{payload:{name:t,id:r}})=>{var o=e[t];return delete o[r],H(H({},e),{},{[t]:o})},[y.BATCH_UPDATE_RECORD]:(e,{payload:{name:t,records:r,checkProp:o}})=>{var n=H({},e[t]);return Object.keys(r).forEach((e=>{(!o||o&&r[e][o]>n[e][o])&&(n[e]=H(H({},n[e]),r[e]))})),H(H({},e),{},{[t]:n})},[y.DEEP_UPDATE_RECORD]:(e,{payload:{name:t,id:r,record:o}})=>{var n=Object.keys(o),a={},s=H({},e[t][r]);return n.forEach((e=>{a[e]=H(H({},s[e]),o[e])})),H(H({},e),{},{[t]:H(H({},e[t]),{},{[r]:H(H({},e[t][r]),a)})})}};function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=(0,P.handleActions)(G(G({},w),k),{users:{},affiliate:{},messages:{},conversations:{},agentConversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},persist:null,vouchers:{},messageShortcuts:{}}),x=e=>{var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.shopsUnreadConversationCount)||0},V=e=>{var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.totalUnreadConversationsCount)||0},W={MARK_AS_READ:"markAsRead",MARK_AS_UNREAD:"markASUnread",CLOSE_CONVERSATION:"closeConversation",DELETE_CONVERSATION:"deleteConversation",FORWARD_CONVERSATION:"forwardConversation",RECEIVE_UNREADABLE_MESSAGE:"receiveUnreadableMessage",REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT:"refreshTotalUnreadConversationCount",REFRESH_SHOPS_UNREAD_CONVERSATIONS_COUNT:"refreshShopsUnreadConversationsCount",REFRESH_SINGLE_SHOP_UNREAD_CONVERSATION_COUNT:"refreshSingleShopUnreadConversationCount",UPDATE_CONVERSATION:"updateConversation",MESSAGE_QUEUE_UPDATE:"messageQueueUpdate",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_CLOSE:"mass_close",ACTIVE_CONVERSATION:"activeConversation",CLEAR_CONVERSATION_COUNT:"clearConversationCount"},z=r(383),K=e=>e.userReducer.loading,Y=e=>e.userReducer.currentUserId,q=e=>e.userReducer.networkStatus,Q=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hasVideoPermission)||!1},J=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hasReplyPermission)||!1},X=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hasDeletePermission)||!1},$=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.deleteConfigDuration)||0},Z=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.waitingTimeFilter)||!1},ee=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showCrrDue)||!1},te=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hideFeedback)||!1},re=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.chatbotToggle)||0},oe=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hideBlockEntrance)||!1},ne=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showReport)||!1},ae=e=>{var t;return null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showChatbotLoadingTime},se=e=>{var t;return null==e||null===(t=e.userReducer)||void 0===t?void 0:t.disappearChatbotLoadingTime},ie=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showChatServingFeature)||!1},ce=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.sellerDriverWhitelist)||!1},le=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.amsFeatureToggle)||!1},ue=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showCsatSubmit)||!1},de=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showRecallBanner)||!1},_e=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showSourceBanner)||!1},Se=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showTopBanner)||!1},pe=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.msgStatus)||!1},Ee=e=>{var t;return null==e||null===(t=e.userReducer)||void 0===t?void 0:t.textMaxInputLengh},ve=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.chatbotToggleOpen)||!1},he=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.onboardingNewbieComplete)||!1},fe=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.onboardingWhitelist)||!1},ge=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.sellerBuyerSplit)||!1},Oe=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.responseStatus)||!1},be=(0,t.createSelector)(ie,fe,((e,t)=>e||t)),Te=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.senderFeedbackBotMsg)||!1},me=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.senderFeedbackReason)||{}},Re=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showServingTab)||!1},ye=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.rcmdWhitelist)||!1},Ae=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.botConfig)||{}},Ce=e=>{var{hasDeletePermission:t=!1,deleteConfigVersion:r=0,deleteConfigDuration:o=0}=(null==e?void 0:e.userReducer)||{};return{hasDeletePermission:t,deleteConfigVersion:r,deleteConfigDuration:o}},De=e=>e.userReducer.subaccountHasUnrepliedPermission,we=e=>{var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.captchaVisible)||!1},Pe=e=>{var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.captchaSignature)||""},Ne=e=>{var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.resendMessagePayload)||void 0},Ie=e=>{var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.newbie)||[]},Ue=e=>e.userReducer.newMessageFlag,Le=e=>(0,t.createSelector)(a,(t=>(0,z.denormalize)(e,A.userSchema,{users:t}))),Me=(0,t.createSelector)(s,Y,((e,t)=>(0,z.denormalize)(t,A.userSchema,{users:e})||{})),je=(0,t.createSelector)(Me,(e=>e&&e.locale)),He=(0,t.createSelector)(Me,(e=>!(0,o.checkEmptyObject)(e)&&e.type===o.AccountType.SUBACCOUNT)),ke=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.useNewChatEntrance)||!1},Fe=(0,t.createSelector)(He,ke,((e,t)=>!e&&t)),Ge=(0,t.createSelector)(Me,(e=>!(0,o.checkEmptyObject)(e)&&e.is_cb)),Be=e=>{var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.shopStatisticsMap)||{}},xe=(e,r)=>(0,t.createSelector)(Be,(t=>t["".concat(e,"-").concat(r)]||{})),Ve=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.includesDirectShop)||!1},We=(0,t.createSelector)(He,Ge,Ve,((e,t,r)=>e&&(t||r))),ze=(0,t.createSelector)(Me,He,((e={},t)=>t?void 0:e.shop_id)),Ke=(0,t.createSelector)(Me,He,f,((e={},t,r)=>t?void 0:(0,z.denormalize)(e.shop_id,A.shopSchema,{shops:r})||{})),Ye=(0,t.createSelector)(Me,((e={})=>e.role||"")),qe=(0,t.createSelector)(Me,(e=>e&&e.distribution_status||"")),Qe=e=>e.userReducer.isMainPage,Je=e=>e.userReducer.curTabFocused,Xe=e=>{var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.textBoxHeight)||0},$e=e=>e.userReducer.showConversationDetail,Ze=e=>e.userReducer.showChatWindow,et=e=>e.userReducer.loginSuccess,tt=e=>e.userReducer.showEntry,rt=e=>e.userReducer.hasFetchedUnread,ot=e=>e.userReducer.hasSidebarPanel,nt=(0,t.createSelector)(Me,((e={})=>e.authorizedShopsCount||0)),at=e=>e.userReducer.showAutoHangupModal,st=(0,t.createSelector)(Me,He,((e={},t)=>!!t||e.is_seller)),it=e=>{var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.hasVerifyPhoneNumber)||!1},ct=e=>{var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.hasVerifyPhoneNumberMap)||{}},lt=(0,t.createSelector)(He,it,ct,((e,t,r)=>e?r:t)),ut=e=>{var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.serviceDownStatus)||{}},dt=(0,t.createSelector)(ut,(e=>e.alert||!1)),_t=(0,t.createSelector)(ut,(e=>e.closed||!1)),St=(0,t.createSelector)(ut,(e=>e.list||!1)),pt=(0,t.createSelector)(ut,(e=>e.message||!1)),Et=(e,r,o)=>(0,t.createSelector)(xe(e,r),(e=>"frozen"===o&&"boolean"==typeof e.exist_pending_order&&!e.exist_pending_order));function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ft=(e,t)=>{var r=new Set(t);return r.delete(e),Array.from(r)},gt=(e,{payload:{conversationId:t}})=>{var r=ht(ht({},e.conversationIdsMap),{},{[t]:!1}),o=ft(t,e.conversationIds),n=ft(t,e.pinnedConversationIds),{currentConversationId:a}=e;return ht(ht({},e),{},{currentConversationId:a===t?null:a,conversationIds:o,pinnedConversationIds:n,conversationIdsMap:r})};function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Tt=(e,{payload:{conversationId:t}})=>{var r=bt({},e.draftHash);return delete r[t],bt(bt({},e),{},{draftHash:r})},mt=(e,{payload:{conversationIds:t=[]}})=>{var r=bt({},e.draftHash);return t.forEach((e=>{delete r[e]})),bt(bt({},e),{},{draftHash:r})},Rt=(e,{payload:{conversationId:t,draft:r}})=>{var o=bt({},e.draftHash);return o[t]=r,bt(bt({},e),{},{draftHash:o})},yt=r(783);function*At(t){var{payload:r,type:n}=t;yield(0,e.spawn)(Lt,r.request_id),n===o.ConversationTypeEnum.Agent?yield(0,e.put)((0,yt.receiveAgentMessageRequested)({message:r})):yield(0,e.put)((0,yt.receiveMessageRequested)({message:r}))}function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wt=()=>(e,{payload:t})=>Dt(Dt({},e),t),Pt=e=>(t,{payload:r})=>Dt(Dt({},t),{},{[e]:Dt(Dt({},t[e]),r)}),Nt=e=>{e.sort(((e,t)=>parseInt(t.latest_message_id)-parseInt(e.latest_message_id)))},It=(e,t)=>{var{last_message_time_nano:r,next_timestamp_nano:o}=e;return t&&!o&&(o=t.next_message_time_nano),{nextTimestampNano:o,oldestTimestampNano:o,latestTimestampNano:r}},Ut=({defaultValue:e,value:t})=>void 0===t?e:t;function*Lt(e){var t=yield(0,o.getItem)(e);if(t){var r=(0,A.getReportManager)();null==r||r.reportMessageSocket(t),(0,o.removeItem)(e)}}var Mt,jt=r(701).t,{MSG_TYPE_TEXT:Ht}=o.MessageTypes,kt=(e,t,r)=>{var n=e.all||[],a=e.sending||[],s=e.failed||[],i=n.length,c=null;if(i){for(var l=0,u=null;l<i&&!u;){var d=e.all[l];(u=(0,z.denormalize)(d,A.messageSchema,{messages:r}))&&(u.type===o.MessageTypes.MSG_TYPE_SECURITY_TIPS||u.isFaking)&&(u=null),l++}u&&u.created_timestamp>Math.floor(t.last_message_time_nano/Math.pow(10,9))&&(c=(0,o.fillMessagePreview)(u))}if(!c){var{latest_message_id:_,latest_message_content:S,latest_message_type:p,last_message_option:E,latest_message_source:v,last_message_time_nano:h,latest_message_to_shop_id:f,label_info:g}=t;(c={id:_,content:S,type:p,message_option:E,source:v,to_shop_id:f,label_info:g}).created_at=new Date(h/1e6)+""}var{id:O,message_option:b}=c,T=a.includes(O)?o.MessageSendStatus.SENDING:s.includes(O)?o.MessageSendStatus.FAILED:c.send_status?o.MessageSendStatus.SUCCEED:null;return(0,o.hasTargetMessageOption)(b,o.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(T=o.MessageSendStatus.FAILED,c.type=Ht,c.content={text:jt("common.blacklist.replaced_text")}),(0,o.hasTargetMessageOption)(b,o.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)&&(T=o.MessageSendStatus.FAILED),c.send_status=T,c},Ft={MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",DELETE_CONVERSATION:"delete_conversation",UPDATE_OFFER_STATUS:"update_offer_status",UPDATE_CONVERSATION:"update_conversation",UPDATE_USER_STATUS:"update_user_status",UPDATE_CONVERSATION_FLAG:"update_conversation_flag",FORCE_LOGOUT:"force_logout",UPDATE_RATING_CARD_STATUS:"update_rating_card_status",PULL_NOTIFICATION:"pull_notification",PIN_CONVERSATION:"pin_conversation",UNPIN_CONVERSATION:"unpin_conversation",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_PIN:"mass_pin",MASS_UNPIN:"mass_unpin",MASS_CLOSE:"mass_close",MASS_ACTIVATE:"mass_activate",VIDEO_UPLOAD:"video_upload",MARK_AS_REPLIED:"mark_as_replied",MARK_AS_UNREPLIED:"mark_as_unreplied",CHAT_DELETE_MSG:"chat_delete_msg",FAQ_SESSION_UPDATE:"faq_session_update",MUTE_CONVERSATION:"mute_conversation",UNMUTE_CONVERSATION:"unmute_conversation",CTT_UPDATE:"ctt_update",HAVE_UNRATED_CSAT:"have_unrated_csat",FAQ_SELLER_UNREAD_STATUS_UPDATE:"faq_seller_unread_status_update",CHAT_UPDATE_MSG_STATUS:"chat_update_msg_status",NEW_MSG_BOX:"new_msg_box",DEL_MSG_BOX:"del_msg_box"};!function(e){e.SHOW_LOADING_SUCCEEDED="SHOW_LOADING_SUCCEEDED",e.SET_HAS_SESSION="SET_HAS_SESSION",e.UPDATE_NETWORK_STATUS="UPDATE_NETWORK_STATUS",e.UPDATE_CUR_TAB_FOCUSED="UPDATE_CUR_TAB_FOCUSED",e.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED="UPDATE_CUR_TAB_FOCUSED_SUCCEEDED",e.UPDATE_WORKSTATION_PANEL="UPDATE_WORKSTATION_PANEL",e.UPDATE_NEW_MESSAGE_FLAG="UPDATE_NEW_MESSAGE_FLAG",e.UPDATE_CHAT_WINDOW_STATUS="UPDATE_CHAT_WINDOW_STATUS",e.UPDATE_CONVERSATION_DETAIL_STATUS="UPDATE_CONVERSATION_DETAIL_STATUS",e.UPDATE_LOGIN_SUCCESS_STATUS="UPDATE_LOGIN_SUCCESS_STATUS",e.UPDATE_CHAT_ENTRY_STATUS="UPDATE_CHAT_ENTRY_STATUS",e.LOGIN_REQUESTED="LOGIN_REQUESTED",e.LOGIN_SUCCEEDED="LOGIN_SUCCEEDED",e.LOGOUT_REQUESTED="LOGOUT_REQUESTED",e.LOGOUT_SUCCEEDED="LOGOUT_SUCCEEDED",e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.SHOW_TRANSLATION_GUIDE="SHOW_TRANSLATION_GUIDE",e.SHOW_REGION_FILTER_GUIDE="SHOW_REGION_FILTER_GUIDE",e.FORCE_LOGOUT_REQUESTED="FORCE_LOGOUT_REQUESTED",e.CONNECT_SOCKET="CONNECT_SOCKET",e.UPLOAD_FEEDBACK_VIDEO_REQUESTED="UPLOAD_FEEDBACK_VIDEO_REQUESTED",e.UPLOAD_FEEDBACK_VIDEO_STATUS="UPLOAD_FEEDBACK_VIDEO_STATUS",e.UPDATE_RELATED_CAPACITY="UPDATE_RELATED_CAPACITY",e.UPDATE_IS_MAIN_PAGE="UPDATE_IS_MAIN_PAGE",e.UPDATE_SHOW_AUTO_HANGUP_MODAL="UPDATE_SHOW_AUTO_HANGUP_MODAL",e.UPDATE_HAS_FETCHED_UNREAD="UPDATE_HAS_FETCHED_UNREAD",e.CHECK_USER_PERMISSION_SUCCEEDED="CHECK_USER_PERMISSION_SUCCEEDED",e.SET_SERVICE_DOWN_STATUS="SET_SERVICE_DOWN_STATUS",e.UPDATE_HAS_SIDEBAR_PANEL="UPDATE_HAS_SIDEBAR_PANEL",e.UPDATE_USE_NEW_CHAT_ENTRANCE="UPDATE_USE_NEW_CHAT_ENTRANCE"}(Mt||(Mt={}));var{updateNetworkStatus:Gt,updateShowAutoHangupModal:Bt,updateUseNewChatEntrance:xt,updateChatWindowStatus:Vt,updateConversationDetailStatus:Wt,updateLoginSuccessStatus:zt,updateChatEntryStatus:Kt,updateHasFetchedUnread:Yt,updateHasSidebarPanel:qt}=(0,P.createActions)({[Mt.UPDATE_NETWORK_STATUS]:({networkStatus:e})=>({networkStatus:e}),[Mt.UPDATE_SHOW_AUTO_HANGUP_MODAL]:({showAutoHangupModal:e})=>({showAutoHangupModal:e}),[Mt.UPDATE_USE_NEW_CHAT_ENTRANCE]:({useNewChatEntrance:e})=>({useNewChatEntrance:e}),[Mt.UPDATE_CHAT_WINDOW_STATUS]:({showChatWindow:e})=>({showChatWindow:e}),[Mt.UPDATE_CONVERSATION_DETAIL_STATUS]:({showConversationDetail:e})=>({showConversationDetail:e}),[Mt.UPDATE_LOGIN_SUCCESS_STATUS]:({loginSuccess:e})=>({loginSuccess:e}),[Mt.UPDATE_CHAT_ENTRY_STATUS]:({showEntry:e})=>({showEntry:e}),[Mt.UPDATE_HAS_FETCHED_UNREAD]:({hasFetchedUnread:e})=>({hasFetchedUnread:e}),[Mt.UPDATE_HAS_SIDEBAR_PANEL]:({hasSidebarPanel:e})=>({hasSidebarPanel:e})});const Qt={[Mt.UPDATE_NETWORK_STATUS]:wt(),[Mt.UPDATE_SHOW_AUTO_HANGUP_MODAL]:wt(),[Mt.UPDATE_USE_NEW_CHAT_ENTRANCE]:wt(),[Mt.UPDATE_CHAT_WINDOW_STATUS]:wt(),[Mt.UPDATE_CONVERSATION_DETAIL_STATUS]:wt(),[Mt.UPDATE_LOGIN_SUCCESS_STATUS]:wt(),[Mt.UPDATE_CHAT_ENTRY_STATUS]:wt(),[Mt.UPDATE_HAS_FETCHED_UNREAD]:wt(),[Mt.UPDATE_HAS_SIDEBAR_PANEL]:wt()};var Jt,Xt=r(672),$t=r(598),Zt=r.n($t);!function(e){e[e.Disable=0]="Disable",e[e.Waiting=1]="Waiting",e[e.Up=2]="Up",e[e.Down=3]="Down"}(Jt||(Jt={}));var er=({messageId:e,feedback:t,conversationId:r,tagIds:o,reasonIds:n,otherReasons:a,bizId:s})=>new Promise(((i,c)=>{(0,A.fetch)({suffix:"feedback",resource:"messages",method:"POST",payload:JSON.stringify({msg_id:e,feedback:t,conversation_id:r,tag_ids:o,reason_ids:n,other_reason:a,biz_id:s})}).then((()=>{i()})).catch((e=>{c(e)}))}));function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var{loginRequested:or,loginSucceeded:nr,logoutRequested:ar,logoutSucceeded:sr,forceLogoutRequested:ir}=(0,P.createActions)({[Mt.LOGIN_REQUESTED]:()=>({}),[Mt.LOGIN_SUCCEEDED]:({currentUserId:e,status:t})=>({currentUserId:e,status:t}),[Mt.LOGOUT_REQUESTED]:()=>({}),[Mt.LOGOUT_SUCCEEDED]:()=>({}),[Mt.FORCE_LOGOUT_REQUESTED]:()=>({})});function*cr(){var t=(0,o.getTranslationLocale)((0,o.getRuntimeLocale)()),r=yield(0,e.call)(A.getTranslation,{locale:t});yield(0,e.call)(o.changeLanguage,t,r)}function*lr(){}var ur=function*(t){yield(0,e.call)(cr),yield(0,e.put)(Kt({showEntry:!0})),yield(0,e.put)(zt({loginSuccess:!1}));var r,o=(0,A.getReportManager)();null==o||o.reportLoginFailed({type:(r=t,r instanceof A.InternalServerError?"InternalServerError":r instanceof A.Forbidden?"Forbidden":r instanceof A.Unauthoried?"Unauthoried":"Other")})};function*dr(){try{var e=[];for(var[t,r]of Object.entries(window.localStorage))if(t.includes("MDAP_CONFIG_STORAGE_minichat_live_")){var o=t.split("_")||[],n=(o[o.length-1]||"").split(".")||[];if(n.length){var a=n[0]?Number(n[0]):"",s=n[1]?Number(n[1]):"",i=n[2]?Number(n[2]):"";(a&&a<8||s&&s<5||5===s&&i&&i<6)&&e.push(t)}}e.length&&e.forEach((e=>{window.localStorage.removeItem(e)}))}catch(e){console.log("删除MDAP发生错误")}}var _r=function*(t){var r;try{r=yield(0,e.call)(A.getTranslation,{locale:t})}catch(t){r=yield(0,e.call)(A.getTranslation,{locale:(0,o.getTranslationLocale)((0,o.getRuntimeLocale)())})}r&&(yield(0,e.spawn)(o.setItem,"chat_translation",{resources:r,locale:t})),yield(0,e.call)(o.changeLanguage,t,r),yield(0,e.call)(o.updateTimeLocale,t)};function*Sr(t){var{resources:r,translationLocale:n}=(e=>{var t,r,n=(0,A.getReportManager)(),a=window.__CHATEASY_TRANSLATION__;if(!(0,o.checkEmptyObject)(a)&&!(0,o.checkEmptyObject)(a.collection)){null==n||n.reportFetchTranslationInHtml();var s={};Object.keys(a.collection).forEach((e=>{s=Object.assign(s,a.collection[e])})),t=s,r=window.__CHATEASY_LOCALE__}return{resources:t,translationLocale:r}})(),a=(0,A.getReportManager)();if(r)yield(0,e.call)(o.changeLanguage,n,r),yield(0,e.call)(o.updateTimeLocale,n),yield(0,e.spawn)(o.setItem,"chat_translation",{resources:r,locale:n});else{var s;s=(0,o.getMallTranslationLocale)(),null==a||a.reportFetchTranslationInService();var i=yield(0,e.call)(o.getItem,"chat_translation"),{resources:c,locale:l}=i||{};c&&l===s?(null==a||a.reportFetchTranslationAsync(),yield(0,e.call)(o.changeLanguage,s,c),yield(0,e.call)(o.updateTimeLocale,s),yield(0,e.spawn)(_r,s)):(null==a||a.reportFetchTranslationSync(),yield(0,e.call)(_r,s))}}function*pr(t,r){try{var{godToken:n}=r,{user:a,show_chatbot_entrance:s}=t,{id:i,type:c,locale:l,distribution_status:u}=a,d=c===o.AccountType.SUBACCOUNT;window.__WEBCHAT_LOGIN__||d&&"working"===u&&(window.__WEBCHAT_LOGIN__=!0),yield(0,e.call)(Sr,l||"en"),performance.mark("APP_RENDERING"),(0,A.collectLoadTask)(),(0,A.mdapConfig)(c),(0,A.configTrackerUser)(a),yield(0,e.put)(xt({useNewChatEntrance:s})),yield(0,e.put)(Gt({networkStatus:"online"})),window.addEventListener("online",(()=>{Xt.store.dispatch(Gt({networkStatus:"online"}))})),window.addEventListener("offline",(()=>{Xt.store.dispatch(Gt({networkStatus:"offline"}))})),window.addEventListener("message",(e=>{var t;if("captcha-modal"===(null===(t=e.data)||void 0===t?void 0:t.type)){var r,n,a,s;if(3===(null===(r=e.data)||void 0===r?void 0:r.status)){var i,c,l,u=null===(i=e.data)||void 0===i?void 0:i.AC_CERT_D;u&&(0,o.isVisitingCn)()&&Zt().set("AC_CERT_D",u,{secure:!0,domain:"".concat(window.location.host),expires:new Date((new Date).getTime()+6e4)}),Xt.store.dispatch(pn()),null===(c=(l=window).closeSFUCaptchaModal)||void 0===c||c.call(l)}1===(null===(n=e.data)||void 0===n?void 0:n.status)&&(Xt.store.dispatch(_n()),null===(a=(s=window).closeSFUCaptchaModal)||void 0===a||a.call(s))}}),!1),yield(0,e.put)(zt({loginSuccess:!0})),yield(0,e.put)(Kt({showEntry:!0}));var{entities:_}=(0,A.normalize)("users",a);yield(0,e.put)(N({entities:_})),yield(0,o.setItem)("mini-session",t),yield(0,e.put)(nr({currentUserId:i})),yield(0,e.call)(Nr),yield(0,e.put)((0,yt.emptyAction)()),n||(yield(0,e.call)(yt.startConnect)),yield(0,e.spawn)(lr),d||(yield(0,e.call)(yt.fetchShopSettings,{payload:{shopId:a.shop_id}})),yield(0,e.spawn)(dr),window.addExternalGlobal("submitMessageFeedback",er)}catch(t){yield(0,e.call)(ur,t)}}function*Er(){try{var t,r;performance.mark("APP_PREPARED");var n={},a=(0,A.getReportManager)();if(window.__WEBCHAT_SESSION__)null==a||a.reportLoginInHtml(),n=window.__WEBCHAT_SESSION__;else{null==a||a.reportLoginInService();var s={method:"POST",subServer:"coreapi",resource:"login"},i=(0,o.isVisitingCNSC)()||(0,o.isVisitingKRSC)();s.params={source:"pcmall"},i&&(s.parent="cbsc"),n=yield(0,e.call)(A.fetch,s),window.__WEBCHAT_SESSION__=n}return performance.mark("LOGIN_API_RESPONSED"),o.LS.setItem("mini-session",JSON.stringify(n)),o.LS.setItem("chat-locale",JSON.stringify(null===(t=n)||void 0===t||null===(r=t.user)||void 0===r?void 0:r.locale)),{session:n,params:{godToken:""}}}catch(t){yield(0,e.call)(ur,t)}}function*vr(){yield(0,e.takeLatest)(or,Er),yield(0,e.takeLatest)(ar,Lr),yield(0,e.takeLatest)(ir,Ur)}const hr={[Mt.LOGIN_SUCCEEDED]:wt(),[Mt.LOGOUT_SUCCEEDED]:e=>rr(rr({},e),{},{currentUserId:null,performance:{},closeHangupTips:!1,hasVideoPermission:!1,captchaVisible:!1,curTabFocused:!0})};var{updateIsMainPage:fr,updateCurTabFocused:gr,updateCurTabFocusedSucceeded:Or}=(0,P.createActions)({[Mt.UPDATE_IS_MAIN_PAGE]:({isMainPage:e})=>({isMainPage:e}),[Mt.UPDATE_CUR_TAB_FOCUSED]:({focused:e})=>({focused:e}),[Mt.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED]:({curTabFocused:e})=>({curTabFocused:e})});function*br({payload:{focused:t}}){t&&(yield(0,e.call)(yt.tabFocused),yield(0,e.put)(fr({isMainPage:!0}))),yield(0,e.put)(Or({curTabFocused:t}))}function*Tr(){yield(0,e.takeEvery)(gr,br)}const mr={[Mt.UPDATE_IS_MAIN_PAGE]:wt(),[Mt.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED]:wt()};var{setServiceDownStatus:Rr}=(0,P.createActions)({[Mt.SET_SERVICE_DOWN_STATUS]:e=>e});window.addExternalGlobal("setServiceDownStatus",Rr);const yr={[Mt.SET_SERVICE_DOWN_STATUS]:Pt("serviceDownStatus")};function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var{checkUserPermissionSucceeded:Dr}=(0,P.createActions)({[Mt.CHECK_USER_PERMISSION_SUCCEEDED]:({hasVideoPermission:e,hasReplyPermission:t,hasDeletePermission:r,deleteConfigDuration:o,deleteConfigVersion:n,waitingTimeFilter:a,subaccountHasUnrepliedPermission:s,showCrrDue:i,hideFeedback:c,chatbotToggle:l,showChatbotLoadingTime:u,disappearChatbotLoadingTime:d,showChatServingFeature:_,sellerDriverWhitelist:S,amsFeatureToggle:p,hideBlockEntrance:E,showCsatSubmit:v,showRecallBanner:h,showSourceBanner:f,showTopBanner:g,msgStatus:O,textMaxInputLengh:b,showReport:T,chatbotToggleOpen:m,onboardingNewbieComplete:R,onboardingWhitelist:y,sellerBuyerSplit:A,responseStatus:C,senderFeedbackBotMsg:D,senderFeedbackReason:w,showServingTab:P,rcmdWhitelist:N,botConfig:I})=>({hasVideoPermission:e,hasReplyPermission:t,hasDeletePermission:r,deleteConfigDuration:o,deleteConfigVersion:n,waitingTimeFilter:a,subaccountHasUnrepliedPermission:s,showCrrDue:i,hideFeedback:c,chatbotToggle:l,showChatbotLoadingTime:u,disappearChatbotLoadingTime:d,showChatServingFeature:_,sellerDriverWhitelist:S,amsFeatureToggle:p,hideBlockEntrance:E,showCsatSubmit:v,showRecallBanner:h,showSourceBanner:f,showTopBanner:g,msgStatus:O,textMaxInputLengh:b,showReport:T,chatbotToggleOpen:m,onboardingNewbieComplete:R,onboardingWhitelist:y,sellerBuyerSplit:A,responseStatus:C,senderFeedbackBotMsg:D,senderFeedbackReason:w,showServingTab:P,rcmdWhitelist:N,botConfig:I})}),wr={hasVideoPermission:!1,hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigDuration:0,deleteConfigVersion:0,waitingTimeFilter:!1,showCrrDue:!1,hideFeedback:!1,chatbotToggle:o.ChatbotToggle.Disable,showChatbotLoadingTime:0,disappearChatbotLoadingTime:0,hideBlockEntrance:!1,showSourceBanner:!1,showTopBanner:!1,msgStatus:!1,showReport:!1,chatbotToggleOpen:!1,onboardingNewbieComplete:!1,onboardingWhitelist:!1,sellerBuyerSplit:!1,responseStatus:!1},Pr=()=>{try{return o.LS.getItem("minichat-service-down")||!1}catch(e){return!1}};function*Nr(){var t=yield(0,e.select)(Me),{type:r,country:n}=t;try{var a=yield(0,e.call)(A.fetch,{subServer:"coreapi",parent:"user",resource:"global_config",params:{entry_point:"pc_mall"}}),{video:s,reply:i,waiting_time_filter:c,show_crr_due:l,delete_msg:u,support_subaccount_unreplied:d,hide_feedback:_,chatbot_toggle:S,show_chatbot_loading_time:p,disappear_chatbot_loading_time:E,show_chat_serving_feature:v,seller_driver_whitelist:h,ams_toggle_status:f,show_source_banner:g,show_top_banner:O,subaccount_guide_config:{show_popup:b=!1,popup_duration_sec:T=0,shop_bind_main_account:m=!1,show_dropdown_menu_entry:R=!1}={},show_recall_banner:y,hide_block_entrance:C,ab_test_info:{show_csat_submit:D}={},msg_status:w,text_max_input_len:P,show_report:N,chatbot_toggle_open:I=!1,onboarding_newbie_complete:U=!1,onboarding_whitelist:L=!1,seller_buyer_split:M=!1,sender_feedback_bot_msg:j,sender_feedback_reason:H={},show_serving_tab:k=!1,rcmd_whitelist:F=!1,bot_config:G}=a||{};window.__SENDER_FEEDBACK_TIMEOUT__=null==H?void 0:H.feedback_timeout;var B,x,V,W=Cr(Cr({},wr),{},{hasVideoPermission:s,hasReplyPermission:i,waitingTimeFilter:c,showCrrDue:l,hideFeedback:_,chatbotToggle:S,showChatbotLoadingTime:p,disappearChatbotLoadingTime:E,showChatServingFeature:v,sellerDriverWhitelist:h,amsFeatureToggle:f,hideBlockEntrance:C,showCsatSubmit:D,showRecallBanner:y,showSourceBanner:g,showTopBanner:O,msgStatus:w,textMaxInputLengh:P,showReport:N,chatbotToggleOpen:I,onboardingNewbieComplete:U,onboardingWhitelist:L,sellerBuyerSplit:M,senderFeedbackBotMsg:j,senderFeedbackReason:H,showServingTab:k,rcmdWhitelist:F,botConfig:G});if(W.waitingTimeFilter=!1,W.chatbotToggle=o.ChatbotToggle.Disable,W.showChatServingFeature=!1,W.sellerDriverWhitelist=!1,W.amsFeatureToggle=!1,W.senderFeedbackBotMsg=!1,W.showServingTab=!1,W.rcmdWhitelist=!1,window.addExternalGlobal("seller_buyer_split",M),"seller"===r){var{config_version:z,region_config:K=[]}=u||{};W.deleteConfigVersion=z;var Y=K.find((e=>e.region===n));Y&&Y.duration&&(W.hasDeletePermission=!0,W.deleteConfigDuration=Y.duration)}else W.subaccountHasUnrepliedPermission=d;yield(0,e.put)(Dr(Cr(Cr({},W),{},{responseStatus:!0}))),void 0!==a.br_site_close&&(yield(0,e.put)(Rr({alert:(null==a||null===(B=a.br_site_close)||void 0===B?void 0:B.site_close)||!1,closed:Pr()})),window.__SERVICEDOWN_STATT_TIME__=(null==a||null===(x=a.br_site_close)||void 0===x?void 0:x.start_time)||0,window.__SERVICEDOWN_END_TIME__=(null==a||null===(V=a.br_site_close)||void 0===V?void 0:V.end_time)||0)}catch(t){yield(0,e.put)(Dr(Cr(Cr({},wr),{},{responseStatus:!0})))}}const Ir={[Mt.CHECK_USER_PERMISSION_SUCCEEDED]:wt()};var Ur=function*(t=!0){t&&(yield(0,e.call)(yt.closeConnect)),yield(0,e.put)(sr()),yield(0,e.put)(Fo()),(0,o.removeItem)("mini-session"),(0,o.removeItem)("mini-sc_redirect")},Lr=function*(){try{var t={server:(0,o.getSCApiServer)(),namespace:"",resource:"logout/",params:{SPC_CDS:Zt().get("SPC_CDS"),SPC_CDS_VER:2}};(0,o.isVisitingCNSC)()||(0,o.isVisitingKRSC)()?(t.version="cnsc",t.parent="selleraccount"):t.version="v1",yield(0,e.call)(A.fetch,t),document.location.replace("https://".concat((0,o.getSellerCenterUrl)(),"/account/signin")),window.removeEventListener("online",(()=>{Xt.store.dispatch(Gt({networkStatus:"online"}))})),window.removeEventListener("offline",(()=>{Xt.store.dispatch(Gt({networkStatus:"offline"}))})),(0,A.clearApiCache)(),yield(0,e.call)(Ur)}catch(t){t.handler?(0,e.call)(t.handler):console.error("[Logout Failed] ",t)}};function Mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Hr=[vr,Tr],kr=(0,P.handleActions)(jr(jr(jr(jr(jr({},mr),Ir),Qt),hr),yr),{networkStatus:"online",currentUserId:null,currentUser:{},curTabFocused:!0,isMainPage:!0,subaccountHasUnrepliedPermission:!1,showAutoHangupModal:!1,hasVideoPermission:!1,hasReplyPermission:!1,shouldInitFSSDK:!1,hasDeletePermission:!1,deleteConfigVersion:0,deleteConfigDuration:0,waitingTimeFilter:!1,showCrrDue:!1,hideFeedback:!1,showChatbotLoadingTime:0,disappearChatbotLoadingTime:0,textMaxInputLengh:600,loginSuccess:!0,showChatWindow:!1,showConversationDetail:!0,showEntry:!1,hasFetchedUnread:!1,hasSidebarPanel:!1,serviceDownStatus:{alert:!1,closed:!1,list:!1,message:!1}}),Fr=e=>(0,t.createSelector)(f,(t=>(0,z.denormalize)(e,A.shopSchema,{shops:t}))),Gr=e=>{var t;return(null==e||null===(t=e.shopReducer)||void 0===t?void 0:t.fetchedShopIds)||[]},Br=e=>new Promise((t=>{(0,A.fetch)({parent:"conversation",resource:"unread-counts",params:{shop_ids:JSON.stringify(e)}}).then((({"unread-counts":e=[]})=>{t(e)})).catch((()=>{t([])}))}));function*xr({payload:{shopId:t}}){try{var r=yield(0,e.select)(Fr(t));r=yield(0,e.call)(A.fetch,{resource:"shop",id:t,params:{need_cache:1,cache_expires:600}});var{entities:o}=(0,A.normalize)("shops",r);return yield(0,e.put)(N({entities:o})),yield(0,e.put)((0,yt.updateFetchedShopIds)({shopIds:[r.id]})),r}catch(e){return{}}}var Vr=({shopIds:e})=>{var t={ids:JSON.stringify(e)};return new Promise((e=>{(0,A.fetch)({resource:"shop_list",params:t}).then((({shops:t=[]})=>{e(t)})).catch((()=>{e([])}))}))};function*Wr({payload:{shopId:t}}){try{return yield(0,e.call)(A.fetch,{parent:"shop",parentId:t,resource:"auth"})}catch(e){return{}}}var zr,Kr=e=>e.toastReducer.toast,Yr=r(701).t,qr=(e,t)=>{var r={};if(t){switch(t.type){case"auto-reply":e?t.first&&"enabled"===t.action?(r.message=Yr("settings.enable_auto_reply_successfully"),r.show=!0):(r.message="",r.show=!1):(t.first&&"enabled"===t.action?r.message=Yr("settings.failed_to_enable_auto_reply"):r.message="enabled"===t.action?Yr("settings.failed_to_enable"):Yr("settings.failed_to_disable"),r.show=!0);break;case"message":r.message=e?"save"===t.action?Yr("settings.message.save_successfully"):"delete"===t.action?Yr("settings.message.delete_successfully"):Yr("settings.message.import_successfully"):"save"===t.action?Yr("settings.message.failed_to_save"):"delete"===t.action?Yr("settings.message.failed_to_delete"):Yr("settings.message.failed_to_import"),r.show=!0;break;case"message-tips":e?(r.message="",r.show=!1):(r.message="enabled"===t.action?Yr("settings.failed_to_enable"):Yr("settings.failed_to_disable"),r.show=!0);break;case"forward":e||(r.message=403===t.status?Yr("forward.exception",{forwardName:""}):Yr("forward.server_error"),r.show=!0);break;case"send-feedback":r.message=Yr("feedback_modal.error.failed_to_send"),r.show=!0;break;case"server-error-tips":r.message=Yr("common.server_error.warning_tips"),r.show=!0;break;case"conversation-closed-tip":r.message=Yr("conversation_detail.closed.warning_tips"),r.show=!0;break;case"permission-denied":r.message=Yr("common.permission_denied"),r.show=!0;break;case"claim-voucher":r.message=Yr(e?"voucher.claim.success":"voucher.claim.fail"),r.show=!0;break;case"claim-voucher-not-satisfy":r.message=Yr("voucher.claim.fail_not_satisfy_rule"),r.show=!0;break;case"claim-voucher-already-claimed":r.message=Yr("voucher.claim.fail_already_claimed"),r.show=!0;break;case"claim-voucher-no-longer-valid":r.message="claim_voucher.error.no_longer_valid",r.show=!0;break;case"claim-voucher-failed":r.message="claim_voucher.error.failed",r.show=!0;break;case"private-image":r.message=Yr("common.image.expired"),r.show=!0;break;case"operation":"save"===t.action&&(r.message=Yr(e?"text.save_successfully":"text.save_failed")),r.show=!0;break;default:r.message=t.message,r.show=!0}r.type=e?"success":"fail"}return r};!function(e){e.COPY_SUCCEED_FEEDBACK="COPY_SUCCEED_FEEDBACK",e.SET_TOAST_INFORMATION="SET_TOAST_INFORMATION",e.SET_TOAST_INFORMATION_SUCCEEDED="SET_TOAST_INFORMATION_SUCCEEDED"}(zr||(zr={}));var{copySucceedFeedback:Qr,setToastInformation:Jr,setToastInformationSucceeded:Xr}=(0,P.createActions)({[zr.COPY_SUCCEED_FEEDBACK]:()=>({}),[zr.SET_TOAST_INFORMATION]:({type:e,error:t,toast:r,extra:o})=>({type:e,error:t,toast:r,extra:o}),[zr.SET_TOAST_INFORMATION_SUCCEEDED]:({toast:e})=>({toast:e})});function*$r({payload:{type:t,error:r,toast:o,extra:n}}){if(yield(0,e.select)($e)){var a=null;t&&(a=qr(!1,{type:t})),void 0!==r&&(a=r instanceof A.CustomError||r instanceof A.Webview?r.handler(null==n?void 0:n.toShopId):qr(!1,{type:"server-error-tips"})),o&&(a=o),yield(0,e.put)(Xr({toast:a}))}}const Zr={[zr.SET_TOAST_INFORMATION_SUCCEEDED]:wt()};var eo=r(701).t;function*to(){yield(0,e.put)(Jr({toast:qr(!0,{message:eo("common.successful_copied")})}))}function ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}var oo,no=[function*(){yield(0,e.takeEvery)(Jr,$r)},function*(){yield(0,e.takeEvery)(Qr,to)}],ao=(0,P.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Zr),{toast:{type:"",message:"",show:!1}}),so=e=>e.messageShortcutGroupReducer||{groups:[],status:"",currentGroupType:-1,currentGroupId:-1},io=(0,t.createSelector)(so,(e=>e.status)),co=(0,t.createSelector)(so,(e=>e.currentGroupType)),lo=(0,t.createSelector)(so,(e=>e.currentGroupId)),uo=(0,t.createSelector)(so,(e=>e.groups)),_o=(0,t.createSelector)(uo,(e=>e.filter((e=>e.group_type===o.MessageShortcutGroupType.PERSONAL)))),So=(0,t.createSelector)(uo,(e=>e.filter((e=>e.group_type===o.MessageShortcutGroupType.TEAM)))),po=(0,t.createSelector)(uo,co,((e,t)=>-1===t?e:e.filter((e=>e.group_type===t)))),Eo=(0,t.createSelector)(_o,(e=>e.reduce(((e,t)=>{var{message_shortcuts:r=[]}=t;return e.concat(r)}),[]))),vo=(0,t.createSelector)(So,(e=>e.reduce(((e,t)=>{var{message_shortcuts:r=[]}=t;return e.concat(r)}),[]))),ho=(0,t.createSelector)(Eo,vo,((e=[],t=[])=>[...e,...t])),fo=(0,t.createSelector)(ho,(e=>[...e.filter((e=>!(null==e||!e.pin_time))).sort(((e,t)=>e.pin_time-t.pin_time)),...e.filter((e=>!(null!=e&&e.pin_time)))])),go=(0,t.createSelector)(fo,co,lo,((e,t,r)=>{var o=-1===t?e:e.filter((e=>e.group_type===t));return-1===r?o:o.filter((e=>e.groupId===r))})),Oo=e=>{var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.settings)||{}},bo=e=>{var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.needForceUpdate)||!1},To=e=>{var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.status)||""},mo=e=>{var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.fetchStatus)||""},Ro=(0,t.createSelector)(Oo,(e=>e.auto_translation_status||"")),yo=(0,t.createSelector)(Oo,(e=>e.message_shortcuts_status||"")),Ao=(0,t.createSelector)(Oo,(e=>e.legacy_message_shortcuts_count||0)),Co=(0,t.createSelector)(Oo,(e=>e.distribution_account_status||"enabled")),Do=(0,t.createSelector)(Oo,(e=>e.display_banner||!1));function*wo(){try{yield(0,e.put)((0,yt.fetchSettingsStatus)({fetchStatus:o.DataFetchStatus.PENDING}));var t=Date.now(),r=yield(0,e.call)(A.fetch,{parent:"user",resource:"setting"}),n=(0,A.getReportManager)();return null==n||n.reportUserSettingApi(Date.now()-t),yield(0,e.put)((0,yt.fetchSettingsSucceeded)({settings:r,fetchStatus:o.DataFetchStatus.SUCCEED,timestamp:Date.now(),needForceUpdate:!1})),r}catch(t){return yield(0,e.put)((0,yt.fetchSettingsStatus)({fetchStatus:o.DataFetchStatus.FAILED})),{}}}!function(e){e.HANDLE_401_ERROR_REQUESTED="HANDLE_401_ERROR_REQUESTED",e.UPDATE_CONVERSATION_LISTS_HASH="UPDATE_CONVERSATION_LISTS_HASH",e.OPEN_MALL_URL="OPEN_MALL_URL"}(oo||(oo={}));var{openMallUrl:Po}=(0,P.createActions)({[oo.OPEN_MALL_URL]:({path:e,region:t,isAbsolute:r})=>({path:e,region:t,isAbsolute:r})}),No="xiapibuy.com";function*Io({payload:{path:t="",region:r="",isAbsolute:n=!1}}){if(n)window.open(t);else{var a,s=r?r.toLowerCase():(0,o.getRuntimeRegion)();"cn"!==s&&"kr"!==s||(s="my");var i=t?t.startsWith("/")?t:"/".concat(t):"";if((0,o.isVisitingCn)())try{var{data:c}=yield(0,e.call)(A.fetch,{url:"https://".concat((0,o.getSCApiServer)(),"/selleraccount/nonce/get/")}),l="".concat((0,o.cnDomainHash)(s),".").concat((0,o.envPrefix)()).concat(No),u=encodeURIComponent(window.btoa('{"next":"https://'.concat(l).concat(i,'"}')));i="/api/seller_platform/nonce/callback/?nonce=".concat(c.nonce,"&region=").concat(s,"&state=").concat(u),a="https://".concat(l).concat(i)}catch(e){a="https://".concat((0,o.cnDomainHash)(s),".").concat((0,o.envPrefix)()).concat(No).concat(i)}else a="https://".concat((0,o.domainPrefix)(),".").concat((0,o.domainSuffix)(s)).concat(i);window.open(a)}}var{handle401ErrorRequested:Uo}=(0,P.createActions)({[oo.HANDLE_401_ERROR_REQUESTED]:({resource:e})=>({resource:e})}),{updateConversationListsHash:Lo}=(0,P.createActions)({[oo.UPDATE_CONVERSATION_LISTS_HASH]:()=>({})}),Mo=[function*(){yield(0,e.takeEvery)(Po,Io)}],jo=(0,t.createSelector)(a,(e=>e.offers||{})),Ho=(e,r,n,a)=>(0,t.createSelector)(jo,(t=>Object.values(t).filter((t=>t.product_id===a&&t.model_id===r&&t.conversation_id===e&&t.id!==n&&t.status===o.OfferStatus.PENDING)))),ko=e=>(0,t.createSelector)(a,(t=>(0,z.denormalize)(e,A.offerSchema,t))),{reduxReset:Fo}=(0,P.createActions)({REDUX_RESET:()=>({})});window.addExternalGlobal("resetAction",Fo);var Go=e=>{var t;return(null===(t=e.draftReducer)||void 0===t?void 0:t.draftHash)||{}},Bo=e=>(0,t.createSelector)(Go,(t=>t[e]||"")),xo=e=>{var t;return(null==e||null===(t=e.translatePreferenceReducer)||void 0===t?void 0:t.translationSettings)||{}},Vo=e=>{var t;return(null==e||null===(t=e.translatePreferenceReducer)||void 0===t?void 0:t.fetchSettingsStatus)||""},Wo=e=>{var t;return(null==e||null===(t=e.translatePreferenceReducer)||void 0===t?void 0:t.updateStatus)||""};function zo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function*Yo(t,r,o,n=[]){var a=t,s=[],i=[];Array.isArray(t)&&(a=((0,A.normalize)(o,t).entities||{})[o]||{}),r.forEach((t=>{var r=t.id,c=a[r];c?["conversations","agentConversations"].includes(o)&&(void 0!==c.faking||c.latestMessageStatus||void 0!==c.unreplied)?(delete(t=Ko(Ko({},c),t)).faking,delete t.latestMessageStatus,delete t.unreplied,t.manual&&(delete t.manual,t.unreplied=!1),i.push(t)):(n.length&&n.forEach((e=>{t[e]=c[e]})),s.push((0,e.put)(I({name:o,id:r,record:Ko({},t)})))):i.push(t)})),i.length&&s.push((0,e.put)(N({entities:(0,A.normalize)(o,i).entities}))),yield(0,e.all)(s)}var qo,Qo=e=>(0,t.createSelector)(p,(t=>(0,z.denormalize)(e,[A.productSchema],{products:t}))),Jo=e=>e.reportReducer.beingReported;!function(e){e.REPORT_REQUESTED="REPORT_REQUESTED",e.CLEAR_REPORT_REQUESTED="CLEAR_REPORT_REQUESTED"}(qo||(qo={}));var{reportRequested:Xo,clearReportRequested:$o}=(0,P.createActions)({[qo.REPORT_REQUESTED]:({event_time:e,url:t})=>({event_time:e,url:t}),[qo.CLEAR_REPORT_REQUESTED]:()=>({})});function Zo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function en(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zo(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function*tn(){var t=yield(0,e.select)(Jo);if(t.length){var r=[...t];yield(0,e.put)($o()),r.sort(((e,t)=>Number(t.event_time)-Number(e.event_time))),yield(0,e.call)(A.fetch,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_active",payload:JSON.stringify(en(en({},r[0]),{},{platform_id:(0,o.isVisitingCNSC)()||(0,o.isVisitingKRSC)()?2:1}))})}}const rn={[qo.REPORT_REQUESTED]:(e,{payload:{event_time:t,url:r}})=>({beingReported:[...e.beingReported,{event_time:t,url:r}]}),[qo.CLEAR_REPORT_REQUESTED]:e=>({beingReported:[]})};function on(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}var nn,an=[function*(){for(;;)yield(0,e.delay)(6e4),yield tn()}],sn=(0,P.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?on(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):on(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},rn),{beingReported:[]});function cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ln(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.ADD_NEED_CAPTCHA_REQUEST="ADD_NEED_CAPTCHA_REQUEST",e.DELETE_CAPTCHA_REQUEST="DELETE_CAPTCHA_REQUEST",e.CLEAR_NEED_CAPTCHA_REQUEST="CLEAR_NEED_CAPTCHA_REQUEST",e.RESEND_NEED_CAPTCHA_REQUEST="RESEND_NEED_CAPTCHA_REQUEST"}(nn||(nn={}));const un={[nn.ADD_NEED_CAPTCHA_REQUEST]:(e,{payload:{request:t}})=>{var r=[...e.verifyRequests];return r.push(t),ln(ln({},e),{},{verifyRequests:r})},[nn.DELETE_CAPTCHA_REQUEST]:e=>{var t=[...e.verifyRequests];return t.pop(),ln(ln({},e),{},{verifyRequests:t})},[nn.CLEAR_NEED_CAPTCHA_REQUEST]:e=>ln(ln({},e),{},{verifyRequests:[]})};var{addNeedCaptchaRequest:dn,deleteCaptchaRequest:_n,clearNeedCaptchaRequest:Sn,resendNeedCaptchaRequest:pn}=(0,P.createActions)({[nn.ADD_NEED_CAPTCHA_REQUEST]:({request:e})=>({request:e}),[nn.DELETE_CAPTCHA_REQUEST]:()=>({}),[nn.CLEAR_NEED_CAPTCHA_REQUEST]:()=>({}),[nn.RESEND_NEED_CAPTCHA_REQUEST]:()=>({})});function*En(){try{var t=yield(0,e.select)(gn);if(t.length)for(var r of(yield(0,e.put)(Sn()),t)){var{id:o,extra:n}=r;switch(o){case"unread-count":yield(0,e.spawn)(yt.doRefreshTotalUnreadConversationsCount,n);break;case"unread-count-single":yield(0,e.spawn)(doRefreshSingleShopUnreadConversationCount,n);break;case"send-message":yield(0,e.put)((0,yt.resendMessageRequested)(n));break;case"orders_by_buyer":case"purchased_list":yield(0,e.put)((0,yt.fetchOrdersRequested)(n));break;case"item-list-my-shop":case"item-list-other-shop":yield(0,e.put)((0,yt.fetchProductsRequested)(n));break;case"fill-handler":yield(0,e.call)(yt.fillActionHandler,n)}}}catch(e){}}function vn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}var hn=(0,P.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},un),{verifyRequests:[]}),fn=[function*(){yield(0,e.takeEvery)(pn,En)}],gn=e=>e.captchaVerifyReducer.verifyRequests,On=e=>{var t;return(null===(t=e.translateReducer)||void 0===t?void 0:t.showOriginalMessages)||{}};function*bn(t,r,o){yield(0,e.takeEvery)(t,(function*(t){var n=t.payload.id;n?yield(0,e.race)({task:(0,e.call)(r,t),cancel:(0,e.take)((e=>e.type===o.toString()&&e.payload.id===n))}):yield(0,e.call)(r,t)}))}})(),S})())},53402:function(e,t,r){"use strict";e.exports=r(25061)}}]);