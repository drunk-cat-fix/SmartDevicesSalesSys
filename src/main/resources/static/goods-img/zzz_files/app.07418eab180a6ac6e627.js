(self.miniJsonp=self.miniJsonp||[]).push([[2143],{57387:function(e,t,n){"use strict";n.r(t),n.d(t,{createPortal:function(){return a},findDOMNode:function(){return i},flushSync:function(){return s},hydrate:function(){return l},render:function(){return c},unmountComponentAtNode:function(){return o},unstable_batchedUpdates:function(){return u}});var r=window.ReactDom,a=r.createPortal,o=r.unmountComponentAtNode,c=r.render,i=r.findDOMNode,s=r.flushSync,l=r.hydrate,u=r.unstable_batchedUpdates;t.default=r},501:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var r=n(58518),a=r.default.t.bind(r.default)},21674:function(e,t,n){"use strict";n(53426),n(62850),n(62773);var r=n(29494),a="MY",o="live";(0,r.init)(a,o,"8.8.9"),window.addExternalGlobal=function(e,t){if(window.__CHAT_GLOBAL__||(window.__CHAT_GLOBAL__={}),window.__CHAT_GLOBAL__[e])throw Error("Already Added!");window.__CHAT_GLOBAL__[e]=t},n.p="https://".concat(location.host.includes("cn")?"deo.shopeesz.com":"deo.shopeemobile.com","/shopee/shopee-seller-").concat(o,"-").concat(a.toLowerCase(),"/chateasy/");var c=n(86843),i=n(57387),s=n(55036),l=n(57209),u=n(44900),d=(n(27476),n(95767),n(98837),n(94882),n(98351),n(4942)),f=n(70885),m=n(53402),p=n(66633),h=n(96961),v=n(38104);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=null,_=null,y="";window.addEventListener("message",(function(e){var t;null!==(t=e.data)&&void 0!==t&&t.received&&window.clearInterval(_)}),!1);var C="https://".concat((0,r.getProjectUrl)("seller"),"/new-webchat/conversations"),b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=(0,c.useRef)();(0,c.useEffect)((function(){r.current=t}),[t]),(0,c.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return r.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(n,t)}}}),[e,n])},S=n(69193),N=n.n(S),R={"chat-container":"aRLAkB8Zrm",chatContainer:"aRLAkB8Zrm",counts:"gAiLALcDL7",logo:"MMvRRRsryi",expandContainer:"GIWCwJZJzG",hover:"Z27mpOy85y","chaticon-wrapper":"Gf04Aiojki",chaticonWrapper:"Gf04Aiojki","chat-icon":"jZzeCQHIzA",chatIcon:"jZzeCQHIzA",root:"CDfxbn4ZiJ",hasUnread:"uZjpaOVZLe",jump:"j0lWW1yiAZ","jump-hover":"NuUu0k527Z",jumpHover:"NuUu0k527Z",jumpbar:"Oaw6LpGsn6","status-dot":"qkN6EH0q3W",statusDot:"qkN6EH0q3W",noUnread:"IZKX0usVWk",white:"L7EAUoJKzm",red:"obWep1e_86",windowContainer:"ZbkI8cjmb1",hint:"_XSJ6AR_TF",hintFooter:"Vwk9C74cna",btn:"WRwluoypn9","hide-btn":"XOHLYgO_ci WRwluoypn9",hideBtn:"XOHLYgO_ci WRwluoypn9","reply-btn":"apIkMBLaHt WRwluoypn9",replyBtn:"apIkMBLaHt WRwluoypn9"},O=n(29697),k=n(94184),P=n.n(k),I=n(41152),T=n.n(I),D=n(77369),A=n.n(D),x=n(87462),L=(n(19371),n(82139),n(15671)),M=n(43144),j=n(79340),U=n(82963),W=n(61120),Z={root:"lmRE8vX68Q",show:"sd52AxPSGC",hide:"PJHbR_Yd2l",icon:"rN6EXEam8W",success:"W7qaOmRY0O",fail:"H8ClYudgH1",error:"eFxCzEILZ1",info:"aZ9QwlAfiP",warn:"U_lOTqvndI",message:"uM6AUh43Zu"},B=n(96630),q=n(45874),H=n.n(q),V=n(64645),F=n.n(V),G=n(54596),z=n.n(G),X=n(31214),K=n.n(X);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,W.Z)(e);if(t){var a=(0,W.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,U.Z)(this,n)}}var $={transition:"opacity ".concat(200,"ms ease-in-out"),opacity:0},ee={success:H(),fail:F(),error:F(),info:K(),warn:z()},te={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:1},exited:{opacity:0}},ne=function(e){(0,j.Z)(n,e);var t=J(n);function n(e){var r;return(0,L.Z)(this,n),(r=t.call(this,e)).state={show:!1},r.timer=null,r.eventListenerAdded=!1,r}return(0,M.Z)(n,[{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"render",value:function(){var e=this,t=this.props.toast,n=t.type,r=t.message,a=this.state.show,o="".concat(Z.root," ").concat(a?Z.show:Z.hide),i="".concat(Z.icon," ").concat(Z[n]),s=ee[n];return c.default.createElement(B.ZP,{in:a,timeout:200,addEndListener:function(t){e.eventListenerAdded||(t.addEventListener("transitionend",(function(){e.state.show&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){e.setState({show:!1},(function(){e.timer&&clearTimeout(e.timer),e.props.setToastInformation({toast:{type:"",message:"",show:!1}})}))}),1500))}),!1),e.eventListenerAdded=!0)}},(function(e){return c.default.createElement("div",{className:o,style:Q(Q({},$),te[e])},s&&c.default.createElement(N(),{svg:s,className:i}),c.default.createElement("div",{className:Z.message},r))}))}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.toast,n=t.message,r=t.show;return n?r?{show:r}:null:{show:!1}}}]),n}(c.default.PureComponent),re=n.p+"1d65e1b1865219c9d05f.png",ae="gEBiGsPtJy",oe="yyHKyYrvkA",ce="ZAV0ULHaxr",ie="auAKC8Ldbh",se="OnSxgsQlfi",le=n(501).t,ue=function(){return c.default.createElement("div",{className:ae},c.default.createElement("div",{className:oe},c.default.createElement("img",{className:ce,src:re}),c.default.createElement("div",{className:ie},le("common.error.hint_text")),c.default.createElement("div",{className:se,onClick:function(){window.location.reload()}},le("common.error.reload"))))},de="gLbzKNEAYF",fe="sIQQtRWQPz",me="Mj9lh6KccD",pe="yLzxr6DkWa",he="WHIaShCfot",ve="QDLp_uN4bC",we=n(11876),ge=n.n(we),Ee=n(27067),_e=n.n(Ee),ye=(n(6059),n(97326)),Ce="hczDQaHbc3",be="Ht2E1kwC5D",Se="bAKwNuP3ME",Ne=n(6691),Re=n.n(Ne),Oe=n(501).t;function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,W.Z)(e);if(t){var a=(0,W.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,U.Z)(this,n)}}var Pe=function(e){(0,j.Z)(n,e);var t=ke(n);function n(e){var r;return(0,L.Z)(this,n),(r=t.call(this,e)).state={hasError:!1},r.handleReload=r.handleReload.bind((0,ye.Z)(r)),r}return(0,M.Z)(n,[{key:"componentDidCatch",value:function(e){console.log("******* error",e),this.setState({hasError:!0})}},{key:"handleReload",value:function(){window.location.reload()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.shouldShowErrorPic,r=c.default.createElement("div",{className:Ce},n&&c.default.createElement(N(),{svg:Re(),className:be}),c.default.createElement("div",null,Oe("common.error.load_failed"),c.default.createElement("span",{className:Se,onClick:this.handleReload},Oe("common.error.reload"))));return this.state.hasError?r:t}}]),n}(c.default.Component),Ie="EGGLy1QwiK",Te="iTrdMlUViL",De="JVrP6W1yHV",Ae="lm0LkZVj3H",xe="tGULtQDa1B",Le="cq5bdsI9t0",Me="bUDk9CxOKh",je="X6WsSex6SN",Ue=n(501).t,We=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){switch(t.name){case"profile":return c.default.createElement("div",{className:Ie},c.default.createElement(_e(),{half:!0}));case"input-field":return c.default.createElement("div",{className:Ae},c.default.createElement(_e(),{half:!0,className:xe}),c.default.createElement("div",{className:P()(Te,Me)},c.default.createElement("div",{className:De},c.default.createElement(_e(),{type:"square",className:Le}),c.default.createElement(_e(),{type:"square",className:Le}),c.default.createElement(_e(),{type:"square",className:Le}),c.default.createElement(_e(),{type:"square",className:Le}),c.default.createElement(_e(),{type:"square",className:Le})),c.default.createElement(_e(),{type:"square",className:Le})));default:return c.default.createElement("div",{className:je},c.default.createElement(ge(),{isInit:!0,text:Ue(t.loadingKey)||""}))}};return function(r){var a=n(),o="message-section"===t.name;return c.default.createElement(Pe,{shouldShowErrorPic:o},c.default.createElement(c.Suspense,{fallback:a},c.default.createElement(e,r)))}},Ze=(n(48833),n(35003)),Be=(n(16449),n(15441)),qe=n(6286),He=n.n(qe),Ve=n(69467),Fe=n.n(Ve),Ge="Q5ZFQPxl3o",ze="yVS8Kvmp4B",Xe="J6Wsd44GIt",Ke="dSvWPdEqZy",Ye="dyCt9D9qer",Qe="g_JG5TYbID",Je="StbvagNiMb",$e="Wx3Jo2Qguh",et=n(501).t,tt=function(e){var t=e.successModalVisible,n=e.setSuccessModalVisible,r=e.goToChatRequest,a=(0,c.useState)(5),o=(0,f.Z)(a,2),i=o[0],s=o[1];return(0,c.useEffect)((function(){if(t)var e=i,n=setInterval((function(){e>1?(e-=1,s((function(e){return e-1}))):(clearInterval(n),r())}),1e3)}),[t]),c.default.createElement(Ze.default,{visible:t,center:!0,onCancel:function(){return n(!1)},onConfirm:function(){return n(!1)},contentSlot:c.default.createElement("div",{className:Ye},c.default.createElement(N(),{svg:Fe(),className:Qe}),c.default.createElement("div",{className:Xe},et("common.transfer_page.success_modal.title")),c.default.createElement("div",{className:Ke},et("common.transfer_page.success_modal.desc")),c.default.createElement(Be.default,{className:"demo-button",type:"primary",onClick:r},et("common.transfer_page.success_modal.confirm_text")," (",i,"s)"))})},nt=function(e){var t=e.failModalLoading,n=e.failModalVisible,r=e.setFailModalVisible,a=e.handleAgainTransferToSellerRequest;return c.default.createElement(Ze.default,{visible:n,center:!0,onCancel:function(){return r(!1)},onConfirm:function(){return r(!1)},contentSlot:c.default.createElement("div",{className:Ye},c.default.createElement(N(),{svg:F(),className:"".concat(Qe," ").concat(Je)}),c.default.createElement("div",{className:Xe},et("common.transfer_page.fail_modal.title")),c.default.createElement("div",{className:Ke},et("common.transfer_page.fail_modal.desc")),c.default.createElement("div",{className:$e},c.default.createElement(Be.default,{onClick:function(){return r(!1)}},et("common.transfer_page.fail_modal.cancel_text")),c.default.createElement(Be.default,{type:"primary",loading:t,onClick:a},et("common.transfer_page.fail_modal.confirm_text"))))})},rt={transferToSellerRequest:v.transferToSellerRequest,goToChatRequest:v.goToChatRequest},at=(0,s.connect)((function(e){return{shopRegion:(0,p.currentConversationShopRegionSelectors)(e),shopName:(0,p.currentConversationShopNameSelectors)(e)}}),rt)((function(e){var t=e.shopRegion,n=e.shopName,r=e.transferToSellerRequest,a=e.goToChatRequest,o=(0,c.useState)(!1),i=(0,f.Z)(o,2),s=i[0],l=i[1],u=(0,c.useState)(!1),d=(0,f.Z)(u,2),m=d[0],p=d[1],h=(0,c.useState)(!1),v=(0,f.Z)(h,2),w=v[0],g=v[1],E=(0,c.useState)(!1),_=(0,f.Z)(E,2),y=_[0],C=_[1],b=(0,c.useState)(!1),S=(0,f.Z)(b,2),R=S[0],O=S[1];return c.default.createElement("div",{className:Ge},c.default.createElement(N(),{svg:He(),className:ze}),c.default.createElement("div",{className:Xe},et("common.transfer_page.shop_title",{region:t,shop:n})),c.default.createElement("div",{className:Ke},et("common.transfer_page.shop_desc",{region:t,shop:n})),c.default.createElement(Be.default,{type:"primary",onClick:function(){return l(!0)}},et("common.transfer_to_seller.shop",{region:t})),c.default.createElement(Ze.default,{title:et("common.transfer_page.modal.title"),content:et("common.transfer_page.modal.desc"),visible:s,confirmText:et("common.confirm"),cancelText:et("common.cancel"),onCancel:function(){return l(!1)},onConfirm:function(){p(!0),r({successCallback:function(){g(!0),p(!1)},failCallback:function(){C(!0),p(!1)}}),l(!1)},isConfirmLoading:m,isConfirmDisabled:m}),c.default.createElement(tt,{successModalVisible:w,setSuccessModalVisible:g,goToChatRequest:a}),c.default.createElement(nt,{failModalLoading:R,failModalVisible:y,setFailModalVisible:C,handleAgainTransferToSellerRequest:function(){O(!0),r({successCallback:function(){C(!1),g(!0),O(!1)},failCallback:function(){C(!1),O(!1)},showErrorToast:!0})}}))})),ot=We((0,c.lazy)((function(){return Promise.all([n.e(8969),n.e(311),n.e(785),n.e(9159),n.e(5623),n.e(6587),n.e(9725),n.e(2099),n.e(6001),n.e(3962),n.e(370),n.e(4728),n.e(6938),n.e(4404),n.e(4153),n.e(3140),n.e(1216),n.e(7625),n.e(6845)]).then(n.t.bind(n,67625,23))})),{name:"profile"}),ct=We((0,c.lazy)((function(){return Promise.all([n.e(8969),n.e(3093),n.e(8455),n.e(311),n.e(785),n.e(963),n.e(6587),n.e(9725),n.e(2099),n.e(6001),n.e(3962),n.e(370),n.e(4728),n.e(6938),n.e(4404),n.e(4153),n.e(7917),n.e(1377),n.e(3140),n.e(5177),n.e(9039),n.e(1216),n.e(8802),n.e(664)]).then(n.t.bind(n,39725,23))})),{name:"input-field"}),it=We((0,c.lazy)((function(){return Promise.all([n.e(8969),n.e(3093),n.e(8455),n.e(785),n.e(963),n.e(4488),n.e(9159),n.e(4735),n.e(6587),n.e(9725),n.e(2099),n.e(6001),n.e(3962),n.e(370),n.e(4728),n.e(6938),n.e(4404),n.e(4153),n.e(7917),n.e(1377),n.e(5084),n.e(8846),n.e(6462),n.e(4307),n.e(3378),n.e(6308),n.e(7905),n.e(3301),n.e(6051),n.e(3140),n.e(5177),n.e(9039),n.e(1216),n.e(7417),n.e(2260),n.e(374)]).then(n.t.bind(n,84442,23))})),{name:"message-section",loadingKey:"common.loading"}),st=We((0,c.lazy)((function(){return n.e(2238).then(n.t.bind(n,65574,23))})),{name:"dropper"}),lt=function(e){var t=(0,c.useState)(!1),n=(0,f.Z)(t,2),a=n[0],o=n[1],i=(0,c.useState)([]),s=(0,f.Z)(i,2),l=s[0],u=s[1],d=e.shop,m=e.currentUser,p=e.currentBuyer,v=e.isSubAccount,w=e.currentConversation,g=e.drawerMedias,E=e.hasVideoPermission,_=e.setToastInformation,y=e.shopStatistics,C=e.isSidebarList,b=e.isDriver,S=e.currentAffiliate,N=e.setAiReply,R=e.currentShopIsManagedByShopee,O=function(e){e.preventDefault(),a&&o(!1)},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fail";_({toast:{show:!0,type:t,message:e}})};return c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:"".concat(de," ").concat(C?fe:"")},c.default.createElement(ot,{shop:d,currentUser:m,currentBuyer:p,isSubAccount:v,currentConversation:w,shopStatistics:y,isSidebarList:C,currentAffiliate:S})),R?c.default.createElement(at,null):c.default.createElement("div",{className:"".concat(me," ").concat(C?pe:""),onDragEnter:function(e){e.preventDefault(),!a&&o(!0)}},a&&c.default.createElement(st,{onSuccess:function(e){var t=w.id,n=w.shop_id;u(e),(0,h.$tracker)({operation:r.TrackerOperation.ACTION_DRAG_VIDEO,section:"conversation_window",data:{conversation_id:t},shopId:n}),N({aiReply:[]})},onDragOver:function(e){return e.preventDefault()},onDragLeave:O,onDrop:O,receiverName:w.to_name,hasVideoPermission:E&&!b,currentMediaNum:g.length,onError:k}),c.default.createElement("div",{id:"messagesContainer",className:he},c.default.createElement(it,{currentUser:m,currentConversation:w})),c.default.createElement("div",{className:ve,style:{minHeight:"".concat(r.MINI_MIN_TEXT_BOX_HEIGHT,"px")}},c.default.createElement(ct,{shop:d,currentUser:m,currentBuyer:p,isSubAccount:v,drawerMedias:g,draggedMedias:l,hasVideoPermission:E,currentConversation:w,handleErrorWithToast:k}))))},ut={setAiReply:v.setAiReply},dt=(0,s.connect)((function(e,t){var n=t.currentConversation,r=n.to_id,a=n.shop_id;return{drawerMedias:(0,p.mediaListSelector)(e),hasVideoPermission:(0,m.hasVideoPermissionSelector)(e),shop:(0,p.currentConversationShopSelectors)(e),shopStatistics:(0,m.shopStatisticsSelector)(r,a)(e),isDriver:(0,p.isDriverSelector)(e),currentAffiliate:(0,p.currentAffiliateSelector)(e),currentShopIsManagedByShopee:(0,p.currentShopIsManagedByShopeeSelector)(e)}}),ut)(lt),ft=n(92615),mt=n.n(ft),pt=n(501).t;function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wt,gt=(0,s.connect)((function(e){return{currentUserId:(0,m.currentUserIdSelector)(e),showRecallBanner:(0,m.showRecallBannerSelector)(e)}}),null)((function(e){var t=e.currentUserId,n=e.showRecallBanner,a=(0,c.useState)(!1),o=(0,f.Z)(a,2),i=o[0],s=o[1];if((0,c.useEffect)((function(){var e=(r.LS.getItem("mini-closeMessageExpiredAlert",!0)||{})[t];s(e)}),[t]),!(!i&&n))return null;return c.default.createElement(mt(),{isBar:!0,showIcon:!0,content:pt("chat.message_expired_tip"),closeable:!0,onClose:function(){var e=vt(vt({},r.LS.getItem("mini-closeMessageExpiredAlert",!0)||{}),{},(0,d.Z)({},t,!0));r.LS.setItem("mini-closeMessageExpiredAlert",e,!0),s(!0)}})})),Et=n(94974),_t=n.n(Et),yt=n(17744),Ct=n.n(yt),bt=(n(26381),n(22730),n(14335)),St=n.n(bt),Nt=n(83540),Rt=n.n(Nt),Ot=n(38425),kt=n.n(Ot),Pt=n(9054),It=n.n(Pt),Tt=n(2547),Dt=n.n(Tt),At=n.p+"df95536186a5d658263c.png",xt="E1p2ARHhtj",Lt="elvJjCo914",Mt="qGQqO_DNoK",jt=function(e){var t=e.children,n=e.content,r=e.placement,a=e.tipClassName,o=(0,c.useState)(!1),i=(0,f.Z)(o,2),s=i[0],l=i[1];return c.default.createElement("div",{className:xt,onMouseEnter:function(){l(!0)},onMouseLeave:function(){l(!1)}},t,s&&c.default.createElement("div",{className:P()(Lt,(0,d.Z)({},Mt,"center"===r),a)},n))},Ut={container:"UvGSSkd1qQ",header:"PBqe51NF33",windows:"Z8RjJZsXy1","logo-wrapper":"Ffl5D3J1YM",logoWrapper:"Ffl5D3J1YM",logo:"tH3c0fxDcu","operator-wrapper":"zhhA1X0YeX",operatorWrapper:"zhhA1X0YeX","operator-item-wrapper":"b4WLaPHvaN",operatorItemWrapper:"b4WLaPHvaN","operator-item":"X8XVK1EpGd",operatorItem:"X8XVK1EpGd","show-dialog":"cBwU5LVKk8 X8XVK1EpGd",showDialog:"cBwU5LVKk8 X8XVK1EpGd","hide-dialog":"MSU7d8LTb3 X8XVK1EpGd",hideDialog:"MSU7d8LTb3 X8XVK1EpGd",minimize:"uhPpW_bDvZ X8XVK1EpGd",unread:"t0DSoDjLOv","unread-open":"GQqiEMsjau",unreadOpen:"GQqiEMsjau","unread-close":"sCTuxhWsM6",unreadClose:"sCTuxhWsM6",details:"C8Jzw7jkTU","half-container":"eB3tTukA7J UvGSSkd1qQ",halfContainer:"eB3tTukA7J UvGSSkd1qQ",blank:"lBcVbnezbE","hide-blank":"qqqFtuT3WF",hideBlank:"qqqFtuT3WF",maxBlank:"AJGGbveN2k",plate:"t6aX8KMaL1",image:"zMIcJ6vtsM","error-image":"y1awX1FEiw",errorImage:"y1awX1FEiw",title:"YN8sHjfMB4","blank-title":"D_bmite0fe YN8sHjfMB4",blankTitle:"D_bmite0fe YN8sHjfMB4",reload:"nG2T6V5_Ra","error-img":"pRa93I89hk",errorImg:"pRa93I89hk","error-title":"j0EIXydtVc YN8sHjfMB4",errorTitle:"j0EIXydtVc YN8sHjfMB4"},Wt=n(501).t,Zt=We((0,c.lazy)((function(){return Promise.all([n.e(8969),n.e(3093),n.e(8455),n.e(311),n.e(4488),n.e(6587),n.e(9725),n.e(2099),n.e(6001),n.e(3962),n.e(370),n.e(4728),n.e(6938),n.e(4404),n.e(4153),n.e(7917),n.e(3140),n.e(5177),n.e(1216),n.e(6903),n.e(8050)]).then(n.t.bind(n,72577,23))})),{name:"conversations"}),Bt={minimize:_t(),hideDialog:Dt(),showDialog:It()},qt=function(e){var t=e.newbie,n=e.currentUser,a=e.isSubAccount,o=e.currentBuyer,i=e.loginSuccess,s=e.totalUnreadCount,l=e.showConversationDetail,u=e.currentConversation,d=(e.updateUserRequested,e.setToastInformation),f=e.toast,m=e.updateChatWindowStatus,p=e.updateConversationDetailStatus,v=e.filter,w=e.conversationBeenDeleted,g=e.markMessagesRequested,E=(e.useNewChatEntrance,e.showServingTab);(0,c.useEffect)((function(){(0,h.$tracker)({operation:r.TrackerOperation.VIEW,data:{tab_name_lvl_1:v.toLowerCase(),is_chatbot_user:E}})}),[v]),(0,c.useEffect)((function(){var e=(0,h.getReportManager)();null==e||e.reportShowHomePage(!1)}),[]);var _,y={key:"minimize",tip:"header.tooltip.minimize",icon:"minimize",handler:function(e){m({showChatWindow:!1}),(0,h.$tracker)({type:"close_button"})}},C=(n.distribution_status,n.locale),b=["tw","cn"].includes((0,r.getServiceLocale)(C));return c.default.createElement("div",{style:{},className:l?Ut.container:Ut.halfContainer},c.default.createElement(gt,null),c.default.createElement("div",{className:Ut.header},c.default.createElement("div",{className:Ut.logoWrapper},c.default.createElement(N(),{svg:b?kt():Ct(),className:Ut.logo}),!!s&&c.default.createElement("div",{className:Ut.unread},c.default.createElement(N(),{svg:St(),className:Ut.unreadOpen}),s,c.default.createElement(N(),{svg:Rt(),className:Ut.unreadClose}))),(_=[],l?_.push({key:"hideDialog",tip:"header.tooltip.close_dialog",icon:"hideDialog",handler:function(e){p({showConversationDetail:!1}),(0,h.$tracker)({type:"fold_button"})}}):_.push({key:"showDialog",tip:"header.tooltip.open_dialog",icon:"showDialog",handler:function(e){var t,n,r,a,o;p({showConversationDetail:!0}),n=(t=u||{}).id,r=t.status,a=t.unread_count,o=t.latest_message_id,n&&"closed"!==r&&a>0&&g({conversationId:n,isRead:!0,latestMessageId:o}),(0,h.$tracker)({type:"unfold_button"})}}),_.push(y),c.default.createElement("div",{className:Ut.operatorWrapper},_.map((function(e){return c.default.createElement("div",{key:e.key,className:Ut.operatorItemWrapper},c.default.createElement(jt,{content:Wt(e.tip)},c.default.createElement(N(),{svg:Bt[e.icon],className:Ut[e.icon],onClick:e.handler})))}))))),c.default.createElement("div",{className:Ut.windows},function(){var e={currentUser:n,isSubAccount:a,currentConversation:u};if(i){return"blank_page.pcmall_title",c.default.createElement(c.default.Fragment,null,c.default.createElement(ne,{toast:f,setToastInformation:d}),c.default.createElement(Zt,(0,x.Z)({newbie:t},e)),c.default.createElement("div",{className:Ut.details},u.id?c.default.createElement(dt,(0,x.Z)({setToastInformation:d,currentBuyer:o},e)):c.default.createElement("div",{className:"".concat(Ut.blank," ").concat(l?"":Ut.hideBlank)},w?c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:Ut.errorImg},c.default.createElement("img",{src:At,className:Ut.image})),c.default.createElement("div",{className:Ut.errorTitle},Wt("conversation.server_error.deleted"))):c.default.createElement(c.default.Fragment,null,c.default.createElement(N(),{svg:He(),className:Ut.plate}),c.default.createElement("div",{className:Ut.blankTitle},Wt("blank_page.pcmall_title")),c.default.createElement("div",{className:Ut.subtitle},Wt("blank_page.tip"))))))}return c.default.createElement(ue,null)}()))},Ht={updateUserRequested:v.updateUserRequested,setToastInformation:m.setToastInformation,updateChatWindowStatus:m.updateChatWindowStatus,updateConversationDetailStatus:m.updateConversationDetailStatus,markMessagesRequested:v.markMessagesRequested},Vt=(0,s.connect)((function(e){return{newbie:(0,m.newbieSelector)(e),toast:(0,m.toastSelector)(e),currentUser:(0,m.currentUserSelector)(e)||{},currentBuyer:(0,p.currentBuyerSelector)(e)||{},isSubAccount:(0,m.isSubAccountSelector)(e),loginSuccess:(0,m.loginSuccessSelector)(e),totalUnreadCount:(0,m.totalUnreadConversationsCountSelector)(e),currentConversation:(0,p.currentConversationSelector)(e),currentConversationId:(0,p.currentConversationIdSelector)(e),showConversationDetail:(0,m.showConversationDetailSelector)(e),filter:(0,p.filterSelector)(e),conversationBeenDeleted:(0,p.conversationBeenDeletedSelector)(e),useNewChatEntrance:(0,m.useNewChatEntranceSelector)(e),showServingTab:(0,m.showServingTabSelector)(e)}}),Ht)((function(e){return c.default.createElement(qt,e)})),Ft=n(501).t,Gt=function(e){var t,n=e.showEntry,a=(e.isSubAccount,e.showChatWindow),o=e.hasUnread,i=e.handleClickEntry,s=e._counts,l=e.isCNUser,u=e.hasPermission,m=e.showDuesoonHint,p=e.handleHideHint,v=e.handleClickReplyNow,w=e.showConversationDetail,g=e.transitionClasses,E=e.setShowDuesoonHint,_=e.theme,y=e.updateChatWindowStatus,C=(0,c.useState)(!1),b=(0,f.Z)(C,2),S=b[0],k=b[1],I=(0,c.useState)(0),D=(0,f.Z)(I,2),x=(D[0],D[1]),L=(0,c.useRef)(null),M=null===(t="number"==typeof s?String(s):s)||void 0===t?void 0:t.length;(0,c.useEffect)((function(){(0,h.$tracker)({type:"chat_circular_old_entrance",section:"chat_circular_old_entrance",operation:r.TrackerOperation.IMPRESSION,data:{url:window.location.href},page:"seller_center_chat"})}),[]),(0,c.useEffect)((function(){if(n){var e=(0,h.getReportManager)();if(null==e||e.reportShowMinichat(),L.current){var t=L.current.getBoundingClientRect();x(t.width)}}}),[n]),(0,c.useEffect)((function(){a&&m&&E(!1)}),[a]);var j="\n    ".concat(R.root,"\n    ").concat(o?R.hasUnread:R.noUnread,"\n    ").concat(R[_],"\n  "),U="\n    ".concat(R.counts,"\n    ").concat(2===M?R.twoText:3===M?R.threeText:"","\n  ");return c.default.createElement("div",{className:R.chatContainer},c.default.createElement("div",{className:j,onClick:function(){a?y({showChatWindow:!1}):(k(!1),i())},onMouseEnter:function(){a||k(!0)},onMouseLeave:function(){k(!1)}},c.default.createElement("div",{className:R.chaticonWrapper},c.default.createElement(N(),{svg:"red"===_?T():A(),className:R.chatIcon})),o&&c.default.createElement("div",{className:U},s),c.default.createElement("div",{className:P()(R.expandContainer,(0,d.Z)({},R.hover,S)),style:{width:S?75:0},ref:L},c.default.createElement("div",{className:R.logo},l?"聊聊":"Chat"))),u&&m&&c.default.createElement("div",{className:R.hint},Ft("entry.crr_reminder"),c.default.createElement("div",{className:R.hintFooter},c.default.createElement("div",{className:R.hideBtn,onClick:p},Ft("common.maybe_later")),c.default.createElement("div",{className:R.replyBtn,onClick:v},Ft("common.reply_now")))),c.default.createElement(O.Z,{unmountOnExit:!0,in:a,timeout:w?300:225,classNames:g,onEnter:null},c.default.createElement("div",{className:R.windowContainer},c.default.createElement(Vt,null))))},zt=n(65862),Xt=n.n(zt),Kt={"logo-wrapper":"r2v9ozyahe",logoWrapper:"r2v9ozyahe",logo:"HiSJ3Vx2WM",chat:"m3Mb2Tqdlw",counts:"v_6qeRY1jW",root:"bGX0VV9OFp",hasUnread:"nAERRUqs_I",jump:"P_7D65k6v8",jumpbar:"lCHLPQcY1b",noUnread:"VMBV0_VURc",white:"t9J4UYN3jm",red:"m_VOzMbX6j",hint:"gG0vfe2rzi",hintFooter:"xlItAfgC0G",btn:"hWgLq9FUmR","hide-btn":"Qo96nl_Au8 hWgLq9FUmR",hideBtn:"Qo96nl_Au8 hWgLq9FUmR","reply-btn":"UPQ8yWSGDT hWgLq9FUmR",replyBtn:"UPQ8yWSGDT hWgLq9FUmR",error:"EU5AP2w2pW"},Yt=n(501).t,Qt=function(e){var t,n,r=e.showEntry,a=e.showEntryButton,o=(e.isSubAccount,e.showChatWindow),i=e.hasUnread,s=e.handleClickEntry,l=e._counts,u=e.isCNUser,d=e.hasPermission,f=e.showDuesoonHint,m=e.handleHideHint,p=e.handleClickReplyNow,v=e.setShowEntryButton,w=e.showConversationDetail,g=e.transitionClasses,E=e.theme,_=null===(t=window.__WEBCHAT_SESSION__)||void 0===t||null===(n=t.shop)||void 0===n?void 0:n.hide_for_mart_seller;(0,c.useEffect)((function(){if(r){var e=(0,h.getReportManager)();null==e||e.reportShowMinichat()}}),[r]),(0,c.useEffect)((function(){}),[]);var y="\n    ".concat(Kt.root,"\n    ").concat(i?Kt.hasUnread:Kt.noUnread,"\n    ").concat(Kt[E],"\n  ");return c.default.createElement(c.default.Fragment,null,a&&!_&&c.default.createElement("div",{className:y},c.default.createElement("div",{className:Kt.logoWrapper,onClick:s},i&&c.default.createElement("div",{className:Kt.counts},l),c.default.createElement(N(),{svg:Xt(),className:Kt.chat}),c.default.createElement(N(),{svg:u?kt():Ct(),className:Kt.logo})),d&&f&&c.default.createElement("div",{className:Kt.hint},Yt("entry.crr_reminder"),c.default.createElement("div",{className:Kt.hintFooter},c.default.createElement("div",{className:Kt.hideBtn,onClick:m},Yt("common.maybe_later")),c.default.createElement("div",{className:Kt.replyBtn,onClick:p},Yt("common.reply_now"))))),c.default.createElement(O.Z,{unmountOnExit:!0,in:o,timeout:w?300:225,classNames:g,onEnter:null,onExited:function(){return v(!0)}},c.default.createElement(Vt,null)))},Jt="VZURjZgd48",$t="gZSXuTECya",en="aBmy1g8C28",tn="hG2kVJ1aJ0",nn="kFb4ptXBeH",rn="glVxPVStQE",an="TylLzJLLTu glVxPVStQE",on="zWxOU2Js04 glVxPVStQE";function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln={updateCurTabFocused:m.updateCurTabFocused,updateChatWindowStatus:m.updateChatWindowStatus,initConversationRequested:v.initConversationRequested,closeConnection:v.closeConnectionRequested},un=(0,s.connect)((function(e){return{newbie:(0,m.newbieSelector)(e),showEntry:(0,m.showEntrySelector)(e),currentUser:(0,m.currentUserSelector)(e)||{},isSubAccount:(0,m.isSubAccountSelector)(e),loginSuccess:(0,m.loginSuccessSelector)(e),socketFeedback:(0,p.feedbackSelector)(e),showChatWindow:(0,m.showChatWindowSelector)(e),totalUnreadCount:(0,m.totalUnreadConversationsCountSelector)(e),showConversationDetail:(0,m.showConversationDetailSelector)(e),isMainPage:(0,m.isMainPageSelector)(e),hasFetchedUnread:(0,m.hasFetchedUnreadSelector)(e),curTabFocused:(0,m.curTabFocusedSelector)(e),totalConversationsCount:(0,p.totalConversationsCountSelector)(e),subaccountHasUnrepliedPermission:(0,m.subaccountHasUnrepliedPermissionSelector)(e),showCrrDue:(0,m.showCrrDueSelector)(e),useNewChatEntrance:(0,m.useNewChatEntranceSelector)(e)}}),ln)((function(e){var t=e.isUseNewEntryUI,n=e.showEntry,a=e.currentUser,o=e.isSubAccount,i=e.loginSuccess,s=e.socketFeedback,l=e.showChatWindow,u=e.totalUnreadCount,d=e.showConversationDetail,m=e.updateChatWindowStatus,p=e.updateCurTabFocused,v=(e.isMainPage,e.hasFetchedUnread),w=e.curTabFocused,S=e.totalConversationsCount,N=e.subaccountHasUnrepliedPermission,R=e.showCrrDue,O=e.initConversationRequested,k=(e.closeConnection,e.useNewChatEntrance),P=u>0,I=S.duesoonCount,T=a.locale,D=(0,c.useState)(!0),A=(0,f.Z)(D,2),x=A[0],L=A[1],M=(0,c.useRef)(u),j=(0,c.useState)(""),U=(0,f.Z)(j,2),W=U[0],Z=U[1],B=(0,c.useRef)(I),q=(0,c.useState)(!1),H=(0,f.Z)(q,2),V=H[0],F=H[1],G=(0,c.useState)(!1),z=(0,f.Z)(G,2),X=z[0],K=z[1],Y=R&&(!o||N),Q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;(0,h.$tracker)({type:e,operation:t,data:sn({ctx_url:window.location.href,unread_convo_cnt:u},n),page:r||"seller_center_chat"})};(0,c.useEffect)((function(){Q("chat_icon_non_animation",r.TrackerOperation.IMPRESSION,{has_unread_convo:!!u});var e=(0,h.getReportManager)();null==e||e.reportRenderHomePage(!1)}),[]);var J,$,ee,te=(J=function(e){p({focused:e})},$=100,ee=null,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ee&&(clearTimeout(ee),ee=null),ee=setTimeout((function(){J.apply(void 0,t)}),$)});(0,c.useEffect)((function(){var e=M.current;x&&0===e&&u>0&&v&&w&&(0,h.$tracker)({type:"chat_icon_status_change_to_with_unread_cnt",operation:r.TrackerOperation.IMPRESSION,data:{ctx_url:window.location.href},page:"seller_center_chat"}),Z(u>0?"red":"white"),M.current=u}),[u]),b("focus",(function(){return te(!0)})),b("blur",(function(){return te(!1)})),(0,c.useEffect)((function(){l&&L(!1)}),[l]),(0,c.useEffect)((function(){if(Y){var e=B.current;I>e&&(V||(F(!0),Q("chat_icon_reminder",r.TrackerOperation.IMPRESSION)),K(!0)),B.current=I}}),[I]),(0,c.useEffect)((function(){X&&(Q("chat_icon_animation",r.TrackerOperation.IMPRESSION),K(!1),wt=window.setInterval((function(){Z((function(e){return"red"!==e&&e?"red":"white"}))}),500),window.setTimeout((function(){wt&&clearInterval(wt),wt=null,Z(M.current>0?"red":"white")}),3400))}),[X]);var ne=["tw","cn"].includes((0,r.getServiceLocale)(T)),re=u>99?"99+":u,ae=(0,c.useMemo)((function(){var e={enter:Jt,enterActive:en,exit:nn,exitActive:rn};return e.exitActive=an,d||((e=sn(sn({},e),{},{enter:$t,enterActive:tn})).exitActive=on),e}),[d]);if(!n)return null;var oe=t?Gt:Qt;return c.default.createElement(oe,{showEntryButton:x,showEntry:n,isSubAccount:o,showChatWindow:l,hasUnread:P,handleClickEntry:function(){void 0===window.__CLICKED_ENTRY__&&(window.__CLICKED_ENTRY__=!0,performance.mark("ENTRY_CLICKED")),void 0===window.__OPEN_ENTRY__&&(window.__OPEN_ENTRY__=!0,window.__MINICHAT_ENTRY_CLICKED__={startTime:Date.now(),fromPage:"default"});var e=!s||s.status===r.SocketToAlertType.resolved;i&&e&&Q("chat_icon",r.TrackerOperation.CLICK,{has_unread_convo:!!u,is_animation:!!wt},"minichat_page"),m({showChatWindow:!0}),O({})},_counts:re,isCNUser:ne,hasPermission:Y,showDuesoonHint:V,handleHideHint:function(){F(!1),Q("chat_icon_reminder_mayber_later",r.TrackerOperation.CLICK)},handleClickReplyNow:function(){var e,t,n,a,o,c,i,s;F(!1),Q("chat_icon_reminder_reply_now",r.TrackerOperation.CLICK),e={currentConversation:{},webChatUrl:k?C:(0,r.getWebChatUrl)(),source:"replyNow"},t=e.currentConversation,n=void 0===t?{}:t,a=e.showChatbotConversation,o=e.webChatUrl,c=e.source,i=e.chatWithType,s=void 0===i?r.ChatWithTypeEnum.Buyer:i,(0,r.getItem)("mini-sc_redirect").then((function(e){e&&e.conversationId===n.id||(e={shopId:n.shop_id,userId:n.to_id,showChatbotConversation:a,chatWithType:s});var t=g(g({},e),{},{type:"MiniChatRedirect"});c&&(t.miniSource=c),E&&!E.closed?(y!==o&&(E.location.href=o),E.focus()):(t.showConvsBeforePreload=!0,E=window.open("".concat(o),"_blank")),y=o,_&&window.clearInterval(_),_=window.setInterval((function(){try{E.postMessage(t,o)}catch(e){E=null,window.clearInterval(_)}}),1e3)}))},setShowEntryButton:L,showConversationDetail:d,transitionClasses:ae,theme:W,setShowDuesoonHint:F,updateChatWindowStatus:m})}));(0,h.initMDAPSdk)();var dn=(0,h.getReportManager)();null==dn||dn.reportLoadResource();var fn=function(e){void 0===window.__OPEN_ENTRY__&&(window.__OPEN_ENTRY__=!0,window.__MINICHAT_ENTRY_CLICKED__={startTime:Date.now(),fromPage:e})},mn=function(e,t){var n,a;u.store.getState().userReducer.loginSuccess?e():(u.store.dispatch((0,m.updateChatWindowStatus)({showChatWindow:!0})),(null===(n=window.sidebarPanelChat)||void 0===n?void 0:n.toggle)&&(null===(a=window.sidebarPanelChat)||void 0===a||a.toggle(!0,"Chat")),u.store.dispatch((0,v.initConversationRequested)({})),t&&t(r.StartChatErrorCode.Login))},pn={create:function(e,t){var n=document.getElementById(e);if(!n){(n=document.createElement("div")).setAttribute("id",e);var r,a={position:"fixed",zIndex:"99999",right:"8px",bottom:"0"};for(r in a)n.style[r]=a[r];document.body.appendChild(n)}window.miniChatContainerId=e,function(e,t,n){i.default.render(c.default.createElement(l.zj,null,c.default.createElement(s.Provider,{store:u.store},c.default.createElement(e,{isUseNewEntryUI:n}))),document.getElementById(t))}(un,e,t)},startOrderChat:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};mn((function(){u.store.dispatch((0,v.redirectConversationRequested)({userId:t,shopId:e,orderId:n,entryPointType:r.entryPoint}))})),fn(r.entryPoint)},startChatWithText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};mn((function(){u.store.dispatch((0,v.redirectConversationRequested)({userId:e,message:t,entryPointType:n.entryPoint}))})),fn(n.entryPoint)},startChat:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};mn((function(){u.store.dispatch((0,v.redirectConversationRequested)({userId:t,shopId:e,productId:n,entryPointType:r.entryPoint,vSkuItem:r.vSkuItem}))})),fn(r.entryPoint)},startCommonChat:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};mn((function(){u.store.dispatch((0,v.redirectConversationRequested)({userId:t,shopId:e,entryPointType:{project_detail:3501,kol_marketplace_detail:3502,kol_marketplace:3503,top_five_affiliates:3504,key_metrics:3504,free_sample_detail:3505,affiliate_homepage:3506,key_metrics_detail_product:3507,key_metrics_detail_affiliate:3508,key_metrics_view_all_affiliate:3509,handover_center_page:3510,ams_find_mcn_list:3511,ams_mcn_detail:3512,ams_mcn_campaign_detail:3513}[n.entry],callback:n.onError}))}),n.onError),fn(n.entry)},minimizeChatWindow:function(){var e,t;u.store.dispatch((0,m.updateChatWindowStatus)({showChatWindow:!1})),(null===(e=window.sidebarPanelChat)||void 0===e?void 0:e.toggle)&&(null===(t=window.sidebarPanelChat)||void 0===t||t.toggle(!1,"Chat"))},inNewBie:function(){return!1},updateLoginStatus:function(){u.store.dispatch((0,m.loginRequested)())},logout:function(){u.store.dispatch((0,m.forceLogoutRequested)())},locateMessage:function(e,t){mn((function(){var n,r;e&&t&&(u.store.dispatch((0,m.updateChatWindowStatus)({showChatWindow:!0})),(null===(n=window.sidebarPanelChat)||void 0===n?void 0:n.toggle)&&(null===(r=window.sidebarPanelChat)||void 0===r||r.toggle(!0,"Chat")),u.store.dispatch((0,v.initConversationRequested)({})),u.store.dispatch((0,m.updateConversationDetailStatus)({showConversationDetail:!0})),u.store.dispatch((0,v.locationMessage)({msgId:e,shopId:t})))}))}};window.ChatEasy=pn,"function"==typeof window.chatReady?(window.__BEFORE_CHAT_READY__=Date.now(),window.chatReady()):pn.create("shopee-mini-chat-embedded",!0),pn.create("shopee-mini-chat-embedded")},53426:function(){performance&&performance.mark&&performance.mark("STATIC_LOADED")},44900:function(e,t,n){"use strict";n.r(t),n.d(t,{store:function(){return D}});var r=n(38250),a=n(38104),o=n(24360),c=n(85002),i=n(8279),s=n(42982),l=(n(35666),n(19371),n(34857)),u=n(53402),d=(n(27476),n(95767),n(98837),n(94882),n(98351),n(4942)),f=n(70885);n(83276),n(62850),n(62773);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=regeneratorRuntime.mark(w),v=regeneratorRuntime.mark(g);function w(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.payload.resource,n.t0="login"===t,!n.t0){n.next=5;break}return n.next=5,(0,l.put)((0,u.updateChatEntryStatus)({showEntry:!0}));case 5:return n.next=7,(0,l.put)((0,u.updateLoginSuccessStatus)({loginSuccess:!1}));case 7:return n.next=9,(0,l.put)((0,u.forceLogoutRequested)());case 9:case"end":return n.stop()}}),h)}function g(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.takeEvery)(u.handle401ErrorRequested,w);case 2:case"end":return e.stop()}}),v)}var E={blacklist:["userReducer"]},_={userReducer:u.userReducer,toastReducer:u.toastReducer,entityReducer:u.entityReducer,reportReducer:u.reportReducer,captchaVerifyReducer:u.captchaVerifyReducer},y=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.all)([g].concat((0,s.Z)(u.watchUserSagas),(0,s.Z)(u.watchToastSagas),(0,s.Z)(u.watchReportSagas),(0,s.Z)(u.watchHandleUrlSagas),(0,s.Z)(u.watchVerifySagas)).map(l.call));case 2:case"end":return e.stop()}}),e)})),C=n(29494),b=n(96961),S=regeneratorRuntime.mark(N);function N(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(t={operation:C.TrackerOperation.IMPRESSION,type:"chat_icon",data:{ctx_url:window.location.href,has_unread_convo:!!e,unread_convo_cnt:e}}).page="minichat_page",(0,b.$tracker)(t);case 3:case"end":return n.stop()}}),S)}var R=regeneratorRuntime.mark(k),O=regeneratorRuntime.mark(P);function k(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,l.select)(u.waitingTimeFilterSelector);case 2:return t=n.sent,n.next=5,(0,l.call)(a.syncConversationFilter,e,t);case 5:case"end":return n.stop()}}),R)}function P(){var e,t,n,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,l.call)(u.login);case 3:if(e=o.sent,t=e.session,n=e.params,!(r=t.user)){o.next=18;break}return o.next=10,(0,b.clearApiCache)();case 10:return o.next=12,(0,l.call)(u.handleLoginSucceededLogic,t,n);case 12:return o.next=14,(0,l.call)(k,r.id);case 14:return o.next=16,(0,l.put)((0,a.getGuideRequested)({userId:r.id,version:"8.8.9"}));case 16:return o.next=18,(0,l.put)((0,a.updateUnreadCount)({type:u.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT,source:C.UnreadSource.PRELOAD,callback:N}));case 18:o.next=25;break;case 20:return o.prev=20,o.t0=o.catch(0),console.error("[Load Chat Failed]\n",o.t0),o.next=25,(0,l.put)((0,u.updateLoginSuccessStatus)({loginSuccess:!1}));case 25:case"end":return o.stop()}}),O,null,[[0,20]])}var I=n(15861),T=function(){var e=(0,I.Z)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,e.t0=t,e.next="input-field"===e.t0?4:"message-section"===e.t0?8:"profile"===e.t0?12:"socket"===e.t0?16:"conversations"===e.t0?20:"redirection-and-sync"===e.t0?24:"shop-selector"===e.t0?28:"settings"===e.t0?32:"user"===e.t0?36:"translate"===e.t0?40:44;break;case 4:return e.next=6,Promise.all([n.e(8969),n.e(3093),n.e(8455),n.e(311),n.e(785),n.e(963),n.e(6587),n.e(9725),n.e(2099),n.e(6001),n.e(3962),n.e(370),n.e(4728),n.e(6938),n.e(4404),n.e(4153),n.e(7917),n.e(1377),n.e(3140),n.e(5177),n.e(9039),n.e(1216),n.e(8802),n.e(664)]).then(n.t.bind(n,39725,23));case 6:case 10:case 14:case 18:case 22:case 26:case 30:case 34:case 38:case 42:return r=e.sent,e.abrupt("break",44);case 8:return e.next=10,Promise.all([n.e(8969),n.e(3093),n.e(8455),n.e(785),n.e(963),n.e(4488),n.e(9159),n.e(4735),n.e(6587),n.e(9725),n.e(2099),n.e(6001),n.e(3962),n.e(370),n.e(4728),n.e(6938),n.e(4404),n.e(4153),n.e(7917),n.e(1377),n.e(5084),n.e(8846),n.e(6462),n.e(4307),n.e(3378),n.e(6308),n.e(7905),n.e(3301),n.e(6051),n.e(3140),n.e(5177),n.e(9039),n.e(1216),n.e(7417),n.e(2260),n.e(374)]).then(n.t.bind(n,84442,23));case 12:return e.next=14,Promise.all([n.e(8969),n.e(311),n.e(785),n.e(9159),n.e(5623),n.e(6587),n.e(9725),n.e(2099),n.e(6001),n.e(3962),n.e(370),n.e(4728),n.e(6938),n.e(4404),n.e(4153),n.e(3140),n.e(1216),n.e(7625),n.e(6845)]).then(n.t.bind(n,67625,23));case 16:return e.next=18,Promise.all([n.e(1377),n.e(7638)]).then(n.t.bind(n,88600,23));case 20:return e.next=22,Promise.all([n.e(8969),n.e(3093),n.e(8455),n.e(311),n.e(4488),n.e(6587),n.e(9725),n.e(2099),n.e(6001),n.e(3962),n.e(370),n.e(4728),n.e(6938),n.e(4404),n.e(4153),n.e(7917),n.e(3140),n.e(5177),n.e(1216),n.e(6903),n.e(8050)]).then(n.t.bind(n,72577,23));case 24:return e.next=26,n.e(1324).then(n.t.bind(n,58636,23));case 28:return e.next=30,Promise.all([n.e(6587),n.e(9725),n.e(2099),n.e(6001),n.e(3962),n.e(370),n.e(4728),n.e(6938),n.e(4404),n.e(4153),n.e(1216),n.e(1446)]).then(n.t.bind(n,16366,23));case 32:return e.next=34,n.e(5571).then(n.t.bind(n,55346,23));case 36:return e.next=38,n.e(2681).then(n.t.bind(n,82487,23));case 40:return e.next=42,n.e(9498).then(n.t.bind(n,34233,23));case 44:return e.abrupt("return",r);case 45:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=(0,c.createStore)({advancedCombineReducers:function(e){return(0,r.combineReducers)(function(e,t){return Object.entries(t).reduce((function(t,n){var r=(0,f.Z)(n,2),a=r[0],o=r[1];return p(p({},t),{},(0,d.Z)({},a,(function(t,n){return n.type!=="".concat(u.reduxReset)||e.blacklist.includes(a)||(t=void 0),o(t,n)})))}),{})}(E,e))},enhancers:[],extensions:[{middleware:[o.dynamicMiddlewares]},(0,i.getSagaExtension)()]},{id:"root",reducerMap:_,sagas:[o.watchModuleAdded,y,P]});(0,o.addMiddleware)((0,o.dynamicModuleActionsMiddleware)({store:D,lazyImport:T,dynamicActions:a}))}},function(e){e.O(0,[2143],(function(){[8969,3093,8455,311,785,963,6587,9725,2099,6001,3962,370,4728,6938,4404,4153,7917,1377,3140,5177,9039,1216,8802,664,4488,9159,4735,5084,8846,6462,4307,3378,6308,7905,3301,6051,7417,2260,374,5623,7625,6845,7638,6903,8050,1324,1446,5571,2681,9498,2238].map(e.E)}),5);var t=function(t){return e(e.s=t)};e.O(0,[1200,7917,2038,4444,1493,6435,9631,1216,2612],(function(){return t(63658),t(21674)}));e.O()}]);